(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8006],{21173:function(r,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password",function(){return n(48607)}])},48607:function(r,e,n){"use strict";n.r(e),n.d(e,{default:function(){return J}});var t=n(10253),s=n(85893),a=n(11163),i=n(67294),o=n(26793),u=n(16517),c=n(68697),d=n(82383),l=n(66128),f=n(26042),m=n(47568),p=n(7297),g=n(34051),h=n.n(g),v=n(47533),w=n(87536),x=n(64508),S=n(602),Z=n(76922),b=n(85652),j=n(73324),P=n(16310),E=n(77229),C=n(4874),R=n(86927);function _(){var r=(0,p.Z)(["\n    --text-color: ",";\n"]);return _=function(){return r},r}function k(){var r=(0,p.Z)(["\n    "," {\n        margin-bottom: ",";\n        margin-top: ",";\n    }\n"]);return k=function(){return r},r}var y=(0,j.ZP)(Z.xv).withConfig({componentId:"sc-3dea9925-0"})(_(),(function(r){return r.theme.palette.grey.base})),O=P.Ry().shape({email:P.Z_().required().email()}).required(),T=(0,j.ZP)((function(r){var e=r.onSubmitSuccess,n=r.className,a=(0,t.Z)((0,o.$)(),1)[0],i=(0,S.Z)(),u=(0,w.cI)({resolver:(0,v.X)(O)}),c=u.control,d=u.handleSubmit,l=u.formState.isSubmitting,f=function(){var r=(0,m.Z)(h().mark((function r(e){var n;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.email,r.abrupt("return",i.post("/forget-password",{email:n}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),p=(0,t.Z)((0,x.Db)(f,{onSuccess:function(){return e()}}),2),g=p[0],j=p[1],P=j.isLoading,_=j.error,k=j.reset,T=function(){var r=(0,m.Z)(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",g(e));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,s.jsxs)("form",{onSubmit:d(T),className:n,noValidate:!0,children:[(0,s.jsx)(w.Qr,{control:c,name:"email",render:function(r){var e=r.field,n=e.name,t=e.value,i=e.onChange,o=r.fieldState,u=o.error,c=o.invalid;return(0,s.jsx)(R.Z,{name:n,id:n,label:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(Z.xv,{variant:"subheading",children:[a("form.forgotPassword.email.label")," -"," ",(0,s.jsx)(y,{as:"span",variant:"subheading",children:a("form.forgotPassword.email.helper")})]})}),value:t,onChange:i,"aria-invalid":c,type:"email",feedback:null===u||void 0===u?void 0:u.message,status:c?b.Xz.ERROR:b.Xz.DEFAULT})}}),(0,s.jsx)(E.ZP,{type:"submit",filled:!0,variant:"primary",disabled:l||P,children:a("form.forgotPassword.submit")}),(0,s.jsx)(C.Z,{error:_,dissmiss:k})]})})).withConfig({componentId:"sc-3dea9925-1"})(k(),R.Z,(function(r){return r.theme.spacing[5]}),(function(r){return r.theme.spacing[5]})),F=n(41664),q=n.n(F);function N(){var r=(0,p.Z)(["\n    margin: "," 0;\n    line-height: 2.4rem;\n"]);return N=function(){return r},r}var X=(0,j.ZP)(Z.xv).withConfig({componentId:"sc-b187570b-0"})(N(),(function(r){return r.theme.spacing[3]})),U=function(r){var e=r.instructions,n=r.children,a=(0,t.Z)((0,o.$)(),1)[0];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X,{children:e}),(0,s.jsxs)(X,{children:[a("page.resetPassword.login.label")," ",(0,s.jsx)(q(),{href:d.AW.LOGIN,passHref:!0,children:(0,s.jsx)(Z.xv,{variant:"inline-link",as:"a",children:a("page.resetPassword.login.link")})}),"."]}),n]})},$=function(r){var e=(0,t.Z)((0,o.$)(),1)[0];return(0,s.jsx)(U,{instructions:e("page.resetPassword.forgot.instructions"),children:(0,s.jsx)(T,(0,f.Z)({},r))})},z=n(80094);function I(){var r=(0,p.Z)(["\n    margin-top: ",";\n\n    ",'[type="submit"] {\n        margin-top: ',";\n    }\n\n    "," + "," {\n        margin-top: ",";\n    }\n\n    "," {\n        margin-top: ",";\n    }\n"]);return I=function(){return r},r}var A,D=function(r){return P.Ry().shape({password:P.Z_().required(r("form.errors.required")).min(4,r("form.errors.min",{count:4})).matches(/^(?=.*[0-9])(?=.*[a-zA-Z]).*$/gm,r("form.errors.passwordRegex")),confirmPassword:P.Z_().required(r("form.errors.required")).oneOf([P.iH("password")],r("form.errors.passwordMatch"))}).required()},G=(0,j.ZP)((function(r){var e=r.onSubmitSuccess,n=r.initialValues,a=n.token,i=n.uuid,u=r.className,c=(0,t.Z)((0,o.$)(),1)[0],d=(0,S.Z)(),l=(0,w.cI)({resolver:(0,v.X)(D(c))}),f=l.control,p=l.handleSubmit,g=l.watch,Z=l.formState.isSubmitting,j=g("password",""),P=function(){var r=(0,m.Z)(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",d.put("/users/".concat(i,"/reset-password"),{password:e.password,token:a}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),_=(0,t.Z)((0,x.Db)(P,{onSuccess:function(r){var n=r.data;return e(n)}}),2),k=_[0],y=_[1],O=y.error,T=y.isLoading,F=y.reset,q=function(){var r=(0,m.Z)(h().mark((function r(e){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",k(e));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return(0,s.jsxs)("form",{onSubmit:p(q),className:u,children:[(0,s.jsx)(w.Qr,{control:f,name:"password",render:function(r){var e=r.field,n=e.name,t=e.value,a=e.onChange,i=r.fieldState,o=i.error,u=i.invalid;return(0,s.jsx)(R.Z,{name:n,id:n,label:c("form.resetPassword.password.label"),value:t,onChange:a,type:"password","aria-invalid":u,status:u?b.Xz.ERROR:b.Xz.DEFAULT,feedback:null===o||void 0===o?void 0:o.message})}}),(0,s.jsx)(z.Z,{password:j}),(0,s.jsx)(w.Qr,{control:f,name:"confirmPassword",render:function(r){var e=r.field,n=e.name,t=e.value,a=e.onChange,i=r.fieldState,o=i.error,u=i.invalid;return(0,s.jsx)(R.Z,{name:n,id:n,label:c("form.resetPassword.confirmPassword.label"),value:t,onChange:a,type:"password","aria-invalid":u,status:u?b.Xz.ERROR:b.Xz.DEFAULT,feedback:null===o||void 0===o?void 0:o.message})}}),(0,s.jsx)(C.Z,{error:O,dissmiss:F}),(0,s.jsx)(E.ZP,{type:"submit",filled:!0,variant:"primary",disabled:Z||T,children:c("form.resetPassword.submit")})]})})).withConfig({componentId:"sc-9e52503-0"})(I(),(function(r){return r.theme.spacing[5]}),E.ZP,(function(r){return r.theme.spacing[5]}),R.Z,R.Z,(function(r){return r.theme.spacing[5]}),z.Z,(function(r){return r.theme.spacing[3]})),L=function(r){var e=(0,a.useRouter)(),n=(0,t.Z)((0,o.$)(),1)[0];return(0,s.jsx)(U,{instructions:n("page.resetPassword.reset.instructions"),children:(0,s.jsx)(G,(0,f.Z)({initialValues:{uuid:e.query.uuid,token:e.query.token}},r))})},H=function(){var r=(0,t.Z)((0,o.$)(),1)[0];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.xv,{children:r("page.resetPassword.forgotSuccess.message")}),(0,s.jsx)(Z.xv,{children:r("page.resetPassword.forgotSuccess.instructions")})]})},M=n(42791),Q=n(22876),V=n(20094),W=n(20417),B=n(82542);!function(r){r.FORGOT="forgot",r.RESET="reset",r.FORGOT_SUCCESS="forgot_success",r.RESET_SUCCESS="reset_success"}(A||(A={}));var J=function(){(0,W.Z)();var r=(0,a.useRouter)(),e=(0,u.useDispatch)(),n=(0,t.Z)((0,o.$)(),1)[0],f=(0,i.useState)(),m=f[0],p=f[1],g=(0,i.useState)(function(r){var e=r.token,n=r.uuid;return(0,c.Z)(n)&&!!e}(r.query)?A.RESET:A.FORGOT),h=g[0],v=g[1],w=(0,i.useCallback)((function(){return v(A.FORGOT_SUCCESS)}),[v]),x=(0,i.useCallback)((function(r){v(A.RESET_SUCCESS),p(r)}),[v,p]),S=(0,i.useMemo)((function(){return h===A.FORGOT_SUCCESS?(0,s.jsx)(H,{}):h===A.RESET?(0,s.jsx)(L,{onSubmitSuccess:x}):(0,s.jsx)($,{onSubmitSuccess:w})}),[h,w,x]);return m?(0,s.jsx)(M.Z,{to:d.AW.HOME,isSuccess:!0,onTimeout:function(){return e((0,B.o)(m))},title:n("page.resetPassword.resetSuccess.title"),message:n("page.resetPassword.resetSuccess.message")}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(V.Z,{title:n("page.resetPassword.meta.title")}),(0,s.jsxs)(Q.Z,{title:n("page.resetPassword.meta.title"),children:[S,(0,s.jsx)(l.Z,{})]})]})}}},function(r){r.O(0,[1130,7246,9833,263,5008,9243,5403,2642,9774,2888,179],(function(){return e=21173,r(r.s=e);var e}));var e=r.O();_N_E=e}]);
//# sourceMappingURL=reset-password-91e0227b48c86f74.js.map