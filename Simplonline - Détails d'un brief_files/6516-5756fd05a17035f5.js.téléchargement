"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6516],{63334:function(n,e,t){t.d(e,{Zg:function(){return P},ps:function(){return j},vc:function(){return S},x4:function(){return Z}});var i=t(85817),r=t(69119),o=t(78343),a=t(43703),s=t(4135),c=t(11640),u=t(84129),l=t(584),d=t(67090),f=t(63500),h=t(52724),p=t(83894),m=t(77349),v=t(92300),g=t(18203),x=t(76972),b=function(n){var e=(0,i.Z)(n),t=(0,r.default)(n);return e<12?t:(0,o.Z)(t,12)},S={floor:a.default,ceil:s.default,add:c.default,dist:u.default},j={floor:function(n){return(0,l.default)(n,{weekStartsOn:1})},ceil:function(n){return(0,d.default)(n,{weekStartsOn:1})},add:f.Z,dist:function(n,e){return(0,h.Z)(n,e,{weekStartsOn:1})}},Z={floor:r.default,ceil:p.default,add:m.default,dist:v.default},P={floor:b,ceil:function(n){return(0,g.Z)((0,o.Z)(b(n),11))},add:function(n,e){return(0,o.Z)(n,12*e)},dist:function(n,e){return Math.floor((0,x.Z)(b(n),b(e))/12)}}},27135:function(n,e,t){t.d(e,{j:function(){return u},m:function(){return l}});var i=t(26042),r=t(69396),o=t(62470),a=t(29497),s=t(96486),c=t(67294),u=function(n,e){var t=function(n,t){return 0===Math.abs(e.dist(n,t))},i=e.floor(n.start);i=t(i,n.start)?i:e.add(i,1);var r=e.ceil(n.end);return{start:i,end:r=t(r,n.end)?r:e.add(r,-1)}},l=function(n){var e=n.viewportRef,t=n.unit,l=n.min,d=n.max,f=n.unitLength,h=(0,c.useMemo)((function(){var n=u({start:l,end:d},t);return{getScrollElement:function(){return e.current},estimateSize:function(){return f},horizontal:!0,count:Math.abs(t.dist(n.end,n.start))+1,bounds:n,overscan:30}}),[t,l,d,e,f]),p=h.count,m=h.bounds,v=(0,o.useVirtualizer)(h),g=(0,c.useCallback)((function(n){var e=function(n){var e=m.start.getTime(),i=t.add(m.start,1).getTime()-e,r=new Date(n).getTime()-e;return Math.floor(r*f/i)};return Math.abs((0,s.isNumber)(n)||(0,s.isDate)(n)?e(n):e(n.end)-e(n.start))}),[t,f,m]),x=(0,c.useCallback)((function(n){var e=m.start.getTime(),i=t.add(m.start,1).getTime()-e;return new Date(Math.floor(n*i/f)+e)}),[t.add,f,m.start]),b=(0,c.useMemo)((function(){return function(n){return(0,s.isNumber)(n)||(0,s.isDate)(n)?t.floor(n):{start:t.floor(n.start),end:t.ceil(n.end)}}}),[t,f,m]),S=(0,c.useCallback)((function(n){var e=v.getVirtualItems(),i=(0,s.first)(e),r=(0,s.last)(e),o=t.floor(l);if(i&&r){if(!n){var a=h.getScrollElement();if(!a)return;var c=h.horizontal?a.clientWidth:a.clientHeight,u=h.horizontal?a.scrollLeft:a.scrollTop;return{start:t.floor(x(u)),end:t.ceil(x(u+c))}}return{start:t.add(o,i.index),end:t.ceil(t.add(o,r.index))}}}),[v,t,l,p,h.getScrollElement]),j=(0,c.useCallback)((function(n,e){var t=S(e);return!!t&&(0,a.Z)((0,s.isNumber)(n)||(0,s.isDate)(n)?{start:n,end:n}:n,t)}),[S]);return(0,r.Z)((0,i.Z)({},v),{unitLength:f,bounds:m,round:b,getInterval:S,getDistance:g,getDate:x,isVisible:j})}},98956:function(n,e,t){t.d(e,{Z:function(){return ln}});var i=t(14924),r=t(26042),o=t(69396),a=t(10253),s=t(7297),c=t(85893),u=t(31387),l=t(84441),d=t(67294),f=t(26793),h=t(4874),p=t(42699),m=t(96843),v=t(313),g=t(96486),x=t(98583),b=t(47316),S=t(82383),j=t(59689),Z=t(63334),P=t(27135),C=function(){var n=(0,S.tv)(),e=(0,x.OT)().activeClassroom,t=(0,j.dF)({classroom:e,filters:{scale:"day"}}).data,a=(0,d.useMemo)((function(){if(!e||!t)return[];var n,i=e.startDate,r=e.endDate,o=null!==(n=t["hydra:member"])&&void 0!==n?n:[],a=(0,g.last)(o),s=function(n,e,t){var i=[],r=(0,P.j)({start:(0,j.sG)(n),end:Z.x4.ceil((0,j.sG)(e))},Z.x4),o=r.start;return t.forEach((function(n){var e=Z.Zg.ceil(Z.Zg.add((0,j.sG)(n.startDate),-1));i.push({start:o,end:e}),o=Z.Zg.floor(Z.Zg.add((0,j.sG)(n.endDate),1))})),i.push({start:o,end:r.end}),i.filter((function(n){return Z.Zg.dist(n.end,n.start)>0}))}(i,r,a?[a]:[]);return s=function(n){return n.map((function(n){return Z.x4.dist(n.end,n.start)<=29?n:{start:n.start,end:Z.x4.ceil(Z.x4.add(n.start,29))}}))}(s),function(n,e){return n.filter((function(n){return!(e&&!(0,p.default)(n.start,e))&&!(0,m.default)(n.end,n.start)&&!(0,v.default)(n.end,n.start)}))}(s,a&&(0,j.sG)(a.endDate))}),[e,t]),s=(0,j.Hh)({onSuccess:function(e,t){var r=e.data,o=t.start;n.push({route:S.AW.HOME,state:(0,i.Z)({anchor:b.L0.HOMEPAGE_SCENARIO_CARD},b.L0.HOMEPAGE_SCENARIO_CARD,{timestamp:o,educationalScenarioItemId:(0,j.sR)(r),scale:"day"})})}});return(0,o.Z)((0,r.Z)({},s),{mutate:function(n){var t=(0,g.last)(a);return e&&t?s.mutate((0,r.Z)({professionalSituation:n,classroom:e},t)):Promise.reject()},disabled:!e||!(0,g.last)(a)})},I=t(76922),y=t(742),w=t(73324),E=t(82532),k=t(35019),A=t(37264),R=t(3629),O=t(75924),T=t(77200),B=t(34765);function L(){var n=(0,s.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    padding: ",";\n    background-color: ",";\n    border-radius: ",";\n"]);return L=function(){return n},n}function D(){var n=(0,s.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    --text-color: ",";\n\n    & > div {\n        display: flex;\n        align-items: center;\n        gap: ",";\n\n        ",", "," {\n            cursor: pointer;\n        }\n    }\n"]);return D=function(){return n},n}function N(){var n=(0,s.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    & > div {\n        display: flex;\n        align-items: center;\n    }\n"]);return N=function(){return n},n}function _(){var n=(0,s.Z)(["\n    height: 24px;\n    width: 24px;\n    margin-right: ",";\n    margin-left: ",";\n"]);return _=function(){return n},n}function M(){var n=(0,s.Z)(["\n    display: flex;\n    align-items: center;\n    border: 1px solid ",";\n    border-radius: 56px;\n    max-height: 56px;\n    padding: ",";\n"]);return M=function(){return n},n}function F(){var n=(0,s.Z)(["\n    border-radius: 50%;\n    background-color: ",";\n    margin-right: ",";\n\n    --icon-color: ",";\n"]);return F=function(){return n},n}function G(){var n=(0,s.Z)(["\n    color: ",";\n"]);return G=function(){return n},n}function U(){var n=(0,s.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n"]);return U=function(){return n},n}function z(){var n=(0,s.Z)(["\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    background: ",";\n    padding: ",";\n    border-radius: ",";\n\n    ",":first-of-type {\n        border: 1px solid ",";\n    }\n\n    ",":disabled {\n        cursor: not-allowed;\n        pointer-events: all;\n    }\n"]);return z=function(){return n},n}function W(){var n=(0,s.Z)(["\n    > "," {\n        padding: ",";\n        margin: ",";\n        width: 764px;\n    }\n"]);return W=function(){return n},n}function H(){var n=(0,s.Z)(["\n    display: flex;\n    justify-content: center;\n    gap: ",";\n    margin-top: ",";\n    width: 100%;\n"]);return H=function(){return n},n}function V(){var n=(0,s.Z)(["\n    color: ",";\n"]);return V=function(){return n},n}function Y(){var n=(0,s.Z)(["\n    background-color: ",";\n    border: 1px solid\n        ",";\n"]);return Y=function(){return n},n}function $(){var n=(0,s.Z)(["\n    border-radius: ",";\n    background: ",";\n\n    "," {\n        margin-top: ",";\n        list-style-type: none;\n        padding-left: 0;\n    }\n"]);return $=function(){return n},n}var K=w.ZP.div.withConfig({componentId:"sc-bc5a8ba4-0"})(L(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[7]}),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.shape.borderRadius.large})),q=w.ZP.header.withConfig({componentId:"sc-bc5a8ba4-1"})(D(),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.spacing[6]}),y.Y,I.xv),J=w.ZP.div.withConfig({componentId:"sc-bc5a8ba4-2"})(N()),Q=w.ZP.img.withConfig({componentId:"sc-bc5a8ba4-3"})(_(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[2]})),X=w.ZP.div.withConfig({componentId:"sc-bc5a8ba4-4"})(M(),(function(n){return n.theme.palette.grey.lightest}),(function(n){return n.theme.spacing[5]})),nn=w.ZP.div.withConfig({componentId:"sc-bc5a8ba4-5"})(F(),(function(n){return n.theme.palette.purple.lightest}),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.palette.purple.base})),en=w.ZP.span.withConfig({componentId:"sc-bc5a8ba4-6"})(G(),(function(n){return n.theme.palette.grey.base})),tn=(0,w.ZP)(u.E.div).withConfig({componentId:"sc-bc5a8ba4-7"})(U(),(function(n){return n.theme.spacing[6]})),rn=(0,w.ZP)(u.E.footer).withConfig({componentId:"sc-bc5a8ba4-8"})(z(),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.spacing[3]}),(function(n){var e=n.theme;return"0 0 ".concat(e.shape.borderRadius.large," ").concat(e.shape.borderRadius.large)}),A.zx,(function(n){return n.theme.palette.white.base}),A.zx),on=(0,w.ZP)(R.Z).withConfig({componentId:"sc-bc5a8ba4-9"})(W(),R.Y,(function(n){return n.theme.spacing[9]}),(function(n){var e=n.theme;return"".concat(e.spacing[5]," auto")})),an=w.ZP.div.withConfig({componentId:"sc-bc5a8ba4-10"})(H(),(function(n){return n.theme.spacing[7]}),(function(n){return n.theme.spacing[10]})),sn=(0,w.ZP)(I.xv).withConfig({componentId:"sc-bc5a8ba4-11"})(V(),(function(n){return n.theme.palette.red.base})),cn=w.ZP.article.withConfig({componentId:"sc-bc5a8ba4-12"})(Y(),(function(n){var e=n.isBriefCompatible,t=n.isSelected,i=n.theme;return t&&e?i.palette.purple.base:t&&!e?i.palette.purple.light:i.palette.white.base}),(function(n){var e=n.isBriefCompatible,t=n.isSelected,i=n.theme;return t&&e?i.palette.purple.base:t&&!e?i.palette.purple.light:i.palette.white.base})),un={layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3}},ln=(0,w.ZP)((function(n){var e=n.professionalSituation,t=n.isSelected,s=n.onSelect,u=n.onCreateBriefClick,p=n.onDelete,m=n.className,v=n.briefSkills,g=n.briefLanguage,x=n.isEdit,Z=n.showCreateBriefButton,P=n.showPlaceBriefButton,w=n.context,R=e.title,L=e["@id"],D=e.createdAt,N=e.createdBy,_=e.language,M=e.targetedDomain,F=e.problematic,G=e.description,U=e.skills,z=(0,a.Z)((0,f.$)(),1)[0],W=(0,d.useState)(!1),H=W[0],V=W[1],Y=(0,d.useState)(!1),$=Y[0],ln=Y[1],dn=(0,d.useState)(!0),fn=dn[0],hn=dn[1],pn=(0,d.useState)(!0),mn=pn[0],vn=pn[1],gn=(0,j.rf)({onSuccess:function(){return p()}}),xn=gn.deleteProfessionalSituation,bn=gn.isLoading,Sn=(0,S.tv)(),jn=(0,E.Jx)(),Zn=(0,b.o_)(),Pn=Zn([b.L0.PROFESSIONAL_SITUATION_UPDATE],{scope:jn(e)}),Cn=Zn([b.L0.PROFESSIONAL_SITUATION_DELETE],{scope:jn(e)}),In=(0,j.sR)(e),yn=C(),wn=(0,d.useMemo)((function(){var n=[];return Pn&&n.push({id:"edit",action:function(){Sn.push({route:S.AW.PROFESSIONAL_SITUATION_EDIT,query:{id:In},state:(0,i.Z)({},B.R$,{context:w,isEdit:!0})})},label:z("component.shared.ProfessionalSituationItem.edit"),type:"action"}),Cn&&n.push({id:"delete",action:function(){return ln(!0)},label:z("component.shared.ProfessionalSituationItem.delete"),type:"action"}),n}),[ln,Pn,Cn,In]);return(0,c.jsxs)(cn,{className:m,isBriefCompatible:fn&&mn,isSelected:t,children:[(0,c.jsxs)(K,{children:[(0,c.jsxs)(q,{children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(y.Y,{id:L,color:"purple",checked:t,onChange:function(){if(s(e),g&&v){var n=U.map((function(n){return n["@id"]}));hn(v.every((function(e){return n.includes(e)}))),vn((null===_||void 0===_?void 0:_["@id"])===g)}}}),(0,c.jsx)(I.xv,{variant:"h4",as:"label",htmlFor:L,children:R})]}),(0,c.jsxs)(A.hU,{type:"button",variant:"secondary",onClick:function(){return V(!H)},children:[(0,c.jsx)(k.Tt,{direction:H?"up":"down"}),(0,c.jsx)(I.ys,{children:z("component.shared.ProfessionalSituationItem.".concat(H?"expand":"shrink","SrOnly"),{title:R})})]})]}),(0,c.jsxs)(J,{children:[(0,c.jsx)(T.Z,{type:"createdAt",date:D,user:N}),(0,c.jsxs)("div",{children:[(0,c.jsx)(I.xv,{variant:"label",children:_.locale.toUpperCase()}),(0,c.jsx)(Q,{alt:"",src:"/static/flags/".concat(_.locale,".svg"),onError:function(n){return n.currentTarget.style.display="none"}}),wn.length>0&&(0,c.jsx)(O.Z,{variant:"secondary",options:wn})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(I.xv,{variant:"label",children:z("component.shared.ProfessionalSituationItem.targetedDomain")}),(0,c.jsx)(I.xv,{lines:H?void 0:2,children:M})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(I.xv,{variant:"label",children:z("component.shared.ProfessionalSituationItem.problematic")}),(0,c.jsx)(I.xv,{preserve:!0,lines:H?void 0:2,children:F})]}),(0,c.jsx)(l.M,{children:H&&(0,c.jsxs)(tn,(0,o.Z)((0,r.Z)({},un),{children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(I.xv,{variant:"label",children:z("component.shared.ProfessionalSituationItem.description")}),(0,c.jsx)(I.xv,{preserve:!0,lines:H?void 0:2,children:G})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)(I.xv,{variant:"label",children:[z("component.shared.ProfessionalSituationItem.skills")," "," : ",(0,c.jsx)(en,{children:U.length})]}),(0,c.jsx)(A.rj,{as:"ul",children:U.map((function(n){return(0,c.jsx)(A.C4,{col:4,as:"li",children:(0,c.jsxs)(X,{children:[(0,c.jsx)(nn,{children:(0,c.jsx)(k.UH,{})}),(0,c.jsxs)(I.xv,{lines:2,children:[n.code,". ",n.officialTitle]})]})},n["@id"])}))})]})]}))}),!H&&(0,c.jsxs)("div",{children:[(0,c.jsxs)(I.xv,{variant:"label",children:[z("component.shared.ProfessionalSituationItem.skills")," "," : ",(0,c.jsx)(en,{children:U.length})]}),(0,c.jsx)(A.rj,{as:"ul",children:U.slice(0,3).map((function(n){return(0,c.jsx)(A.C4,{col:4,as:"li",children:(0,c.jsxs)(X,{children:[(0,c.jsx)(nn,{children:(0,c.jsx)(k.UH,{})}),(0,c.jsxs)(I.xv,{lines:2,children:[n.code,". ",n.officialTitle]})]})},n["@id"])}))})]}),t&&!fn&&(0,c.jsx)(sn,{children:z("component.shared.ProfessionalSituationItem.skillCompatible")}),t&&!mn&&(0,c.jsx)(sn,{children:z("component.shared.ProfessionalSituationItem.languageCompatible")})]}),(0,c.jsx)(l.M,{children:t&&(0,c.jsxs)(rn,(0,o.Z)((0,r.Z)({},un),{children:[P&&(0,c.jsxs)(A.zx,{type:"button",filled:!0,variant:"primary",loading:yn.isLoading,disabled:yn.disabled,onClick:function(){return yn.mutate(e)},children:[z("component.shared.ProfessionalSituationItem.placeProfessionalSituation"),yn.isLoading?(0,c.jsx)(k.gb,{}):(0,c.jsx)(k.Eh,{direction:"right"})]}),Z&&u&&(0,c.jsx)(A.zx,{type:"submit",filled:!0,variant:"primary",disabled:!(fn&&mn),"aria-disabled":!(fn&&mn),onClick:function(){return u(e)},children:z(x?"component.shared.ProfessionalSituationItem.updateBriefProfessionalSituation":"component.shared.ProfessionalSituationItem.createBriefFromProfessionalSituation")})]}))}),(0,c.jsxs)(on,{visible:$,children:[(0,c.jsx)(I.xv,{variant:"h4",children:z("component.shared.ProfessionalSituationItem.deleteConfirmation")}),(0,c.jsxs)(an,{children:[(0,c.jsx)(A.zx,{type:"button",variant:"primary",onClick:function(){return ln(!1)},children:z("component.shared.ProfessionalSituationItem.cancelation")}),(0,c.jsx)(A.zx,{type:"button",filled:!0,variant:"primary",onClick:function(){return xn((0,j.sR)(e))},children:bn?(0,c.jsx)(k.aN,{}):z("component.shared.ProfessionalSituationItem.confirmation")})]})]}),(0,c.jsx)(h.Z,{error:yn.error,dissmiss:function(){return yn.reset()}})]})})).withConfig({componentId:"sc-bc5a8ba4-13"})($(),(function(n){return n.theme.shape.borderRadius.large}),(function(n){return n.theme.palette.white.base}),A.rj,(function(n){return n.theme.spacing[2]}))},34765:function(n,e,t){t.d(e,{DD:function(){return on},eD:function(){return tn},R$:function(){return rn},yB:function(){return Y},ZP:function(){return un}});var i,r=t(14924),o=t(26042),a=t(69396),s=t(10253),c=t(7297),u=t(85893),l=t(57960),d=t(41664),f=t.n(d),h=t(67294),p=t(87536),m=t(26793),v=t(55101),g=t(91640),x=t(76922),b=t(6465),S=t(40849),j=t(73324),Z=t(98583),P=t(27367),C=t(35019),I=t(23581),y=t(50290),w=t(82383),E=t(59689),k=t(37264),A=t(94533),R=t(99534),O=t(29815),T=t(74021),B=t(14053),L=t(14692);!function(n){n.FRAMEWORKS="frameworks",n.LANGUAGES="languages",n.CREATOR_TYPE="creatorType"}(i||(i={}));var D=function(n,e){var t=e.t,r=e.backlist,o=void 0===r?[]:r,a=e.pinned;switch(n){case i.CREATOR_TYPE:return(0,T.L)(n,["me","others"],{t:t,backlist:o,pinned:a});case i.FRAMEWORKS:return(0,T.A)(n,t)(B.Z);case i.LANGUAGES:return(0,T.A)(n,t)(L.Z)}},N=t(98956);function _(){var n=(0,c.Z)(["\n    color: ",";\n    margin-bottom: ",";\n"]);return _=function(){return n},n}function M(){var n=(0,c.Z)(["\n    padding: ",";\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-color: ",";\n    border-radius: ",";\n    width: 100%;\n"]);return M=function(){return n},n}function F(){var n=(0,c.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    list-style-type: none;\n    padding: 0;\n"]);return F=function(){return n},n}function G(){var n=(0,c.Z)(["\n    margin-top: ",";\n    background-color: ",";\n    border-radius: ",";\n    height: 296px;\n"]);return G=function(){return n},n}function U(){var n=(0,c.Z)(["\n    display: flex;\n    border: none;\n    background-color: ",";\n    cursor: pointer;\n"]);return U=function(){return n},n}function z(){var n=(0,c.Z)(["\n    align-self: flex-start;\n"]);return z=function(){return n},n}function W(){var n=(0,c.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-top: ",";\n    button:last-child {\n        margin-left: auto;\n    }\n"]);return W=function(){return n},n}function H(){var n=(0,c.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n"]);return H=function(){return n},n}function V(){var n=(0,c.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n"]);return V=function(){return n},n}var Y,$=(0,j.ZP)(x.xv).withConfig({componentId:"sc-628648ba-0"})(_(),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.spacing[6]})),K=j.ZP.section.withConfig({componentId:"sc-628648ba-1"})(M(),(function(n){return n.theme.spacing[7]}),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.shape.borderRadius.medium})),q=j.ZP.ul.withConfig({componentId:"sc-628648ba-2"})(F(),(function(n){return n.theme.spacing[5]})),J=(0,j.ZP)(v.OG).withConfig({componentId:"sc-628648ba-3"})(G(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.palette.purple.lightest}),(function(n){return n.theme.shape.borderRadius.large})),Q=j.ZP.button.withConfig({componentId:"sc-628648ba-4"})(U(),(function(n){return n.theme.palette.transparent.base})),X=(0,j.ZP)(k.zx).withConfig({componentId:"sc-628648ba-5"})(z()),nn=j.ZP.div.withConfig({componentId:"sc-628648ba-6"})(W(),(function(n){return n.theme.spacing[6]})),en=j.ZP.div.withConfig({componentId:"sc-628648ba-7"})(H());!function(n){n.PEDAGOGICAL_SCENARIO="pedagogical-scenario",n.BRIEF="brief"}(Y||(Y={}));var tn="professionalSituationCreate",rn="professionalSituationEdit",on="briefIsUnderEdition",an=function(n){return(null!==n&&void 0!==n?n:[]).filter((function(n){return!!n}))},sn=function(n){var e=an(null===n||void 0===n?void 0:n[i.CREATOR_TYPE]),t=an(null===n||void 0===n?void 0:n[i.FRAMEWORKS]),r=an(null===n||void 0===n?void 0:n[i.LANGUAGES]),o=e.includes("me");return{frameworks:t,languages:r,createdByConnectedUser:o===e.includes("others")?void 0:o}},cn={},un=(0,j.ZP)((function(n){var e,t,c,d,v,j=n.onProfessionalSituationSelect,T=n.className,B=n.briefSkills,L=n.briefLanguage,_=n.briefId,M=n.isEdit,F=n.professionalSituationId,G=n.onNextCLick,U=n.showCreateBriefButton,z=void 0===U||U,W=n.showPlaceBriefButton,H=void 0===W||W,V=n.context,rn=void 0===V?Y.BRIEF:V,an=(0,s.Z)((0,m.$)(),1)[0],un=(0,Z.OT)().activeClassroom,ln=(0,I.d$)(),dn=(0,w.tv)(),fn=(0,g.Z)(),hn=Y.BRIEF,pn=Y.PEDAGOGICAL_SCENARIO,mn=(0,h.useState)(1),vn=mn[0],gn=mn[1],xn=(0,s.Z)((0,y.W_)("search",""),2),bn=xn[0],Sn=xn[1],jn=(0,h.useState)(cn),Zn=jn[0],Pn=jn[1],Cn=(0,h.useState)("desc"),In=Cn[0],yn=Cn[1],wn=(0,s.Z)((0,y.W_)("selectedProfessionalSituation",(null===(e=dn.state)||void 0===e||null===(t=e[on])||void 0===t?void 0:t.professionalSituationId)||(null===(c=dn.state)||void 0===c||null===(d=c[tn])||void 0===d?void 0:d.professionalSituationId)||F),2),En=wn[0],kn=wn[1],An=(0,h.useState)(bn),Rn=An[0],On=An[1],Tn=(null!==(v=(0,p.Gc)())&&void 0!==v?v:{}).handleSubmit;(0,h.useEffect)((function(){gn(1)}),[bn,Zn]);var Bn,Ln=function(n,e){var t=(0,s.Z)((0,m.$)(void 0,{keyPrefix:"component.AddProfessionalSituationView.filters"}),1)[0];return(0,h.useMemo)((function(){return n.map((function(n){var e=n.viewFilter,i=(0,R.Z)(n,["viewFilter"]);return D(e,(0,o.Z)({t:t},i))}))}),[t].concat((0,O.Z)(e)))}([{viewFilter:i.FRAMEWORKS},{viewFilter:i.LANGUAGES},{viewFilter:i.CREATOR_TYPE,pinned:!0}],[]),Dn=(0,E.wL)({filters:(0,a.Z)((0,o.Z)({},sn(Zn)),{title:bn.trim()?bn:void 0,compatibleClassroom:rn===pn?un:void 0}),pagination:{perPage:8,page:vn},orderBy:"createdAt",order:In}),Nn=Dn.data,_n=Dn.isLoading,Mn=Dn.refetch,Fn=Dn.isFetching;(0,h.useEffect)((function(){var n;null===fn||void 0===fn||null===(n=fn.scrollTo)||void 0===n||n.call(fn,{behavior:"smooth",top:0})}),[]);var Gn=Math.ceil((null!==(Bn=null===Nn||void 0===Nn?void 0:Nn["hydra:totalItems"])&&void 0!==Bn?Bn:0)/8),Un=function(){Mn(),ln({level:I._j.SUCCESS,message:an("component.AddProfessionalSituationView.deleteProfessionalSituationSuccess")})};return(0,u.jsxs)("div",{className:T,children:[(0,u.jsx)(A.Z,{searchFieldId:"search",onSubmit:function(){return Sn(Rn)},onReset:function(){Sn(""),On("")},label:an("component.shared.ProfessionalSituationPicker.filters.title.label"),value:Rn,onChange:On,srOnly:an("component.shared.ProfessionalSituationPicker.filters.title.srOnly"),variant:"secondary"}),(0,u.jsxs)(en,{children:[(0,u.jsx)(P.S6,{value:Zn,onChange:Pn,filters:Ln}),(0,u.jsxs)(Q,{onClick:function(){return yn("desc"===In?"asc":"desc")},children:[(0,u.jsx)(x.xv,{variant:"label",children:an("component.shared.ProfessionalSituationPicker.date")}),(0,u.jsx)(C.KM,{direction:"desc"===In?"down":"up"})]})]}),(0,u.jsxs)(K,{children:[(0,u.jsx)(x.xv,{variant:"label",children:an("component.shared.ProfessionalSituationPicker.title")}),(0,u.jsxs)($,{children:[an("component.shared.ProfessionalSituationPicker.subtitle")," "]}),(0,u.jsxs)(k.zx,{onClick:function(){return dn.push({route:w.AW.PROFESSIONAL_SITUATION_CREATE,state:(0,r.Z)({},tn,{isEdit:M,briefLanguage:L,briefSkills:B,briefId:_,context:rn})})},filled:!0,variant:"primary",as:"a",tabIndex:0,children:[an("component.shared.ProfessionalSituationPicker.cta")," ",(0,u.jsx)(C.v3,{})]})]}),_n||Fn?(0,u.jsx)(J,{}):rn===hn?(0,u.jsx)("form",{onSubmit:Tn((function(n){var e=n["professional-situation"];j(e)})),children:(0,u.jsx)(p.Qr,{name:"professional-situation",defaultValue:"",render:function(n){var e=n.field,t=e.value,i=e.onChange;return(0,u.jsx)(q,{children:(0,u.jsx)(l.s,{children:null===Nn||void 0===Nn?void 0:Nn["hydra:member"].map((function(n){var e=n["@id"],r=(null===t||void 0===t?void 0:t["@id"])===e;return(0,u.jsx)("li",{children:(0,u.jsx)(N.Z,{professionalSituation:n,onSelect:i,onCreateBriefClick:function(n){return i(n)},onDelete:Un,isSelected:r,briefSkills:B,briefLanguage:L,isEdit:M,showCreateBriefButton:z,showPlaceBriefButton:H,context:rn})},e)}))})})}})}):(0,u.jsx)(q,{children:(0,u.jsx)(l.s,{children:null===Nn||void 0===Nn?void 0:Nn["hydra:member"].map((function(n){var e=n["@id"],t=En===e;return(0,u.jsx)("li",{children:(0,u.jsx)(N.Z,{professionalSituation:n,onSelect:function(n){return kn(n["@id"])},isSelected:t,briefSkills:B,briefLanguage:L,isEdit:M,showCreateBriefButton:z,showPlaceBriefButton:H,onDelete:Un,context:rn})},n["@id"])}))})}),Gn>1&&(0,u.jsx)(b.Z,{current:vn,onChange:gn,total:Gn,pager:function(n){return(0,u.jsx)(S.Z,(0,o.Z)({},n))}}),(0,u.jsxs)(nn,{children:[!M&&(0,u.jsx)(f(),{href:w.AW.HOME,passHref:!0,children:(0,u.jsxs)(X,{as:"a",variant:"primary",children:[(0,u.jsx)(C.Eh,{direction:"left"}),an("component.shared.ProfessionalSituationPicker.previousStep")]})}),M&&hn&&(0,u.jsxs)(k.zx,{type:"button",filled:!0,variant:"primary",onClick:G,children:[an("component.shared.AddBriefSkillLevelsView.nextStep"),(0,u.jsx)(C.Eh,{direction:"right"})]})]})]})})).withConfig({componentId:"sc-628648ba-8"})(V(),(function(n){return n.theme.spacing[5]}))}}]);
//# sourceMappingURL=6516-5756fd05a17035f5.js.map