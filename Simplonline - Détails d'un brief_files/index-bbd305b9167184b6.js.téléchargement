(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405,5592],{48312:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(19025)}])},9116:function(n,e,t){"use strict";t.d(e,{Z:function(){return r.ZP}});var r=t(3850)},33704:function(n,e,t){"use strict";var r=t(99534),i=t(10253),o=t(7297),a=t(67294),s=t(26793),c=t(73324);function u(){var n=(0,o.Z)(["\n    color: ",";\n"]);return u=function(){return n},n}var l={invited:{name:"admin.users.input.selectStatus.invited",color:"#2196F3"},inactive:{name:"admin.users.input.selectStatus.inactive",color:"#F44336"},active:{name:"admin.users.input.selectStatus.active",color:"#4CAF50"}};e.Z=(0,c.ZP)((function(n){var e=n.component,t=void 0===e?"span":e,o=n.status,c=(0,r.Z)(n,["component","status"]),u=(0,i.Z)((0,s.$)(),1)[0];return a.createElement(t,c,u(l[o].name))})).withConfig({componentId:"sc-aa014362-0"})(u(),(function(n){var e=n.status;return l[e].color}))},95592:function(n,e,t){"use strict";t.d(e,{F:function(){return fn},Z:function(){return mn}});var r=t(47568),i=t(26042),o=t(69396),a=t(10253),s=t(34051),c=t.n(s),u=t(85893),l=t(9041),d=t(35893),f=t(1469),m=t.n(f),p=t(67294),h=t(26793),g=t(64508),v=t(81751),x=t(47533),b=t(35369),Z=t(96486),C=t(11163),j=t(87536),y=t(34765),S=t(24143),w=t(27854),D=t(17721),I=function(n){return n?n.charAt(0).toLowerCase()+n.slice(1):""},E={"professional-situation":void 0,skills:{skillLevels:[]},description:{context:l.EditorState.createEmpty(),description:"",evaluationModalities:"",expectedWork:"",pedagogicModalities:l.EditorState.createEmpty(),performanceCriteria:"",title:""},"additional-information":{resources:[],tags:[],image:void 0}},P=function(n){var e=n.isEdit,t=n.currentStep,r=n.onStepChange,s=n.defaultValues,c=n.children,f=(0,a.Z)((0,h.$)(),1)[0],m=(0,p.useState)(E),g=m[0],v=m[1],P=(0,C.useRouter)().query,k=S.Qb.SKILLS,L=S.Qb.DESCRIPTION,R=S.Qb.ADDITIONAL_INFORMATION,T=S.Qb.SUMMARY,A=S.Qb.PROFESSIONAL_SITUATION,O=(0,Z.isArray)(P.id)?P.id[0]:P.id,N=y.yB.BRIEF,M=(0,p.useMemo)((function(){var n,t,a,s,c,l;return(0,b.zN)({"professional-situation":{subtitle:f("component.CreateBriefLayout.steps.professionalSituation.subtitle"),index:1,form:(0,u.jsx)(y.ZP,{onProfessionalSituationSelect:function(n){v((0,o.Z)((0,i.Z)({},g),{"professional-situation":n})),r(k)},briefSkills:g.skills.skillLevels.map((function(n){return n.skillId})),briefLanguage:null===(n=g.description.language)||void 0===n?void 0:n["@id"],briefId:O,isEdit:e,professionalSituationId:null===(t=g[A])||void 0===t?void 0:t["@id"],onNextCLick:function(){return r(k)},context:N,showPlaceBriefButton:!1})},skills:{subtitle:f("component.CreateBriefLayout.steps.skills.subtitle"),index:2,skeleton:(0,u.jsx)(w.iN,{professionalSituationId:null===(a=g[A])||void 0===a?void 0:a["@id"],briefSkills:g.skills.skillLevels.map((function(n){return n.skillId})),onBackClick:function(){return r(A)},onStepSubmit:function(n){v((0,o.Z)((0,i.Z)({},g),{skills:{skillLevels:n}})),r(L)},isLoading:!0,isReadOnly:null===(s=g.description)||void 0===s?void 0:s.isCorrected,isEdit:e}),form:(0,u.jsx)(w.iN,{professionalSituationId:null===(c=g[A])||void 0===c?void 0:c["@id"],briefSkills:g.skills.skillLevels.map((function(n){return n.skillId})),onBackClick:function(){return r(A)},onStepSubmit:function(n){v((0,o.Z)((0,i.Z)({},g),{skills:{skillLevels:n}})),r(L)},isLoading:!1,isReadOnly:null===(l=g.description)||void 0===l?void 0:l.isCorrected,isEdit:e})},description:{subtitle:f("component.CreateBriefLayout.steps.description.subtitle"),index:3,form:(0,u.jsx)(w.Rr,{onBackClick:function(){return r(k)},onStepSubmit:function(n){v((0,o.Z)((0,i.Z)({},g),{description:n})),r(R)}})},"additional-information":{subtitle:f("component.CreateBriefLayout.steps.additionalInformation.subtitle"),index:4,form:(0,u.jsx)(w.C3,{onBackClick:function(){return r(L)},onStepSubmit:function(n){v((0,o.Z)((0,i.Z)({},g),{"additional-information":n})),r(T)}})}})}),[g,f]),B=M.get(t),_=M.map((function(n,e){return(0,j.cI)({resolver:(0,x.X)((0,D.i1)(f)[e]),defaultValues:E[e],shouldUnregister:!1,mode:"onSubmit"})})).toObject();(0,p.useEffect)((function(){s&&(v(s),_[A].reset(s[A]),_[k].reset(s.skills),_[L].reset(s.description),_[R].reset(s[R]))}),[s]);var z=g[A];(0,p.useEffect)((function(){var n=E[L].context;if(null===s||void 0===s?void 0:s.description)_[L].reset(s.description);else if(z&&!n.getCurrentContent().hasText()){var e=f("component.AddBriefDescriptionForm.defaultContext",{targetedDomain:I(z.targetedDomain),description:I(z.description)});_[L].reset({context:l.EditorState.createWithContent((0,d.d)(e))})}}),[z]);var F=(0,Z.isEqual)(g[R],E[R])?"disabled":"completed",U=t===R?"current":F,G=(0,o.Z)((0,i.Z)({},(0,D.i4)(g,t,f)),{"additional-information":U});return(0,u.jsx)(j.RV,(0,o.Z)((0,i.Z)({},_[t]),{children:c({currentStepData:B,stepStatuses:G,formValues:g,forms:_})}))},k=t(96373),L=t(91640),R=t(50290),T=function(n){var e=n.defaultStep,t=n.children,r=(0,a.Z)((0,R.W_)("step",e),2),i=r[0],o=r[1],s=(0,L.Z)();return(0,p.useEffect)((function(){null===s||void 0===s||s.scrollTo({top:0})}),[i]),(0,u.jsx)(u.Fragment,{children:t({currentStep:i,setCurrentStep:o})})},A=t(64285),O=t(602),N=t(8773),M=t(23581),B=t(82383),_=t(59689),z=function(n){return function(e){var t=e.payload,r=e.briefId;return n.put("briefs/".concat(r),t)}},F=t(4874),U=t(44908),G=t.n(U),V=t(9116),H=t(98547),W=t(48380),$=t(7297),K=t(76922),Y=t(73324),Q=t(35019),X=t(37264);function q(){var n=(0,$.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: ",";\n"]);return q=function(){return n},n}function J(){var n=(0,$.Z)(["\n    display: flex;\n    gap: ",";\n    margin-left: auto;\n"]);return J=function(){return n},n}function nn(){var n=(0,$.Z)(["\n    display: flex;\n    gap: ",";\n    justify-content: space-between;\n"]);return nn=function(){return n},n}function en(){var n=(0,$.Z)(["\n    "," {\n        margin-top: ",";\n    }\n"]);return en=function(){return n},n}var tn=Y.ZP.div.withConfig({componentId:"sc-53fe243d-0"})(q(),(function(n){return n.theme.spacing[4]})),rn=Y.ZP.div.withConfig({componentId:"sc-53fe243d-1"})(J(),(function(n){return n.theme.spacing[5]})),on=Y.ZP.div.withConfig({componentId:"sc-53fe243d-2"})(nn(),(function(n){return n.theme.spacing[5]})),an=(0,Y.ZP)((function(n){var e=n.onBriefSave,t=n.onDraftSave,r=n.onBackClick,i=n.children,o=n.className,s=n.isDraftButtonLoading,c=n.isSaveButtonLoading,l=n.briefStatus,d=n.isEdit,f=n.isCorrectedBriefSaveable,m=(0,a.Z)((0,h.$)(),1)[0],p=S.Dt.VALIDATED,g=l===S.Dt.DRAFT||!d,v=l===p&&!f;return(0,u.jsxs)("div",{className:o,children:[(0,u.jsxs)(tn,{children:[(0,u.jsx)(K.xv,{as:"h1",variant:"h2",children:m("component.CreateBriefSummaryLayout.title")}),(0,u.jsxs)(rn,{children:[g&&(0,u.jsxs)(X.zx,{outlined:!0,variant:"success",onClick:t,loading:s,children:[m("component.CreateBriefSummaryLayout.saveAsDraft"),s?(0,u.jsx)(Q.gb,{}):(0,u.jsx)(Q.vc,{})]}),(0,u.jsxs)(X.zx,{filled:!0,variant:"primary",onClick:e,loading:c,children:[m("component.CreateBriefSummaryLayout.".concat(v?"register":"save")),c?(0,u.jsx)(Q.gb,{}):(0,u.jsx)(Q.Jr,{})]})]})]}),i,(0,u.jsx)(X.rj,{children:(0,u.jsxs)(X.C4,{as:on,col:8,children:[(0,u.jsxs)(X.zx,{outlined:!0,variant:"primary",type:"button",onClick:r,children:[(0,u.jsx)(Q.Eh,{direction:"left"}),m("component.CreateBriefSummaryLayout.previousStep")]}),(0,u.jsxs)(rn,{children:[g&&(0,u.jsxs)(X.zx,{outlined:!0,variant:"success",onClick:t,children:[m("component.CreateBriefSummaryLayout.saveAsDraft"),(0,u.jsx)(Q.vc,{})]}),(0,u.jsxs)(X.zx,{filled:!0,variant:"primary",onClick:e,loading:c,children:[m("component.CreateBriefSummaryLayout.".concat(v?"register":"save")),c?(0,u.jsx)(Q.gb,{}):(0,u.jsx)(Q.Jr,{})]})]})]})})]})})).withConfig({componentId:"sc-53fe243d-3"})(en(),on,(function(n){return n.theme.spacing[5]})),sn=function(n){var e,t,r,s,c,l=n.values,d=n.onBackClick,f=n.isEdit,x=n.briefStatus,b=n.onSaveDraft,j=n.isLoading,y=n.isBriefLoading,w=n.defaultValues,D=(0,W.z)().user,I=(0,C.useRouter)(),E=I.push,P=I.query,k=(0,a.Z)((0,h.$)(),1)[0],L=(0,M.d$)(),R=m()(P.id)?P.id[0]:P.id,T=(0,p.useState)(void 0),A=T[0],U=T[1],$=G()((null===(e=l["professional-situation"])||void 0===e?void 0:e.skills.map((function(n){return(0,_.sR)(n)})))||[]),K=(0,_.GR)({filters:{skills:$}}).data,Y=function(n,e){L({level:n,message:k(e)})},Q=null===w||void 0===w||null===(t=w["professional-situation"])||void 0===t?void 0:t["@id"],X=(null===w||void 0===w?void 0:w.skills.skillLevels)||[],q=null===(r=l["professional-situation"])||void 0===r?void 0:r["@id"],J=l.skills.skillLevels,nn=l.description.isCorrected,en=Q===q&&(0,Z.isEqual)(X,J)&&!0===nn,tn=(0,_._U)({onSuccess:function(n){var e=n.data["@id"];return Y(M._j.SUCCESS,"component.CreateBriefLayout.create.validated"),E(B.AW.BRIEFS_DETAILS,e)},onError:function(n){return U(n.response)}}),rn=tn.createBrief,on=tn.isLoading,sn=function(n){var e=(0,O.Z)(),t=(0,p.useMemo)((function(){return z(e)}),[e]),r=(0,a.Z)((0,g.Db)(t,n),2),i=r[0],o=r[1];return{updateBrief:i,isSuccess:o.isSuccess,error:o.error,reset:o.reset,isLoading:o.isLoading}}({onSuccess:function(n){var e=n.data["@id"];return Y(M._j.SUCCESS,"component.CreateBriefLayout.update.success"),E(B.AW.BRIEFS_DETAILS,e)},onError:function(n){return U(n.response)}}),cn=sn.updateBrief,un=sn.isLoading,ln=(0,o.Z)((0,i.Z)({},l.description),{context:(0,v.a)(l.description.context),pedagogicModalities:(0,v.a)(l.description.pedagogicModalities),frameworks:null===K||void 0===K?void 0:K["hydra:member"],image:l["additional-information"].image,status:x,tags:l["additional-information"].tags,language:null===(s=l["professional-situation"])||void 0===s?void 0:s.language,createdAt:(new Date).toDateString(),createdBy:D,skills:(c=l.skills.skillLevels,c.map((function(n){var e=n.skill,t=n.skillId,r=n.level;return{skillId:t,title:e,levels:[1,2,3].map((function(n){return{id:"".concat(t,"_level-").concat(n),level:n,status:r>=n?H.e.VALIDATED:H.e.NOT_EVALUATED}}))}}))),media:l["additional-information"].resources,professionalSituation:l["professional-situation"]});return(0,u.jsxs)(an,{onBackClick:d,onBriefSave:function(){return function(n){var e,t,r=(0,o.Z)((0,i.Z)({},ln),{professionalSituation:null===(e=ln.professionalSituation)||void 0===e?void 0:e["@id"],tags:l["additional-information"].tags.map((function(n){return n["@id"]})),media:l["additional-information"].resources.map((function(n){return n["@id"]})),image:null===(t=l["additional-information"].image)||void 0===t?void 0:t["@id"],status:n,skillLevels:l.skills.skillLevels.map((function(n){return n["@id"]})),uuid:(0,N.Z)()});n===S.Dt.VALIDATED&&f?cn({payload:r,briefId:R}):rn(r)}(S.Dt.VALIDATED)},onDraftSave:b,isDraftButtonLoading:j,isSaveButtonLoading:on||un,briefStatus:ln.status,isEdit:f,isCorrectedBriefSaveable:en,children:[(0,u.jsx)(V.Z,(0,o.Z)((0,i.Z)({},ln),{status:S.Dt.VALIDATED,isLoading:y})),(0,u.jsx)(F.Z,{error:A,dissmiss:function(){return U(void 0)}})]})},cn=t(82670);function un(){var n=(0,$.Z)(["\n    margin: "," auto 0 auto;\n"]);return un=function(){return n},n}var ln=(0,Y.ZP)(X.zx).withConfig({componentId:"sc-4ae137c9-0"})(un(),(function(n){return n.theme.spacing[7]})),dn=function(n){var e=n.isLoading,t=n.currentStep,r=n.isEdit,i=n.onClick,o=n.forms,s=(0,a.Z)((0,h.$)(),1)[0],c=o.description,l=o.skills,d=S.Qb.DESCRIPTION,f=S.Qb.ADDITIONAL_INFORMATION,m=(0,j.qo)({name:"skillLevels",control:l.control}),p=!!(0,j.qo)({name:"title",control:c.control}),g=(0,cn.Z)(m,Array)&&m.length>0,v=Object.keys(o).filter((function(n){return o[n].formState.isDirty})).length>0&&p&&g;return r||t===d||t===f?(0,u.jsxs)(ln,{outlined:!0,variant:"success",type:"button","aria-label":s("component.CreateBriefLayout.draft.a11y"),disabled:!v,onClick:i,loading:e,children:[s("component.CreateBriefLayout.draft.label"),e?(0,u.jsx)(Q.gb,{}):(0,u.jsx)(Q.vc,{})]}):null},fn="briefCreate",mn=function(){var n,e,t,s,f,x=(0,a.Z)((0,h.$)(),1)[0],b=(0,O.Z)(),Z=(0,B.tv)(),C=(0,B.tv)(),j=C.route,w=C.query,I=S.Qb.PROFESSIONAL_SITUATION,E=S.Qb.DESCRIPTION,L=S.Qb.SKILLS,U=S.Qb.SUMMARY,G=S.Qb.ADDITIONAL_INFORMATION,V=(0,p.useMemo)((function(){return j===B.AW.BRIEFS_EDIT}),[j]),H=m()(w.id)?w.id[0]:w.id,W=(0,_.bV)({brief:H,enabled:!!H,refetchOnMount:!1}),$=W.data,K=W.isLoading,Y=(null!==(s=(null===(n=Z.state)||void 0===n?void 0:n[y.DD])||(null===(e=Z.state)||void 0===e?void 0:e[fn]))&&void 0!==s?s:{}).step,Q=(null!==(f=null===(t=Z.state)||void 0===t?void 0:t[fn])&&void 0!==f?f:{}).professionalSituationId,X=(0,M.d$)(),q=(0,a.Z)((0,R.W_)("step",V&&Y?Y:V?L:Y||I),2),J=q[0],nn=q[1],en=(0,p.useState)(void 0),tn=en[0],rn=en[1],on=(0,_.Yy)({professionalSituation:Q,enabled:!!Q}),an=on.data,cn=on.isLoading,un=(0,p.useCallback)(function(){var n=(0,r.Z)(c().mark((function n(e){var t,r,a,s,u,l,d,f,m,p;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.values,r=e.currentStepValues,a=e.currentStep,u=(0,i.Z)({professionalSituation:null===(s=t["professional-situation"])||void 0===s?void 0:s["@id"]},t.skills,t.description,t["additional-information"],r),!(0,D.Kz)(x,u)){n.next=19;break}if(f=(0,o.Z)((0,i.Z)({},u),{skillLevels:u.skillLevels.map((function(n){return n["@id"]})),context:(0,v.a)(u.context),pedagogicModalities:(0,v.a)(u.pedagogicModalities),tags:u.tags.map((function(n){return n["@id"]})),media:u.resources.map((function(n){return n["@id"]})),image:null===(l=u.image)||void 0===l?void 0:l["@id"],status:null!==(d=null===$||void 0===$?void 0:$.status)&&void 0!==d?d:_.Dt.DRAFT,uuid:(0,N.Z)()}),!V){n.next=14;break}return n.next=11,z(b)({payload:f,briefId:H});case 11:return n.abrupt("return",n.sent);case 14:return n.next=16,(0,_.qD)(b)(f);case 16:m=n.sent,p=(0,_.sR)(m.data),nn(a,{route:B.AW.BRIEFS_EDIT,query:{id:p}});case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[V,b,X,x]),ln=(0,a.Z)((0,g.Db)(un),2),mn=ln[0],pn=ln[1].isLoading,hn=function(){var n=(0,r.Z)(c().mark((function n(e){var t,r,i;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.values,r=e.currentStepValues,i=e.currentStep,n.next=3,mn({values:t,currentStepValues:r,currentStep:i},{onSuccess:function(){X({level:M._j.SUCCESS,message:x(V&&(null===$||void 0===$?void 0:$.status)===_.Dt.DRAFT?"component.CreateBriefLayout.update.success-draft":V&&(null===$||void 0===$?void 0:$.status)===_.Dt.VALIDATED?"component.CreateBriefLayout.update.success":"component.CreateBriefLayout.create.success")})},onError:function(n){return rn(n.response)}});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),gn=(0,p.useMemo)((function(){return function(n){var e,t,r,i,o,a,s;if(n)return{skills:{skillLevels:n.skillLevels.map((function(n){var e=n.skill,t=n["@id"],r=n.level;return{"@id":t,"@type":_.DC.SKILL_LEVEL,code:e.code,level:r,label:"".concat(x("page.briefs.create.skills.level",{skillLevelNumber:r})),skill:e.shortTitle,skillId:e["@id"]}}))},description:{context:l.EditorState.createWithContent((0,d.d)(null!==(e=n.context)&&void 0!==e?e:"")),description:null!==(t=n.description)&&void 0!==t?t:"",evaluationModalities:null!==(r=null===n||void 0===n?void 0:n.evaluationModalities)&&void 0!==r?r:"",expectedWork:null!==(i=n.expectedWork)&&void 0!==i?i:"",pedagogicModalities:l.EditorState.createWithContent((0,d.d)(null!==(o=n.pedagogicModalities)&&void 0!==o?o:"")),performanceCriteria:null!==(a=null===n||void 0===n?void 0:n.performanceCriteria)&&void 0!==a?a:"",title:n.title,isCorrected:n.isCorrected,language:n.language},"additional-information":{resources:n.media,tags:n.tags,image:null!==(s=n.image)&&void 0!==s?s:void 0},"professional-situation":n.professionalSituation}}($)}),[$]),vn=(0,p.useMemo)((function(){return function(){if(an)return{"professional-situation":an,skills:{skillLevels:[]},description:{context:l.EditorState.createWithContent((0,d.d)("".concat(an.targetedDomain," ").concat(an.description))),description:"",evaluationModalities:"",expectedWork:"",pedagogicModalities:l.EditorState.createEmpty(),performanceCriteria:"",title:""},"additional-information":{resources:[],tags:[],image:void 0}}}()}),[an]);return(0,u.jsx)(T,{defaultStep:J,children:function(n){var e=n.currentStep,t=n.setCurrentStep;return(0,u.jsx)(P,{isEdit:V,currentStep:e,onStepChange:t,defaultValues:gn||vn,children:function(n){var r=n.formValues,a=n.stepStatuses,s=n.currentStepData,c=n.forms;return e===U?(0,u.jsx)(sn,{values:r,onBackClick:function(){return t(G)},isEdit:V,briefStatus:null===$||void 0===$?void 0:$.status,isBriefLoading:K,isLoading:pn,defaultValues:gn,onSaveDraft:function(){return hn({values:r,currentStep:e})}}):(0,u.jsx)(k.Z,(0,o.Z)((0,i.Z)({isLoading:K||cn,title:x(V?"component.CreateBriefLayout.title.editBrief":"component.CreateBriefLayout.title.create"),currentStep:e},s),{children:(0,u.jsxs)(A.Z,{isLoading:K||cn,onBackClick:function(){return t(I)},currentStep:e,stepsGroups:[{title:x("component.CreateBriefStepsRecap.professionalSituation"),steps:[{label:x("component.CreateBriefLayout.steps.professionalSituation.label"),order:1,status:a[I]}]},{title:x("component.CreateBriefStepsRecap.brief"),steps:[{label:x("component.CreateBriefLayout.steps.skills.label"),order:2,status:a[L]},{label:x("component.CreateBriefLayout.steps.description.label"),order:3,status:a[E]},{label:x("component.CreateBriefLayout.steps.additionalInformation.label"),order:4,status:a[G]}]}],children:[(0,u.jsx)(dn,{isLoading:pn,currentStep:e,isEdit:V,forms:c,onClick:function(){return hn({values:r,currentStepValues:c[e].getValues(),currentStep:e})}}),(0,u.jsx)(F.Z,{error:tn,dissmiss:function(){return rn(void 0)}})]})}))}})}})}},20697:function(n,e,t){"use strict";var r=t(26042),i=t(69396),o=t(99534),a=t(10253),s=t(7297),c=t(85893),u=t(80129),l=t.n(u),d=t(26793),f=t(84747),m=t(42190),p=t(73324),h=t(35019),g=t(59689),v=t(37264),x=t(58876);function b(){var n=(0,s.Z)([""]);return b=function(){return n},n}e.Z=(0,p.ZP)((function(n){var e=n.learner,t=n.classroom,s=n.children,u=n.download,p=n.variant,b=void 0===p?"primary":p,Z=(0,o.Z)(n,["learner","classroom","children","download","variant"]),C=(0,a.Z)((0,f.Z)(),1)[0],j=(0,m.Z)(),y=(0,a.Z)((0,d.$)(),1)[0];return"primary"===b?(0,c.jsxs)(v.zx,(0,i.Z)((0,r.Z)({as:"a",href:"/api/users/".concat((0,g.sR)(e),"/classrooms/").concat((0,g.sR)(t),"/results?").concat(l().stringify({token:j,locale:C})),download:(0,x.B)(u||y("component.shared.LearnerResultsDownloadButton.filename",{date:new Date,displayName:(0,g.b3)(e)})),small:!0,outlined:!0,variant:"primary"},Z),{children:[s,(0,c.jsx)(h.UW,{})]})):(0,c.jsx)("a",{href:"/api/users/".concat((0,g.sR)(e),"/classrooms/").concat((0,g.sR)(t),"/results?").concat(l().stringify({token:j,locale:C})),download:(0,x.B)(u||y("component.shared.LearnerResultsDownloadButton.filename",{date:new Date,displayName:(0,g.b3)(e)})),children:s})})).withConfig({componentId:"sc-4998cb7e-0"})(b())},98733:function(n,e,t){"use strict";var r=t(26042),i=t(69396),o=t(99534),a=t(10253),s=t(7297),c=t(85893),u=t(1469),l=t.n(u),d=(t(67294),t(26793)),f=t(73324),m=t(52656),p=t(81947),h=t(89911),g=t(52748),v=t(73133),x=t(56714),b=t(34839),Z=t(70750);function C(){var n=(0,s.Z)(["\n    display: flex;\n    align-items: center;\n    padding: ",";\n\n    "," {\n        margin-left: ",";\n    }\n"]);return C=function(){return n},n}function j(){var n=(0,s.Z)(["\n    button& {\n        height: 80px;\n\n        display: flex;\n        align-items: center;\n\n        padding: ",";\n    }\n\n    "," {\n        margin-right: ",";\n        --bg-color: ",";\n        --text-color: ",";\n    }\n\n    ",":not(",") {\n        flex: 1;\n        word-break: break-all;\n    }\n"]);return j=function(){return n},n}function y(){var n=(0,s.Z)(["\n    > "," {\n        list-style: none;\n        align-self: center;\n        justify-self: center;\n    }\n"]);return y=function(){return n},n}var S=f.ZP.div.withConfig({componentId:"sc-6d20042-0"})(C(),(function(n){var e=n.theme;return"".concat(e.spacing[5]," ").concat(e.spacing[6])}),h.Z,(function(n){return n.theme.spacing[6]})),w=(0,f.ZP)((function(n){var e=n.user,t=n.onClick,a=n.selected,s=(0,o.Z)(n,["user","onClick","selected"]);return(0,c.jsxs)(b.Z,(0,i.Z)((0,r.Z)({as:"button",onClick:t,title:(0,p.b)(e)},s),{selected:a,role:"tab","aria-selected":a,children:[(0,c.jsx)(g.Z,{user:e}),(0,c.jsx)(Z.Z,{variant:"label",lines:1,textAlign:"left",as:"span",children:(0,p.b)(e)})]}))})).withConfig({componentId:"sc-6d20042-1"})(j(),(function(n){var e=n.theme;return"0 ".concat(e.spacing[6])}),g.Z,(function(n){return n.theme.spacing[5]}),(function(n){var e=n.theme;return n.selected?e.palette.white.base:e.palette.purple.base}),(function(n){var e=n.theme;return n.selected?e.palette.purple.base:e.palette.white.base}),Z.Z,g.Z);e.Z=(0,f.ZP)((function(n){var e=n.className,t=n.users,r=void 0===t?[]:t,i=n.setSelectedUser,o=n.allowMultipleSelection,s=void 0!==o&&o,u=n.selectedUserId,f=n.isLoading,p=void 0!==f&&f,g=(0,a.Z)((0,d.$)(),1)[0];if(!l()(u)&&s||l()(u)&&!s)throw new Error("An error occured while trying to render UsersList component, allowMultipleSelection props has been used the wrong way");return p?(0,c.jsx)(c.Fragment,{children:new Array(4).fill(null).map((function(n,e){return(0,c.jsxs)(S,{children:[(0,c.jsx)(v.Z,{round:!0,height:40,width:40}),(0,c.jsx)(h.Z,{width:"80%",height:"18px"})]},e)}))}):(0,c.jsx)(x.Z,{as:"div",className:e,role:"tablist",children:r.length>0?r.map((function(n){var e=s&&l()(u)?!!(null===u||void 0===u?void 0:u.find((function(e){return(0,m.s)(n)===e}))):u===(0,m.s)(n);return(0,c.jsx)(w,{user:n,selected:e,onClick:function(){return i(n)}},n["@id"])})):(0,c.jsx)(Z.Z,{as:"li",children:g("component.UsersList.noResult")})})})).withConfig({componentId:"sc-6d20042-2"})(y(),Z.Z)},58876:function(n,e,t){"use strict";t.d(e,{B:function(){return c}});var r=/[\/\?<>\\:\*\|"]/g,i=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,s=/[\. ]+$/,c=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.replace(r,e).replace(i,e).replace(o,e).replace(a,e).replace(s,e)}},32669:function(n,e,t){"use strict";t.d(e,{Z:function(){return p}});var r=t(47568),i=t(29815),o=t(34051),a=t.n(o),s=t(67294),c=t(16517),u=t(8773),l=t(19973),d=t(99222),f=function(n){return n.request.id},m=t(602),p=function(n,e){var t=e||{},o=t.manual,p=void 0!==o&&o,h=t.throwOnError,g=void 0===h||h,v=(0,s.useState)(!(null===e||void 0===e?void 0:e.manual)),x=v[0],b=v[1],Z=(0,s.useState)(),C=Z[0],j=Z[1],y=(0,s.useState)(),S=y[0],w=y[1],D=(0,s.useState)(),I=D[0],E=D[1],P=(0,s.useState)(),k=P[0],L=P[1],R=(0,s.useMemo)((function(){return new Map}),[]),T=(0,m.Z)(),A=(0,c.useSelector)(f),O=(0,s.useCallback)((0,r.Z)(a().mark((function e(){var t,r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,u.Z)(),R.clear(),R.set(t,!0),b(!0),w(t),r=function(n){return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];R.has(t)&&(n.apply(void 0,(0,i.Z)(r)),b(!1))}},o=T.request(n),j(o),o.then(r(E)),o.catch(r(L));case 10:case"end":return e.stop()}}),e)}))),[T,n]);if((0,s.useEffect)((function(){p||O()}),[O,A]),g&&k)throw R.clear(),(null===k||void 0===k?void 0:k.response)?new l.Z(null===k||void 0===k?void 0:k.response):new d.Z(k);return{isPending:x,response:I,error:k,request:C,id:S,fetch:O}}},59946:function(n,e,t){"use strict";var r=t(26042),i=t(69396),o=t(74221),a=t(67294);e.Z=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=(0,a.useState)(t),c=s[0],u=s[1],l=(0,a.useMemo)((function(){return new o.Z(n,(0,i.Z)((0,r.Z)({},e),{threshold:0}))}),[n,e]),d=(0,a.useMemo)((function(){return c?l.search(c).map((function(n){return n.item})):n}),[c,l]);return{search:c,setSearch:u,results:d}}},92139:function(n,e,t){"use strict";t.d(e,{Wb:function(){return s},UK:function(){return p},D9:function(){return b},HF:function(){return x}});var r,i=t(96486),o=t(67294),a=t(64508),s=function(n){var e=(0,o.useState)(!1),t=e[0],r=e[1],s=(0,o.useMemo)((function(){return(0,i.once)((function(){var e=document.getElementById(n);null===e||void 0===e||e.scrollIntoView({behavior:"smooth"}),r(!0)}))}),[n]),c=(0,a.yU)();return(0,o.useLayoutEffect)((function(){if(0===c&&!t){var n=setTimeout((function(){return s()}),250);return function(){return clearTimeout(n)}}}),[c,s]),t},c=function(n){var e=(0,o.useRef)(0),t=(0,o.useState)(n),r=t[0],i=t[1],a=(0,o.useCallback)((function(n){cancelAnimationFrame(e.current),e.current=requestAnimationFrame((function(){i(n)}))}),[]);return(0,o.useEffect)((function(){return function(){cancelAnimationFrame(e.current)}}),[]),[r,a]},u=t(26042),l=t(69396),d=t(29815);!function(n){n[n.REQUEST=0]="REQUEST",n[n.RESPONSE=1]="RESPONSE",n[n.ERROR=2]="ERROR",n[n.RESET=3]="RESET"}(r||(r={}));var f={loading:!1};function m(n,e){switch(e.type){case r.REQUEST:return(0,l.Z)((0,u.Z)({},n),{error:void 0,loading:!0});case r.RESPONSE:return{data:e.payload,loading:!1};case r.ERROR:return{error:e.payload,loading:!1};case r.RESET:return f;default:return n}}var p=function(n,e){var t=(0,o.useReducer)(m,f),i=t[0],a=t[1],s=(0,o.useCallback)((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a({type:r.REQUEST});var o=n.apply(void 0,(0,d.Z)(t));return o.then((function(n){return a({type:r.RESPONSE,payload:n}),n})).catch((function(n){a({type:r.ERROR,payload:n})}))}),e);return[s,i,(0,o.useCallback)((function(){a({type:r.RESET})}),[])]},h=t(10253),g=t(52353),v=t.n(g),x=function(n,e,t){var r=t.offset,i=void 0===r?0:r,a=t.initialState,s=(0,h.Z)(c(a),2),u=s[0],l=s[1];return(0,o.useEffect)((function(){if(n){var t=n,r=function(n){if(null===n||void 0===n?void 0:n.currentTarget){var t=n.currentTarget,r=t.scrollTop,o=t.offsetHeight,a=void 0;null===e||void 0===e||e.forEach((function(n,t){var s=document.getElementById(n);if(s){var c=s.offsetTop+i;if(c>=r&&c<=r+o)if(v()(a))a=t;else{var u=document.getElementById(e[a]);a=u&&u.offsetTop+i<c?a:t}}})),l((function(n){return null!==a&&void 0!==a?a:n}))}};return t.addEventListener("scroll",r,{capture:!0,passive:!0}),function(){t.removeEventListener("scroll",r)}}}),[n,e,i]),u},b=function(n){var e=(0,o.useRef)();return(0,o.useEffect)((function(){e.current=n}),[n]),e.current}},19025:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return _c}});var r=t(10253),i=t(7297),o=t(29815),a=t(85893),s=t(52353),c=t.n(s),u=t(67294),l=t(26793),d=t(41489),f=t(72144),m=t(73324),p=t(48380),h=t(98583),g=t(47316),v=t(82383),x=t(40981),b=t(92139),Z=t(66128),C=t(26042),j=t(69396),y=t(99534),S=t(80129),w=t.n(S),D=t(84747),I=t(42190),E=t(35019),P=t(59689),k=t(37264),L=t(32669),R=t(16457),T=t(58876),A=t(55101),O=t(76922);function N(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n"]);return N=function(){return n},n}function M(){var n=(0,i.Z)(["\n    color: ",";\n    margin-left: ",";\n"]);return M=function(){return n},n}function B(){var n=(0,i.Z)(["\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n"]);return B=function(){return n},n}function _(){var n=(0,i.Z)(["\n    border: ",";\n    border-radius: ",";\n    background-color: ",";\n    padding: ",";\n    height: 100%;\n    width: 100%;\n\n    > "," {\n        margin-bottom: ",";\n    }\n"]);return _=function(){return n},n}var z=m.ZP.div.withConfig({componentId:"sc-21058d8c-0"})(N()),F=(0,m.ZP)(O.xv).attrs({variant:"subheading"}).withConfig({componentId:"sc-21058d8c-1"})(M(),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.spacing[4]})),U=m.ZP.div.withConfig({componentId:"sc-21058d8c-2"})(B()),G=(0,m.ZP)((function(n){var e=n.title,t=n.rightText,r=n.children,i=n.className;return(0,a.jsxs)("div",{className:i,children:[(0,a.jsxs)(z,{children:[(0,a.jsx)(O.xv,{as:"h2",variant:"label",children:e}),t&&(0,a.jsx)(F,{children:t})]}),(0,a.jsx)(U,{children:r})]})})).withConfig({componentId:"sc-21058d8c-3"})(_(),(function(n){var e=n.outlined,t=n.theme;return e&&"1px solid ".concat(t.palette.grey.lightest)}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.spacing[5]}),z,(function(n){return n.theme.spacing[6]}));function V(){var n=(0,i.Z)(["\n    background-color: ",";\n    border-radius: ",";\n    padding: ",";\n    z-index: ",";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: flex;\n    flex-direction: column;\n\n    ",";\n\n    "," {\n        color: ",";\n\n        & + "," {\n            margin-top: ",";\n            flex: 1;\n            overflow: auto;\n            min-height: 0;\n        }\n    }\n"]);return V=function(){return n},n}function H(){var n=(0,i.Z)(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n\n    > div {\n        height: 100%;\n        width: 100%;\n        overflow: ",";\n    }\n"]);return H=function(){return n},n}var W=m.ZP.div.withConfig({componentId:"sc-a3eee801-0"})(V(),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.zIndex.overlay}),(function(n){return n.visible?{opacity:1,visibility:"visible"}:{opacity:0,visibility:"hidden"}}),O.xv,(function(n){return n.theme.palette.white.base}),O.xv,(function(n){return n.theme.spacing[6]})),$=(0,m.ZP)((function(n){var e=n.className,t=n.title,r=n.content,i=n.visible,o=n.children;return(0,a.jsxs)("div",{className:e,children:[(0,a.jsxs)(W,{visible:i,children:[(0,a.jsx)(O.xv,{variant:"label",as:"h2",children:t}),(0,a.jsx)(O.xv,{preserve:!0,children:r})]}),(0,a.jsx)("div",{"aria-hidden":i,children:o})]})})).withConfig({componentId:"sc-a3eee801-1"})(H(),(function(n){return n.visible?"hidden":"initial"})),K=t(95774),Y=t(83824),Q=t(91640),X=t(99831);function q(){var n=(0,i.Z)(["\n    width: 180px;\n    height: 180px;\n    transform: rotateY(180deg);\n\n    .CircularProgressbar-path {\n        stroke: ",";\n    }\n    .CircularProgressbar-trail {\n        stroke: ",";\n    }\n"]);return q=function(){return n},n}function J(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]);return J=function(){return n},n}function nn(){var n=(0,i.Z)(["\n    color: ",";\n    margin-bottom: 0;\n"]);return nn=function(){return n},n}function en(){var n=(0,i.Z)(["\n    color: ",";\n    margin-bottom: 0;\n"]);return en=function(){return n},n}var tn,rn=(0,m.ZP)(K.Wo).withConfig({componentId:"sc-db37738c-0"})(q(),(function(n){var e=n.theme,t=n.color;return e.palette[t||tn.GREEN].base}),(function(n){return n.theme.palette.grey.lightest})),on=m.ZP.div.withConfig({componentId:"sc-db37738c-1"})(J()),an=(0,m.ZP)(O.xv).attrs({variant:"h2"}).withConfig({componentId:"sc-db37738c-2"})(nn(),(function(n){return n.theme.palette.blue.base})),sn=(0,m.ZP)(O.xv).attrs({variant:"subheading"}).withConfig({componentId:"sc-db37738c-3"})(en(),(function(n){return n.theme.palette.grey.light}));!function(n){n.GREEN="green",n.YELLOW="yellow"}(tn||(tn={}));var cn=function(n){var e=n.value,t=void 0===e?0:e,i=n.total,o=void 0===i?0:i,s=n.color,c=void 0===s?tn.GREEN:s,d=n.srOnlyLabel,f=n.showDetails,m=(0,r.Z)((0,l.$)(),1)[0],p=(0,u.useState)(!0),h=p[0],g=p[1],v=o>0?Math.round(100*t/o):0,x=(0,Q.Z)();return(0,a.jsx)(Y.h,{scrollableAncestor:x,onEnter:h?function(){return g(!1)}:void 0,children:(0,a.jsx)("div",{children:(0,a.jsx)(rn,{value:h?0:v,color:c,strokeWidth:7,children:(0,a.jsxs)(on,{title:d,children:[(0,a.jsxs)(an,{children:[v,"%"]}),f&&(0,a.jsx)(sn,{children:m("component.MetricsCircularProgressbar.sublabel",{value:t,total:o})}),d&&(0,a.jsx)(X.Z,{children:d})]})})})})},un=t(17857),ln=function(n){var e=n.className;return(0,a.jsxs)("svg",{width:"130",height:"180",viewBox:"0 0 130 180",fill:"none",className:e,children:[(0,a.jsx)("path",{d:"M0 5.06666C0 2.26842 2.26842 0 5.06667 0H92.3684L107.763 18.609L130 43.985V174.933C130 177.732 127.732 180 124.933 180H5.06666C2.26842 180 0 177.732 0 174.933V5.06666Z",fill:"#F0F0F0"}),(0,a.jsx)("path",{d:"M92.3687 0L111.184 21.9925L130 43.985H94.2687C93.2193 43.985 92.3687 43.1343 92.3687 42.085V0Z",fill:"#C4C4C4"})]})};function dn(){var n=(0,i.Z)(["\n    position: absolute;\n    bottom: 12px;\n"]);return dn=function(){return n},n}function fn(){var n=(0,i.Z)(["\n    text-align: center;\n    font-weight: 900;\n    line-height: 48px;\n    font-size: ",";\n    color: ",";\n"]);return fn=function(){return n},n}function mn(){var n=(0,i.Z)(["\n    display: block;\n    width: 114px;\n    height: 2px;\n    background: ",";\n    border-radius: 4px; // Not in the theme\n"]);return mn=function(){return n},n}function pn(){var n=(0,i.Z)(["\n    color: ",";\n    text-align: center;\n"]);return pn=function(){return n},n}function hn(){var n=(0,i.Z)(["\n    text-align: center;\n    font-weight: 900;\n    line-height: 48px;\n    font-size: 40px;\n    color: ",";\n"]);return hn=function(){return n},n}function gn(){var n=(0,i.Z)(["\n    width: 180px;\n    height: 180px;\n    position: relative;\n    display: flex;\n    justify-content: center;\n"]);return gn=function(){return n},n}var vn=m.ZP.div.withConfig({componentId:"sc-8a5666c0-0"})(dn()),xn=(0,m.ZP)(O.xv).attrs({"aria-hidden":!0}).withConfig({componentId:"sc-8a5666c0-1"})(fn(),(function(n){return n.isBigNumber?"50px":"60px"}),(function(n){return n.theme.palette.blue.base})),bn=m.ZP.div.withConfig({componentId:"sc-8a5666c0-2"})(mn(),(function(n){return n.theme.palette.grey.base})),Zn=(0,m.ZP)(O.xv).attrs({variant:"subheading","aria-hidden":!0}).withConfig({componentId:"sc-8a5666c0-3"})(pn(),(function(n){return n.theme.palette.grey.base})),Cn=(0,m.ZP)(O.xv).attrs({"aria-hidden":!0}).withConfig({componentId:"sc-8a5666c0-4"})(hn(),(function(n){return n.theme.palette.grey.base})),jn=(0,m.ZP)((function(n){var e=n.value,t=void 0===e?0:e,i=n.total,o=void 0===i?100:i,s=n.className,c=n.srOnlyLabel,d=(0,r.Z)((0,l.$)(),1)[0],f=(0,u.useState)(!0),m=f[0],p=f[1],h=(0,Q.Z)();return(0,a.jsx)(Y.h,{scrollableAncestor:h,onEnter:m?function(){return p(!1)}:void 0,children:(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)(ln,{}),(0,a.jsxs)(vn,{"aria-label":c,children:[(0,a.jsx)(xn,{isBigNumber:t>999,children:(0,a.jsx)(un.ZP,{end:m?0:t,duration:1.25})}),(0,a.jsx)(bn,{}),(0,a.jsx)(Cn,{children:o}),(0,a.jsx)(Zn,{children:d("component.WorksMetrics.label")})]})]})})})).withConfig({componentId:"sc-8a5666c0-5"})(gn());function yn(){var n=(0,i.Z)(["\n    min-height: 280px;\n"]);return yn=function(){return n},n}function Sn(){var n=(0,i.Z)(["\n    display: grid;\n    grid-template-columns: repeat(4, 256px);\n    grid-gap: "," ",";\n"]);return Sn=function(){return n},n}var wn,Dn=(0,m.ZP)(A.OG).withConfig({componentId:"sc-b9ded369-0"})(yn());!function(n){n.PROGRESS_PERCENT="classroomProgression",n.SUCCESS_RATE="classroomSuccess",n.WORKS_NUMBER="learnerWorks",n.LEARNER_SUCCESS_RATE="learnerSuccess"}(wn||(wn={}));var In=(0,m.ZP)((function(n){var e=n.className,t=n.showHelper,i=n.isLoading,o=n.metrics,s=(0,r.Z)((0,l.$)(),1)[0],c=(0,u.useCallback)((function(n){var e=n.showDetails,t=n.metricsName,r=n.color,i=n.component,c="component.LearnerClassroomMetrics.".concat(t),u=o&&o[t]||{total:0,number:0},l=u.total,d=u.number;return{gridArea:t,title:s("".concat(c,".title")),content:s("".concat(c,".helper")),children:(0,a.jsx)(G,{title:s("".concat(c,".title")),outlined:!0,children:(0,a.jsx)(i,{value:d,total:l,srOnlyLabel:e&&s("".concat(c,".a11y"),{total:l,value:d}),color:r,showDetails:e})})}}),[o,s]),d=(0,u.useMemo)((function(){return[c({metricsName:wn.PROGRESS_PERCENT,color:tn.YELLOW,component:cn}),c({metricsName:wn.SUCCESS_RATE,component:cn}),c({showDetails:!0,metricsName:wn.LEARNER_SUCCESS_RATE,component:cn}),c({showDetails:!0,metricsName:wn.WORKS_NUMBER,component:jn})]}),[c]);return i?(0,a.jsx)("div",{className:e,children:d.map((function(n){var e=n.title;return(0,a.jsx)(Dn,{},e)}))}):(0,a.jsx)("div",{className:e,children:d.map((function(n){return(0,a.jsx)($,{title:n.title,content:n.content,visible:t,children:n.children},n.title)}))})})).withConfig({componentId:"sc-b9ded369-1"})(Sn(),(function(n){return n.theme.spacing[9]}),(function(n){return n.theme.spacing[5]})),En=t(42298),Pn=t(49474),kn=t(4564),Ln=t(34941),Rn=t(1057),Tn=t(3629),An=t(52748),On=t(1001);function Nn(){var n=(0,i.Z)(["\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ",";\n    height: 500px;\n    border-radius: ",";\n"]);return Nn=function(){return n},n}function Mn(){var n=(0,i.Z)(["\n    color: ",";\n\n    "," {\n        font-weight: 700;\n    }\n"]);return Mn=function(){return n},n}function Bn(){var n=(0,i.Z)(["\n    background-color: ",";\n    padding: ",";\n    border-radius: ",";\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n\n    ul {\n        list-style: none;\n        padding: 0;\n        margin: 0;\n    }\n"]);return Bn=function(){return n},n}function _n(){var n=(0,i.Z)(["\n    max-width: 1100px;\n    height: 500px;\n    width: 1100px;\n"]);return _n=function(){return n},n}var zn,Fn=m.ZP.div.withConfig({componentId:"sc-2d35eda7-0"})(Nn(),(function(n){return n.theme.palette.purple.lightest}),(function(n){return n.theme.shape.borderRadius.medium})),Un=(0,m.ZP)(O.xv).withConfig({componentId:"sc-2d35eda7-1"})(Mn(),(function(n){return n.colorVariant}),O.xv),Gn=(0,m.ZP)((function(n){var e=n.slice,t=n.mode,i=n.className,o=(0,r.Z)((0,l.$)(),1)[0],s=e.points,c=e.date;return(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)(O.xv,{children:o("component.dataviz.ClassroomDataviz.tooltip.date",{date:new Date(c)})}),(0,a.jsx)("ul",{children:s.map((function(n){var e=t.values.find((function(e){return e.action===n.serieId}));if(e)return(0,a.jsx)("li",{children:(0,a.jsxs)(Un,{as:"span",colorVariant:e.color,children:[o(e.label),":"," ",(0,a.jsx)(Un,{as:"span",variant:"subheading",colorVariant:e.color,children:n.data.yFormatted})]})},n.id)}))})]})})).withConfig({componentId:"sc-2d35eda7-2"})(Bn(),(function(n){return n.theme.palette.white.base}),(function(n){var e=n.theme;return"".concat(e.spacing[3]," ").concat(e.spacing[4])}),(function(n){return n.theme.shape.borderRadius.small})),Vn=(0,m.ZP)((function(n){var e,t=n.className,i=n.filters,o=(0,r.Z)((0,l.$)(),1)[0],s=(0,P.Yl)({filters:i}),c=s.data,u=s.error,d=c&&c["hydra:member"].map((function(n){return function(n,e,t){var r=e.values.find((function(e){return e.action===n.id}));return(0,j.Z)((0,C.Z)({},n),{data:n.data.map((function(n){var e=n.x,t=n.y;return{x:(0,En.default)(new Date(e),"yyyy-MM-dd"),y:t}})),color:r?r.color:"pink",label:r?t(r.label):"undefined label"})}(n,i.mode,o)}))||[];return e=c?(0,a.jsx)(On.fH,{data:d,curve:"monotoneX",colors:d.map((function(n){return n.color})),margin:{top:40,right:80,bottom:50,left:80},xScale:{type:"time",format:"%Y-%m-%d"},yScale:{type:"linear",min:0,max:"auto"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:o(i.mode.yAxisLabel),legendOffset:-50,legendPosition:"middle"},axisBottom:{format:function(n){return o("component.dataviz.ClassroomDataviz.bottomAxis.date",{date:new Date(n)})},legend:o("component.dataviz.ClassroomDataviz.bottomAxis.time"),tickValues:"every month",legendOffset:40,legendPosition:"middle"},lineWidth:4,enablePoints:!1,enableSlices:"x",pointLabelYOffset:-12,useMesh:!0,sliceTooltip:function(n){var e=n.slice;return(0,a.jsx)(Gn,{mode:i.mode,slice:(0,j.Z)((0,C.Z)({},e),{date:e.points[0].data.xFormatted})})},legends:[{data:d,anchor:"bottom-right",direction:"column",justify:!1,translateX:-30,translateY:-40,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:200,itemHeight:20,itemOpacity:1,symbolSize:12,symbolShape:"circle",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}):u?(0,a.jsx)(Fn,{children:(0,a.jsx)(O.xv,{children:o("component.dataviz.ClassroomDataviz.error")})}):(0,a.jsx)(A.OG,{}),(0,a.jsx)("div",{className:t,children:e})})).withConfig({componentId:"sc-2d35eda7-3"})(_n()),Hn=t(46071);!function(n){n.SET_DATES="SET_DATES",n.SET_MODE="SET_MODE",n.SET_LEARNERS="SET_LEARNERS",n.TOGGLE_CUMULATED="TOGGLE_CUMULATED",n.SET_CUMULATED="SET_CUMULATED"}(zn||(zn={}));var Wn=[{id:"levels",yAxisLabel:"component.dataviz.ClassroomDataviz.leftAxis.levels",values:[{action:"assignedLevels",color:Hn.Z.purple.base,label:"component.dataviz.ClassroomDataviz.assignedLevels"},{action:"validations",color:Hn.Z.green.base,label:"component.dataviz.ClassroomDataviz.validatedLevels"}]},{id:"works",yAxisLabel:"component.dataviz.ClassroomDataviz.leftAxis.works",values:[{action:"works",color:Hn.Z.red.base,label:"component.dataviz.ClassroomDataviz.works"},{action:"corrections",color:Hn.Z.yellow.base,label:"component.dataviz.ClassroomDataviz.correctedWorks"}]}],$n={mode:Wn[0],cumulatedNumber:"cumulated"},Kn=function(n,e){switch(e.type){case zn.TOGGLE_CUMULATED:return(0,j.Z)((0,C.Z)({},n),{cumulatedNumber:e.payload.cumulatedNumber});case zn.SET_LEARNERS:return(0,j.Z)((0,C.Z)({},n),{learners:e.payload.learners});case zn.SET_DATES:return(0,j.Z)((0,C.Z)({},n),{fromDate:e.payload.startDate,toDate:e.payload.endDate});case zn.SET_MODE:return(0,j.Z)((0,C.Z)({},n),{mode:Wn.find((function(n){return n.id===e.payload.mode}))||$n.mode});default:throw new Error("An error occured while updating dataviz request filters")}};function Yn(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n"]);return Yn=function(){return n},n}function Qn(){var n=(0,i.Z)(["\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: column;\n"]);return Qn=function(){return n},n}function Xn(){var n=(0,i.Z)(["\n    display: flex;\n"]);return Xn=function(){return n},n}function qn(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n"]);return qn=function(){return n},n}function Jn(){var n=(0,i.Z)(["\n    padding: ",";\n    margin: ",";\n    border: 0.2rem solid ",";\n    border-radius: ",";\n    box-sizing: border-box;\n    outline: 0;\n\n    &:focus {\n        border: 0.2rem solid ",";\n    }\n\n    &::-webkit-calendar-picker-indicator {\n        cursor: pointer;\n    }\n\n    height: 48px;\n\n    ","\n"]);return Jn=function(){return n},n}function ne(){var n=(0,i.Z)(["\n    > "," {\n        width: calc(100% - ",");\n        margin: ",";\n        max-height: calc(100vh - ",");\n        overflow-y: auto;\n    }\n"]);return ne=function(){return n},n}function ee(){var n=(0,i.Z)(["\n    margin-bottom: ",";\n"]);return ee=function(){return n},n}function te(){var n=(0,i.Z)(["\n    color: ",";\n"]);return te=function(){return n},n}function re(){var n=(0,i.Z)(["\n    overflow-y: auto;\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n"]);return re=function(){return n},n}function ie(){var n=(0,i.Z)(["\n    display: flex;\n    justify-content: flex-end;\n    margin-top: ",";\n"]);return ie=function(){return n},n}function oe(){var n=(0,i.Z)(["\n    margin-right: auto;\n"]);return oe=function(){return n},n}function ae(){var n=(0,i.Z)(["\n    padding: ",";\n    border-radius: ",";\n    border: 1px solid ",";\n    display: flex;\n    align-items: center;\n\n    "," {\n        margin-left: ",";\n    }\n"]);return ae=function(){return n},n}function se(){var n=(0,i.Z)(["\n    max-width: 1100px;\n\n    "," {\n        margin-top: ",";\n    }\n\n    "," + "," {\n        margin-left: ",";\n    }\n\n    "," {\n        width: 300px;\n    }\n\n    "," "," {\n        margin-right: ",";\n    }\n"]);return se=function(){return n},n}var ce=m.ZP.div.withConfig({componentId:"sc-84217641-0"})(Yn()),ue=m.ZP.div.withConfig({componentId:"sc-84217641-1"})(Qn()),le=m.ZP.div.withConfig({componentId:"sc-84217641-2"})(Xn()),de=m.ZP.div.withConfig({componentId:"sc-84217641-3"})(qn()),fe=m.ZP.input.withConfig({componentId:"sc-84217641-4"})(Jn(),(function(n){var e=n.theme;return"".concat(e.spacing[3]," ").concat(e.spacing[5])}),(function(n){var e=n.theme;return"0 ".concat(e.spacing[5]," 0 ").concat(e.spacing[3])}),(function(n){return n.theme.palette.purple.lighter}),(function(n){return n.theme.shape.borderRadius.small}),(function(n){return n.theme.palette.purple.light}),Rn.C.typography.p),me=(0,m.ZP)(Tn.Z).withConfig({componentId:"sc-84217641-5"})(ne(),Tn.Y,(function(n){return n.theme.spacing[6]}),(function(n){var e=n.theme;return"".concat(e.spacing[5]," auto")}),(function(n){return n.theme.spacing[6]})),pe=m.ZP.div.withConfig({componentId:"sc-84217641-6"})(ee(),(function(n){return n.theme.spacing[6]})),he=(0,m.ZP)(O.xv).withConfig({componentId:"sc-84217641-7"})(te(),(function(n){return n.theme.palette.grey.base})),ge=(0,m.ZP)(x.r).withConfig({componentId:"sc-84217641-8"})(re()),ve=m.ZP.div.withConfig({componentId:"sc-84217641-9"})(ie(),(function(n){return n.theme.spacing[7]})),xe=(0,m.ZP)(k.zx).withConfig({componentId:"sc-84217641-10"})(oe()),be=function(n){var e="yyyy-MM-dd";return n?(0,En.default)(new Date(n),e):(0,En.default)(new Date,e)},Ze=function(n){var e=be(),t=be(n.startDate),r=be(n.endDate);return{fromDate:t,toDate:Date.parse(e)>Date.parse(r)?r:e}},Ce=function(n){return[{id:"levels",label:n("component.dataviz.ClassroomDataviz.toggles.skillsLabel")},{id:"works",label:n("component.dataviz.ClassroomDataviz.toggles.worksLabel")}]},je=function(n){return[{id:"cumulated",label:n("component.dataviz.ClassroomDataviz.toggles.cumulatedDataLabel")},{id:"uncumulated",label:n("component.dataviz.ClassroomDataviz.toggles.uncumulatedDataLabel")}]},ye=(0,m.ZP)((function(n){var e=n.learner,t=n.className,r=(0,y.Z)(n,["learner","className"]);return(0,a.jsx)("label",{htmlFor:e["@id"],children:(0,a.jsxs)("div",{className:t,children:[(0,a.jsx)(kn.Z,(0,j.Z)((0,C.Z)({},r),{id:e["@id"],color:kn.d.PURPLE})),(0,a.jsx)(An.Z,{user:e}),(0,a.jsxs)(O.xv,{children:[e.name," ",e.surname]})]})},e["@id"])})).withConfig({componentId:"sc-84217641-11"})(ae(),(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.palette.grey.lightest}),O.xv,(function(n){return n.theme.spacing[4]})),Se=(0,m.ZP)((function(n){var e,t=n.classroom,i=n.className,s=(0,r.Z)((0,l.$)(),1)[0],c=t.learners.map((function(n){return(0,P.sR)(n)})),d=(0,u.useState)(!1),f=d[0],m=d[1],p=(0,u.useState)(c),h=p[0],g=p[1],v=(0,u.useState)(Ze(t)),b=v[0],Z=v[1],y=(0,r.Z)((e=(0,j.Z)((0,C.Z)({},Ze(t)),{classroomId:(0,P.sR)(t),learners:c}),(0,u.useReducer)(Kn,(0,C.Z)({},$n,e))),2),S=y[0],w=y[1],D=-1===(0,Pn.Z)(new Date(b.fromDate),new Date(t.startDate))||1===(0,Pn.Z)(new Date(b.toDate),new Date(t.endDate))||1===(0,Pn.Z)(new Date(b.fromDate),new Date(b.toDate));return(0,a.jsxs)(ue,{className:i,children:[(0,a.jsxs)(le,{children:[(0,a.jsx)(Ln.Z,{onChange:function(n){return w((e={mode:n},{type:zn.SET_MODE,payload:e}));var e},value:S.mode.id,title:s("component.dataviz.ClassroomDataviz.toggles.modeTitle"),options:Ce(s)}),(0,a.jsx)(Ln.Z,{onChange:function(n){return w((e={cumulatedNumber:n},{type:zn.TOGGLE_CUMULATED,payload:e}));var e},value:null===S||void 0===S?void 0:S.cumulatedNumber,title:s("component.dataviz.ClassroomDataviz.toggles.cumulatedTitle"),options:je(s)})]}),(0,a.jsxs)(ce,{children:[(0,a.jsxs)(de,{children:[(0,a.jsx)(O.xv,{as:"label",htmlFor:"fromDate",children:s("component.dataviz.ClassroomDataviz.fromDate")}),(0,a.jsx)(fe,{type:"date",name:"fromDate",id:"fromDate",min:Ze(t).fromDate,max:Ze(t).toDate,value:b.fromDate,onChange:function(n){return Z((0,j.Z)((0,C.Z)({},b),{fromDate:n.currentTarget.value}))}}),(0,a.jsx)(O.xv,{as:"label",htmlFor:"toDate",children:s("component.dataviz.ClassroomDataviz.toDate")}),(0,a.jsx)(fe,{type:"date",name:"toDate",id:"toDate",min:Ze(t).fromDate,max:Ze(t).toDate,value:b.toDate,onChange:function(n){return Z((0,j.Z)((0,C.Z)({},b),{toDate:n.currentTarget.value}))}}),(0,a.jsx)(k.zx,{outlined:!0,variant:"primary",disabled:D,onClick:function(){return w((n={startDate:b.fromDate,endDate:b.toDate},{type:zn.SET_DATES,payload:n}));var n},children:s("component.dataviz.ClassroomDataviz.filterByDate")})]}),(0,a.jsx)(k.zx,{filled:!0,variant:"primary",onClick:function(){return m(!f)},children:s("component.dataviz.ClassroomDataviz.filterByLearners")})]}),(0,a.jsx)(Vn,{filters:(0,j.Z)((0,C.Z)({},S),{action:S.mode.values.map((function(n){return n.action})),cumulatedNumber:"cumulated"===S.cumulatedNumber})}),(0,a.jsxs)(me,{visible:f,children:[(0,a.jsxs)(pe,{children:[(0,a.jsxs)(O.xv,{as:"span",variant:"label",children:[s("component.dataviz.ClassroomDataviz.select")," -"," "]}),(0,a.jsx)(he,{as:"span",children:s("component.dataviz.ClassroomDataviz.selectedLearner",{count:h.length})})]}),(0,a.jsx)(ge,{as:"ul",children:t.learners.map((function(n){var e=(0,P.sR)(n),t=h.includes(e);return(0,a.jsx)(x.C,{col:4,as:"li",children:(0,a.jsx)(ye,{learner:n,checked:t,onChange:function(){g(t?(0,o.Z)(h.filter((function(n){return e!==n}))):(0,o.Z)(h).concat([e]))}})},n["@id"])}))}),(0,a.jsxs)(ve,{children:[(0,a.jsx)(xe,{variant:"primary",onClick:function(){return m(!1)},children:s("component.dataviz.ClassroomDataviz.close")}),(0,a.jsx)(k.gh,{onClick:function(){return g(h.length?[]:c)},children:h.length?s("component.dataviz.ClassroomDataviz.unselectAll"):s("component.dataviz.ClassroomDataviz.selectAll")}),(0,a.jsx)(k.zx,{outlined:!0,variant:"success",onClick:function(){var n;w((n={learners:h},{type:zn.SET_LEARNERS,payload:n})),m(!1)},children:s("component.dataviz.ClassroomDataviz.submit")})]})]})]})})).withConfig({componentId:"sc-84217641-12"})(se(),ce,(function(n){return n.theme.spacing[5]}),Ln.Z,Ln.Z,(function(n){return n.theme.spacing[4]}),Ln.Z,ve,k.gh,(function(n){return n.theme.spacing[5]})),we=t(86529),De=t(83852),Ie=t(32706);function Ee(){var n=(0,i.Z)(["\n    position: absolute;\n    left: ",";\n    right: ",";\n    z-index: ",";\n\n    box-shadow: 0px 0px 10px ",";\n"]);return Ee=function(){return n},n}var Pe={right:"next",left:"previous"},ke=(0,m.ZP)((function(n){var e=n.direction,t=n.className,i=(0,y.Z)(n,["direction","className"]),o=(0,r.Z)((0,l.$)(),1)[0];return(0,a.jsx)(Ie.Z,(0,j.Z)((0,C.Z)({},i),{className:t,"aria-label":o("component.pagination.".concat(Pe[e])),children:(0,a.jsx)(E.Tt,{direction:e})}))})).withConfig({componentId:"sc-b7dacfe8-0"})(Ee(),(function(n){var e=n.theme;return"left"===n.direction&&"-".concat(e.spacing[5])}),(function(n){var e=n.theme;return"right"===n.direction&&"-".concat(e.spacing[5])}),(function(n){return n.theme.zIndex.navigation}),(function(n){var e=n.theme;return(0,De.DZ)(.75,e.palette.black.base)}));function Le(){var n=(0,i.Z)(["\n    position: absolute;\n    width: 100%;\n    top: calc(50% - ",");\n"]);return Le=function(){return n},n}var Re=(0,m.ZP)((function(n){var e=n.carouselState,t=n.goToSlide,r=n.next,i=n.previous,o=n.className,s=0!==(null===e||void 0===e?void 0:e.currentSlide),c=e&&(null===e||void 0===e?void 0:e.totalItems)>(null===e||void 0===e?void 0:e.slidesToShow);return(0,a.jsxs)("div",{className:o,children:[s&&(0,a.jsx)(ke,{direction:"left",onClick:i}),c&&(0,a.jsx)(ke,{direction:"right",onClick:function(){if(e&&t&&r){var n=e.currentSlide;return e.totalItems===e.slidesToShow+n?t(0):r()}}})]})})).withConfig({componentId:"sc-b8dd6e10-0"})(Le(),(function(n){return n.theme.spacing[5]}));function Te(){var n=(0,i.Z)(["\n    position: relative;\n\n    .react-multi-carousel-list {\n        margin: 0 calc(-1 * "," / 2);\n    }\n\n    .carousel-item {\n        padding: 0 calc("," / 2);\n    }\n"]);return Te=function(){return n},n}var Ae=(0,m.ZP)((function(n){var e=n.slidesPerPage,t=void 0===e?3:e,r=n.children,i=n.className,o=(0,u.useRef)(null),s=(0,u.useMemo)((function(){return{desktop:{breakpoint:{max:Number.POSITIVE_INFINITY,min:0},items:t,slidesToSlide:t,partialVisibilityGutter:16}}}),[t]);return(0,a.jsx)("div",{className:i,children:(0,a.jsx)(we.default,{ref:o,responsive:s,infinite:!1,arrows:!1,renderButtonGroupOutside:!0,customButtonGroup:(0,a.jsx)(Re,{}),keyBoardControl:!0,itemClass:"carousel-item",children:r})})})).withConfig({componentId:"sc-276da897-0"})(Te(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[5]}));function Oe(){var n=(0,i.Z)(["\n    height: 100%;\n    min-width: ",";\n    width: ",";\n    background: ",";\n    border-radius: ",";\n"]);return Oe=function(){return n},n}function Ne(){var n=(0,i.Z)(["\n    height: 12px;\n    min-width: 140px;\n    border-radius: ",";\n    background-color: ",";\n"]);return Ne=function(){return n},n}function Me(){var n=(0,i.Z)(["\n    font-size: 10px;\n    color: ",";\n"]);return Me=function(){return n},n}function Be(){var n=(0,i.Z)(["\n    color: ",";\n"]);return Be=function(){return n},n}function _e(){var n=(0,i.Z)(["\n    width: 17px;\n    height: 16px;\n    margin-left: ",";\n\n    .colorStroke {\n        stroke: ",";\n    }\n"]);return _e=function(){return n},n}function ze(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n\n    "," {\n        flex: 1;\n        margin: 0 ",";\n    }\n"]);return ze=function(){return n},n}function Fe(){var n=(0,i.Z)(["\n        min-height: 160px;\n        border: 1px solid ",";\n        border-radius: ",";\n        background-color: ",";\n        padding: ",";\n\n        > "," {\n            text-align: left;\n            min-height: 48px;\n        }\n\n        > * + * {\n            margin-top: ",";\n        }\n    "]);return Fe=function(){return n},n}function Ue(){var n=(0,i.Z)(["\n    ","\n"]);return Ue=function(){return n},n}var Ge=m.ZP.div.withConfig({componentId:"sc-cd7d6113-0"})(Oe(),(function(n){return n.value>0?"12px":0}),(function(n){var e=n.percent;return"".concat(e,"%")}),(function(n){return n.theme.palette.yellow.base}),(function(n){return n.theme.shape.borderRadius.small})),Ve=(0,m.ZP)((function(n){var e=n.value,t=n.minValue,r=void 0===t?0:t,i=n.maxValue,o=void 0===i?100:i,s=n.className,c=n.a11yLabel,u=100*e/o;return(0,a.jsx)("div",{className:s,role:"progressbar","aria-valuetext":c,"aria-valuenow":e,"aria-valuemin":r,"aria-valuemax":o,children:(0,a.jsx)(Ge,{percent:u,value:e})})})).withConfig({componentId:"sc-cd7d6113-1"})(Ne(),(function(n){return n.theme.shape.borderRadius.small}),(function(n){return n.theme.palette.grey.lightest})),He=(0,m.ZP)(O.xv).attrs({variant:"subheading"}).withConfig({componentId:"sc-cd7d6113-2"})(Me(),(function(n){return n.theme.palette.grey.base})),We=(0,m.ZP)(He).withConfig({componentId:"sc-cd7d6113-3"})(Be(),(function(n){return n.theme.palette.black.base})),$e=(0,m.ZP)(E.Q).withConfig({componentId:"sc-cd7d6113-4"})(_e(),(function(n){return n.theme.spacing[3]}),(function(n){return n.theme.palette.grey.base})),Ke=(0,m.ZP)((function(n){var e=n.level,t=n.value,i=n.total,o=n.className,s=n.label,c=(0,r.Z)((0,l.$)(),1)[0],u=c("component.SkillMetrics.skillLevelMetrics",{value:t,total:i,label:s,level:e});return(0,a.jsxs)("div",{title:u,className:o,children:[(0,a.jsxs)(He,{"aria-hidden":!0,children:[c("component.SkillMetrics.levelShortcut",{level:e}),(0,a.jsx)(X.Z,{children:c("component.SkillMetrics.levelLabel",{level:e})})]}),(0,a.jsx)(Ve,{value:t,maxValue:i,a11yLabel:u}),(0,a.jsx)(We,{"aria-hidden":!0,children:t}),(0,a.jsx)($e,{})]})})).withConfig({componentId:"sc-cd7d6113-5"})(ze(),Ve,(function(n){return n.theme.spacing[2]})),Ye=(0,m.ZP)((function(n){var e=n.label,t=n.levelValidationsMetrics,r=n.className;return(0,a.jsxs)("div",{className:r,children:[(0,a.jsx)(O.xv,{variant:"subheading",children:e}),t.map((function(n){return(0,a.jsx)(Ke,{level:n.level,total:n.total,value:n.number,label:e},n.level)}))]})})).withConfig({componentId:"sc-cd7d6113-6"})(Ue(),(function(n){var e=n.theme;return(0,m.iv)(Fe(),e.palette.grey.lightest,e.shape.borderRadius.medium,e.palette.white.base,(function(n){return n.theme.spacing[5]}),O.xv,(function(n){return n.theme.spacing[4]}))}));function Qe(){var n=(0,i.Z)(["\n    width: 100%;\n"]);return Qe=function(){return n},n}var Xe,qe=(0,m.ZP)((function(n){var e=n.skillsValidations,t=n.className,r=(0,u.useMemo)((function(){return e.map((function(n){return(0,a.jsx)(Ye,{label:n.shortTitle,levelValidationsMetrics:n.skillLevels},n.uuid)}))}),[e]);return(0,a.jsx)("div",{className:t,children:(0,a.jsx)(Ae,{slidesPerPage:4,children:r})})})).withConfig({componentId:"sc-cb92a20e-0"})(Qe());function Je(){var n=(0,i.Z)(["\n    grid-area: ",";\n"]);return Je=function(){return n},n}function nt(){var n=(0,i.Z)(["\n    grid-area: ",";\n    border-radius: ",";\n"]);return nt=function(){return n},n}function et(){var n=(0,i.Z)(["\n    "," {\n        flex: 1;\n        margin-left: -",";\n        margin-right: -",";\n    }\n"]);return et=function(){return n},n}!function(n){n.PROGRESS_PERCENT="classroomProgression",n.SUCCESS_RATE="classroomSuccess",n.WORKS_NUMBER="classroomWorks",n.VALIDATED_SKILLS="skillsProgression"}(Xe||(Xe={}));var tt=(0,m.ZP)($).withConfig({componentId:"sc-12736808-0"})(Je(),(function(n){return n.gridArea})),rt=(0,m.ZP)(A.OG).withConfig({componentId:"sc-12736808-1"})(nt(),(function(n){return n.gridArea}),(function(n){return n.theme.shape.borderRadius.medium})),it=(0,m.ZP)((function(n){var e=n.className,t=n.showHelper,i=n.isLoading,o=n.metrics,s=n.learnersCount,c=(0,r.Z)((0,l.$)(),1)[0],d=(0,h.OT)().activeClassroom,f=(0,u.useMemo)((function(){return[{gridArea:Xe.VALIDATED_SKILLS,title:c("component.TrainerClassroomMetrics.".concat(Xe.VALIDATED_SKILLS,".title")),content:c("component.TrainerClassroomMetrics.".concat(Xe.VALIDATED_SKILLS,".helper")),children:(0,a.jsx)(G,{title:c("component.TrainerClassroomMetrics.".concat(Xe.VALIDATED_SKILLS,".title")),rightText:c("component.TrainerClassroomMetrics.".concat(Xe.VALIDATED_SKILLS,".learnersCount"),{count:s}),children:(0,a.jsx)(qe,{skillsValidations:(null===o||void 0===o?void 0:o.skillsProgression)||[]})})}]}),[c,o]);return i?(0,a.jsx)("div",{className:e,children:f.map((function(n){return(0,a.jsx)(rt,{gridArea:n.gridArea},n.gridArea)}))}):(0,a.jsxs)("div",{className:e,children:[d&&(0,a.jsx)(Se,{classroom:d}),f.map((function(n){return(0,a.jsx)(tt,{gridArea:n.gridArea,title:n.title,content:n.content,visible:t,children:n.children},n.gridArea)}))]})})).withConfig({componentId:"sc-12736808-2"})(et(),qe,(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[5]})),ot=function(n){var e=n.classroom,t=n.isTrainer,i=n.isLearner,o=(0,y.Z)(n,["classroom","isTrainer","isLearner"]),s=(0,r.Z)((0,D.Z)(),1)[0],c=(0,I.Z)(),d=(0,r.Z)((0,l.$)(),1)[0],f=(0,u.useState)(!1),m=f[0],p=f[1],h=e&&(0,P.sR)(e),v=(0,u.useMemo)((function(){return{method:"GET",url:"/classrooms/".concat(h,"/metrics")}}),[h]),x=(0,L.Z)(v),b=x.isPending,Z=x.response,S=null===Z||void 0===Z?void 0:Z.data;return(0,a.jsxs)(R.Z,(0,j.Z)((0,C.Z)({},o),{title:d("component.ClassroomMetricsSection.title"),helper:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(k.hU,{onClick:function(){return p(!m)},variant:"primary",disabled:b,children:[d("component.ClassroomMetricsSection.".concat(m?"hideHelper":"showHelper")),m?(0,a.jsx)(E._j,{}):(0,a.jsx)(E.TB,{})]}),(0,a.jsx)(g.od,{feature:g.L0.EXPORT_CLASSROOM_STATISTICS,children:(0,a.jsxs)(k.zx,{as:"a",href:"/api/classrooms/".concat(h,"/stats?").concat(w().stringify({token:c,locale:s})),download:(0,T.B)(d("component.ClassroomMetricsSection.exportCsvButton.filename",{date:new Date})),outlined:!0,variant:"primary",children:[d("component.ClassroomMetricsSection.exportCsvButton.exportCsv"),(0,a.jsx)(E.UW,{})]})})]}),children:[t&&e&&(0,a.jsx)(it,{showHelper:m,isLoading:b,metrics:S,learnersCount:e.nbLearners}),i&&(0,a.jsx)(In,{showHelper:m,isLoading:b,metrics:S})]}))},at=t(41664),st=t.n(at),ct=t(97196),ut=t(85159);function lt(){var n=(0,i.Z)([""]);return lt=function(){return n},n}var dt=(0,m.ZP)((function(n){var e=n.classroom,t=n.showVisio,i=(0,y.Z)(n,["classroom","showVisio"]),o=(0,r.Z)((0,l.$)(),1)[0];return(0,a.jsx)(R.Z,(0,j.Z)((0,C.Z)({},i),{title:o("component.classroomCard.title"),helper:(0,a.jsx)(g.od,{feature:g.L0.CLASSROOM_CREATE,children:(0,a.jsx)(st(),{href:v.AW.CLASSROOMS_CREATE,passHref:!0,children:(0,a.jsxs)(ct.zx,{as:"a",filled:!0,variant:"primary",children:[o("page.home.createClassroom.link")," ",(0,a.jsx)(E.v3,{})]})})}),children:(0,a.jsx)(ut.Z,{classroom:e,showVisio:t})}))})).withConfig({componentId:"sc-907629a9-0"})(lt()),ft=t(8804),mt=t.n(ft),pt=t(19315),ht=t(1029),gt=t(22131),vt=t(55291);function xt(){var n=(0,i.Z)(["\n    height: 490px;\n    gap: 0;\n\n    > :first-child {\n        > "," {\n            padding: ",";\n        }\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n    }\n\n    "," {\n        overflow: auto;\n        flex: 1;\n        min-height: 0;\n    }\n\n    "," {\n        padding-top: 16px;\n        overflow: hidden;\n        background: ",";\n    }\n\n    border: 2px solid ",";\n    border-radius: ",";\n"]);return xt=function(){return n},n}var bt=(0,m.ZP)((function(n){var e=n.filters,t=(0,y.Z)(n,["filters"]),r=(0,P.pU)({filters:e}),i=r.data,o=r.isLoading,s=null===i||void 0===i?void 0:i["hydra:member"],c=(0,u.useState)(mt()(s)),l=c[0],d=c[1];return(0,u.useEffect)((function(){(null===s||void 0===s?void 0:s.find((function(n){return n["@id"]===(null===l||void 0===l?void 0:l["@id"])})))||d(mt()(s))}),[s]),o?(0,a.jsx)(pt.rj,(0,j.Z)((0,C.Z)({},t),{children:(0,a.jsx)(pt.C4,{col:12,children:(0,a.jsx)(ht.Z,{})})})):(0,a.jsxs)(pt.rj,(0,j.Z)((0,C.Z)({},t),{children:[(0,a.jsx)(pt.C4,{col:3,children:(0,a.jsx)(vt.Z,{items:s,selectedItem:null===l||void 0===l?void 0:l["@id"],onSelect:d})}),l?(0,a.jsx)(pt.C4,{as:gt.Z,col:9,skill:l,tabsVariant:"secondary",tabButtonVariant:"secondary"}):void 0]}))})).withConfig({componentId:"sc-2767797e-0"})(xt(),O.xv,(function(n){return n.theme.spacing[5]}),vt.Z,gt.Z,(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.palette.grey.lightest}),(function(n){return n.theme.shape.borderRadius.medium}));function Zt(){var n=(0,i.Z)(["\n    --text-color: ",";\n"]);return Zt=function(){return n},n}function Ct(){var n=(0,i.Z)(["\n    height: 56px;\n    width: 100%;\n    margin: "," 0;\n\n    cursor: pointer;\n\n    ",";\n\n    padding: 0 ",";\n\n    border: 2px solid ",";\n    background: ",";\n    border-radius: ",";\n\n    transition: all 0.2s;\n\n    :active,\n    :hover:active {\n        background: ",";\n        transform: translate(0, 0);\n        box-shadow: none;\n    }\n\n    :hover {\n        box-shadow: 3px 3px 0px ",";\n        transform: translate(-3px, -3px);\n    }\n\n    :focus {\n        outline: "," solid 3px;\n    }\n"]);return Ct=function(){return n},n}function jt(){var n=(0,i.Z)(["\n    > "," {\n        height: 516px; // Size of card content when loaded to prevent cumulative layout shift\n        border-radius: ",";\n    }\n\n    "," {\n        margin-bottom: ",";\n    }\n"]);return jt=function(){return n},n}var yt=(0,m.ZP)(O.xv).attrs({variant:"subheading"}).withConfig({componentId:"sc-8cc24c1b-0"})(Zt(),(function(n){return n.theme.palette.grey.base})),St=m.ZP.button.withConfig({componentId:"sc-8cc24c1b-1"})(Ct(),(function(n){return n.theme.spacing[2]}),(function(n){return n.theme.typography.subheading}),(function(n){return n.theme.spacing[5]}),(function(n){var e=n.theme;return n.selected?e.palette.white.base:e.palette.yellow.base}),(function(n){var e=n.theme;return n.selected?e.palette.yellow.base:e.palette.white.base}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.palette.yellow.base}),(function(n){return n.theme.palette.yellow.base}),(function(n){return n.theme.palette.blue.focus})),wt=(0,m.ZP)((function(n){var e=n.variant,t=void 0===e?"default":e,i=(0,y.Z)(n,["variant"]),o=(0,r.Z)((0,l.$)(),1)[0],s=(0,u.useState)(),c=s[0],d=s[1],f=(0,h.OT)().activeClassroom,m=(0,P.GR)("classroom-scoped"===t?{filters:{classrooms:f&&(0,P.sR)(f)},enabled:f}:{filters:{restricted:!0}}),p=m.data,g=m.isLoading,v=null===p||void 0===p?void 0:p["hydra:member"];return(0,u.useEffect)((function(){v&&v.length>0&&d((0,P.sR)(v[0]))}),[v]),(0,a.jsx)(R.Z,(0,j.Z)((0,C.Z)({title:o("component.home.FrameworksCard.".concat(t,".title")),helper:v&&(0,a.jsx)(yt,{children:o("component.home.FrameworksCard.frameworksCount",{count:v.length})})},i),{children:g?(0,a.jsx)(A.OG,{}):v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ae,{slidesPerPage:4,children:v.map((function(n){return(0,a.jsx)(St,{selected:(0,P.sR)(n)===c,onClick:function(){return d((0,P.sR)(n))},children:(0,a.jsx)(O.xv,{as:"span",variant:"subheading",lines:2,children:n.title})},n["@id"])}))},JSON.stringify(p)),(0,a.jsx)(bt,{filters:{frameworks:c}})]})}))})).withConfig({componentId:"sc-8cc24c1b-2"})(jt(),A.OG,(function(n){return n.theme.shape.borderRadius.medium}),Ae,(function(n){return n.theme.spacing[7]})),Dt=t(47568),It=t(34051),Et=t.n(It),Pt=t(18446),kt=t.n(Pt),Lt=t(19716),Rt=t(4874),Tt=t(85721),At=t(15948);function Ot(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n\n    --icon-color: ",";\n    --text-color: ",";\n\n    > :last-child {\n        "," {\n            height: 16px;\n            width: 16px;\n        }\n\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        padding: ",";\n        border: 2px solid ",";\n        border-radius: ",";\n        background-color: ",";\n    }\n"]);return Ot=function(){return n},n}function Nt(){var n=(0,i.Z)(["\n    > div > div {\n        margin-bottom: ",";\n    }\n"]);return Nt=function(){return n},n}var Mt=m.ZP.div.withConfig({componentId:"sc-60481029-0"})(Ot(),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.palette.purple.base}),E.le,(function(n){var e=n.theme;return"".concat(e.spacing[5]," ").concat(e.spacing[2])}),(function(n){var e=n.theme;return n.isDragging?"transparent":e.palette.purple.base}),(function(n){return n.theme.shape.borderRadius.small}),(function(n){var e=n.theme;return n.isDragging?e.palette.yellow.base:e.palette.purple.lightest})),Bt=function(n){var e=n.item,t=n.index;return(0,a.jsx)(At._l,{draggableId:e.id,index:t,children:function(n,t){return(0,a.jsxs)(Mt,(0,j.Z)((0,C.Z)({ref:n.innerRef},n.draggableProps,n.dragHandleProps),{isDragging:t.isDragging,children:[(0,a.jsx)(E.A6,{}),(0,a.jsxs)("div",{children:[e.icon,(0,a.jsx)(O.xv,{variant:"subheading",lines:1,children:e.label})]})]}))}})},_t=(0,m.ZP)((function(n){var e=n.className,t=n.navOrder,i=n.setNavOrder;return(0,a.jsx)("div",{className:e,children:(0,a.jsx)(At.Z5,{onDragEnd:function(n){if(n.destination&&n.destination.index!==n.source.index){var e=function(n,e,t){var i=Array.from(n),o=(0,r.Z)(i.splice(e,1),1)[0];return i.splice(t,0,o),i}(t,n.source.index,n.destination.index);i(e)}},children:(0,a.jsx)(At.bK,{droppableId:"list",children:function(n){return(0,a.jsxs)("div",(0,j.Z)((0,C.Z)({ref:n.innerRef},n.droppableProps),{children:[t.map((function(n,e){return(0,a.jsx)(Bt,{item:n,index:e},n.id)})),n.placeholder]}))}})})})})).withConfig({componentId:"sc-60481029-1"})(Nt(),(function(n){return n.theme.spacing[2]}));function zt(){var n=(0,i.Z)(["\n    > "," {\n        width: fit-content;\n        margin: 0;\n    }\n"]);return zt=function(){return n},n}function Ft(){var n=(0,i.Z)(["\n    display: flex;\n\n    "," {\n        display: flex;\n        flex-direction: column;\n    }\n\n    "," {\n        margin-left: -",";\n    }\n"]);return Ft=function(){return n},n}function Ut(){var n=(0,i.Z)(["\n    margin-bottom: ",";\n"]);return Ut=function(){return n},n}function Gt(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 0 ",";\n"]);return Gt=function(){return n},n}function Vt(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n\n    "," {\n        background-color: ",";\n        border-radius: ",";\n        box-shadow: 0 0 0 4px ",";\n    }\n\n    > "," {\n        margin-top: ",";\n        background: ",";\n    }\n\n    "," {\n        margin-top: ",";\n    }\n"]);return Vt=function(){return n},n}var Ht=(0,m.ZP)(Tn.Z).withConfig({componentId:"sc-4fed1210-0"})(zt(),Tn.Y),Wt=(0,m.ZP)(x.r).withConfig({componentId:"sc-4fed1210-1"})(Ft(),x.C,_t,(function(n){return n.theme.spacing[6]})),$t=m.ZP.div.withConfig({componentId:"sc-4fed1210-2"})(Ut(),(function(n){return n.theme.spacing[6]})),Kt=m.ZP.div.withConfig({componentId:"sc-4fed1210-3"})(Gt(),(function(n){return n.theme.spacing[5]})),Yt={classroom:{icon:(0,a.jsx)(E.rV,{}),translationKey:"page.home.navigation.options.promo"},brief:{icon:(0,a.jsx)(E.TU,{}),translationKey:"page.home.navigation.options.briefs"},statistic:{icon:(0,a.jsx)(E.gy,{}),translationKey:"page.home.navigation.options.stats"},learner:{icon:(0,a.jsx)(E.Q,{}),translationKey:"page.home.navigation.options.learners"},framework:{icon:(0,a.jsx)(E.$9,{}),translationKey:"page.home.navigation.options.frameworks"},resource:{icon:(0,a.jsx)(E._z,{}),translationKey:"page.home.navigation.options.resources"},scenario:{icon:(0,a.jsx)(E.pu,{}),translationKey:"page.home.navigation.options.scenario"}},Qt=(0,m.ZP)((function(n){var e=n.className,t=n.cards,i=n.onSave,o=n.onChange,s=n.value,c=(0,r.Z)((0,l.$)(),1)[0],d=(0,p.z)().user,f=(0,u.useState)(!1),m=f[0],h=f[1],g=(0,u.useMemo)((function(){return t.map((function(n){var e=Yt[n],t=e.icon,r=e.translationKey;return{id:n,icon:t,label:c(r)}}))}),[t,c]),v=(0,u.useState)(g),b=v[0],Z=v[1],C=(0,Tt.p)({}),j=C.putUserSettings,y=C.error,S=C.reset,w=C.isLoading,D=function(){var n=(0,Dt.Z)(Et().mark((function n(){var e,r;return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=b.map((function(n){return null===n||void 0===n?void 0:n.id})),!kt()(e,t)){n.next=3;break}return n.abrupt("return",h(!1));case 3:return r=(0,P.sR)(d),n.next=6,j({uuid:r,user:d["@id"],homecards:e});case 6:n.sent&&(i(),h(!1));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,a.jsxs)(Lt.Z,{offsetTop:16+Rn.C.navbarHeight,children:[(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(Ln.Z,{orientation:"vertical",onChange:o,value:s,title:c("page.home.navigation.title"),options:g}),(0,a.jsx)(ct.zx,{variant:"primary",outlined:!0,small:!0,onClick:function(){return h(!0)},children:c("page.home.navigation.options.settings")})]}),(0,a.jsx)(Ht,{visible:m,onClose:function(){Z(g),h(!1)},children:(0,a.jsx)(Wt,{children:(0,a.jsxs)(x.C,{col:1,children:[(0,a.jsxs)($t,{children:[(0,a.jsx)(O.xv,{as:"span",variant:"h4",children:c("page.home.modal.title")}),(0,a.jsx)(O.xv,{as:"p",children:c("page.home.modal.subTitle")})]}),(0,a.jsxs)(Kt,{children:[(0,a.jsx)(_t,{navOrder:b,setNavOrder:function(n){return Z((function(){return n}))}}),(0,a.jsx)(ct.zx,{variant:"success",outlined:!0,small:!0,loading:w,onClick:D,children:w?(0,a.jsx)(E.aN,{}):c("page.home.modal.confirm")})]})]})})}),(0,a.jsx)(Rt.Z,{error:y,dissmiss:function(){return S()}})]})})).withConfig({componentId:"sc-4fed1210-4"})(Vt(),Ln.Z,(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){var e=n.theme;return(0,De.DZ)(.99,e.palette.black.base)}),Ln.d,(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.palette.white.base}),ct.zx,(function(n){return n.theme.spacing[3]})),Xt=Qt,qt=t(602),Jt=t(95176),nr=t(77229),er=t(42699),tr=t(59946),rr=t(4430),ir=t(14539),or=t(23480),ar=t(98733),sr=t(42321),cr=t(89345),ur=t(75830),lr=t(63345),dr=t(96486),fr=t(33704),mr=t(19324),pr=function(n){var e=(0,u.useState)([]),t=e[0],r=e[1],i=(0,u.useState)(!0),o=i[0],a=i[1],s=(0,mr.Z)({method:"GET"}).request;return(0,u.useEffect)((function(){var e=function(){var n=(0,Dt.Z)(Et().mark((function n(e){var t;return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s({url:e});case 2:return t=n.sent.data,n.abrupt("return",t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),t=function(){var t=(0,Dt.Z)(Et().mark((function t(){var i;return Et().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(n.map((function(n){return e(n)})));case 2:i=t.sent,r(i),a(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();n.length>0&&t()}),[n]),{frameworks:t,isPending:o}},hr=function(){var n=(0,h.OT)().activeClassroom,e=(0,u.useMemo)((function(){return n?n.frameworks.map((function(n){return n["@id"]})):[]}),[n]);return pr(e).frameworks},gr=t(22080),vr=t(20697),xr=t(92061);function br(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: ",";\n"]);return br=function(){return n},n}function Zr(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n"]);return Zr=function(){return n},n}function Cr(){var n=(0,i.Z)(["\n    margin-top: 0;\n    margin-bottom: 0;\n"]);return Cr=function(){return n},n}function jr(){var n=(0,i.Z)(["\n    text-transform: uppercase;\n"]);return jr=function(){return n},n}function yr(){var n=(0,i.Z)(["\n    color: ",";\n    margin-left: ",";\n"]);return yr=function(){return n},n}function Sr(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n\n    position: relative;\n    margin: 0;\n    padding: 0;\n\n    "," {\n        border: 1px solid ",";\n        border-radius: ",";\n\n        > div {\n            border-bottom: 0;\n        }\n    }\n\n    "," + "," {\n        margin-top: ",";\n    }\n"]);return Sr=function(){return n},n}function wr(){var n=(0,i.Z)(["\n    overflow: auto;\n"]);return wr=function(){return n},n}function Dr(){var n=(0,i.Z)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0;\n\n    "," {\n        font-weight: 900;\n    }\n"]);return Dr=function(){return n},n}function Ir(){var n=(0,i.Z)(["\n    margin-left: ",";\n    display: flex;\n    align-items: center;\n"]);return Ir=function(){return n},n}function Er(){var n=(0,i.Z)(["\n    margin: 0 0 0 ",";\n    color: ",";\n"]);return Er=function(){return n},n}function Pr(){var n=(0,i.Z)(["\n    display: inline-block;\n    height: 8px;\n    width: 8px;\n    border-radius: 50%;\n    background-color: ",";\n    margin-right: ",";\n"]);return Pr=function(){return n},n}function kr(){var n=(0,i.Z)(["\n    ",";\n\n    color: ",";\n    text-transform: lowercase;\n    margin-right: ",";\n"]);return kr=function(){return n},n}function Lr(){var n=(0,i.Z)(["\n    margin-bottom: ",";\n"]);return Lr=function(){return n},n}function Rr(){var n=(0,i.Z)(["\n    width: 12px;\n    --icon-color: ",";\n"]);return Rr=function(){return n},n}function Tr(){var n=(0,i.Z)(["\n    padding: "," "," 0;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    ",",\n    "," {\n        flex: 1;\n        min-height: 0;\n    }\n"]);return Tr=function(){return n},n}var Ar=m.ZP.div.withConfig({componentId:"sc-3bcbea3-0"})(br(),(function(n){return n.theme.spacing[5]})),Or=m.ZP.div.withConfig({componentId:"sc-3bcbea3-1"})(Zr()),Nr=(0,m.ZP)(O.xv).attrs({variant:"h4",as:"span"}).withConfig({componentId:"sc-3bcbea3-2"})(Cr()),Mr=(0,m.ZP)(Nr).attrs({as:"span"}).withConfig({componentId:"sc-3bcbea3-3"})(jr()),Br=(0,m.ZP)(O.xv).attrs({variant:"subheading",as:"span"}).withConfig({componentId:"sc-3bcbea3-4"})(yr(),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.spacing[6]})),_r=m.ZP.ul.withConfig({componentId:"sc-3bcbea3-5"})(Sr(),gr.Z,(function(n){return n.theme.palette.grey.lightest}),(function(n){return n.theme.shape.borderRadius.medium}),gr.Z,gr.Z,(function(n){return n.theme.spacing[5]})),zr=m.ZP.div.withConfig({componentId:"sc-3bcbea3-6"})(wr()),Fr=m.ZP.div.withConfig({componentId:"sc-3bcbea3-7"})(Dr(),O.xv),Ur=m.ZP.div.withConfig({componentId:"sc-3bcbea3-8"})(Ir(),(function(n){return n.theme.spacing[5]})),Gr=(0,m.ZP)(O.xv).attrs({variant:"subheading",as:"span"}).withConfig({componentId:"sc-3bcbea3-9"})(Er(),(function(n){return n.theme.spacing[2]}),(function(n){return n.theme.palette.grey.base})),Vr=m.ZP.span.withConfig({componentId:"sc-3bcbea3-10"})(Pr(),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.spacing[2]})),Hr=(0,m.ZP)(fr.Z).withConfig({componentId:"sc-3bcbea3-11"})(kr(),(function(n){return n.theme.typography.subheading}),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.spacing[2]})),Wr=m.ZP.div.withConfig({componentId:"sc-3bcbea3-12"})(Lr(),(function(n){return n.theme.spacing[6]})),$r=(0,m.ZP)(E.c5).withConfig({componentId:"sc-3bcbea3-13"})(Rr(),(function(n){return n.theme.palette.purple.base})),Kr={en:cr.Z,fr:ur.Z,es:lr.Z},Yr=(0,m.ZP)((function(n){var e=n.lastLearnerClassroom,t=n.learner,i=n.validations,o=n.isLoading,s=n.focusRef,c=(0,y.Z)(n,["lastLearnerClassroom","learner","validations","isLoading","focusRef"]),d=t.name,f=t.surname,m=t.email,p=t.connectedAt,g=t.status,v=(0,r.Z)((0,D.Z)(),1)[0],x=(0,r.Z)((0,l.$)(),1)[0],b=(0,h.OT)().activeClassroom,Z=(0,P.GR)({filters:{learners:t&&(0,P.sR)(t)},enabled:!b,staleTime:864e5}),S=Z.data,w=Z.isLoading,I=b?hr():S?S["hydra:member"]:[],E=(0,u.useMemo)((function(){var n=[];return I.forEach((function(e){e.skills.forEach((function(e){var t=(0,dr.isString)(e)?e:e["@id"];n.includes(t)||n.push(t)}))})),n}),[I]),k=o||w?(0,a.jsx)(Fr,{children:(0,a.jsx)(ht.Z,{})}):(0,a.jsx)(Fr,{children:(0,a.jsx)(O.xv,{as:"p",variant:"h3",children:x("page.classrooms.home.noSkill")})});i&&i.length>0&&(k=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Wr,{children:(0,a.jsx)(xr.Z,{skillsCount:E.length,validations:i,isInCard:!0})}),(0,a.jsx)(zr,{children:(0,a.jsx)(_r,{children:I.map((function(n){return(0,a.jsx)(gr.Z,{framework:n,validations:i,isInCard:!0,learnerId:(0,P.sR)(t)},n["@id"])}))})})]}));var L=b||e;return(0,a.jsxs)("div",(0,j.Z)((0,C.Z)({},c),{children:[(0,a.jsxs)(Ar,{children:[(0,a.jsxs)(Or,{children:[(0,a.jsxs)(Nr,{tabIndex:-1,ref:s,children:[d," ",(0,a.jsx)(Mr,{children:f})]}),(0,a.jsx)(Br,{children:m}),(0,a.jsx)(Ur,{children:p?(0,a.jsxs)(Gr,{children:[(0,a.jsx)(Vr,{}),(0,sr.Z)(new Date(p),{locale:Kr[v]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Hr,{status:g}),(0,a.jsx)($r,{})]})})]}),L&&(0,a.jsx)(vr.Z,{classroom:L,learner:t,children:x(b?"page.classrooms.home.learners.learnerTrainingReport.default":"page.classrooms.home.learners.learnerTrainingReport.lastClassroom")})]}),k]}))})).withConfig({componentId:"sc-3bcbea3-14"})(Tr(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[5]}),Fr,zr);function Qr(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    border-right: 1px solid ",";\n\n    "," {\n        flex: 1;\n        overflow: auto;\n    }\n"]);return Qr=function(){return n},n}function Xr(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    flex: 1;\n    min-height: 0;\n    min-width: 0;\n"]);return Xr=function(){return n},n}function qr(){var n=(0,i.Z)(["\n    position: relative;\n\n    padding: "," "," ",";\n\n    & > input {\n        min-height: 48px;\n        margin-bottom: 0;\n    }\n"]);return qr=function(){return n},n}function Jr(){var n=(0,i.Z)(["\n    background-color: ",";\n    border: 1px solid ",";\n    padding-left: ",";\n\n    &:focus {\n        border: 1px solid ",";\n        padding-left: ",";\n    }\n"]);return Jr=function(){return n},n}function ni(){var n=(0,i.Z)(["\n    border: 1px solid ",";\n    box-sizing: border-box;\n    border-radius: ",";\n    height: 490px;\n\n    > * {\n        height: inherit;\n    }\n\n    overflow: hidden;\n"]);return ni=function(){return n},n}var ei=(0,m.ZP)(x.C).withConfig({componentId:"sc-8cacb735-0"})(Qr(),(function(n){return n.theme.palette.grey.lightest}),ar.Z),ti=(0,m.ZP)(x.C).withConfig({componentId:"sc-8cacb735-1"})(Xr()),ri=m.ZP.form.withConfig({componentId:"sc-8cacb735-2"})(qr(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[6]})),ii=(0,m.ZP)(rr.MA).withConfig({componentId:"sc-8cacb735-3"})(Jr(),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.palette.black.base}),(function(n){return n.theme.spacing[4]})),oi=(0,m.ZP)((function(n){var e=n.isPending,t=n.learners,i=(0,y.Z)(n,["isPending","learners"]),o=(0,r.Z)((0,l.$)(),1)[0],s=(0,u.useState)(),c=s[0],d=s[1],f=(0,h.OT)().activeClassroom,m=(0,u.useRef)(null),p=(0,u.useRef)(!0),g=(0,tr.Z)(t,{keys:["name","surname"]}),v=g.results,b=g.search,Z=g.setSearch;(0,u.useEffect)((function(){d(t.length>0?t[0]:void 0)}),[e,t]);var S=(0,u.useMemo)((function(){if(c){var n=(0,P.sR)(c);if(n&&f)return{learner:n,classroom:(0,P.sR)(f)};if(n&&!f)return{learner:n}}}),[f,c]),w=(0,or.M)({filters:S,enabled:!!c&&!!S}),D=w.data,I=w.isLoading,E=w.refetch;(0,u.useEffect)((function(){var n;c&&(E(),p.current?p.current=!1:null===m||void 0===m||null===(n=m.current)||void 0===n||n.focus())}),[c]);var k=(0,ir.h)(f?{filters:{},enabled:!1}:{orderBy:"startDate",filters:{learner:c&&c},enabled:c}).data,L=null===k||void 0===k?void 0:k["hydra:member"][0],R=(0,a.jsx)(ti,{col:12,children:(0,a.jsx)(O.xv,{textAlign:"center",variant:"h3",children:o("page.classrooms.home.noLearners")})}),T=D?D["hydra:member"]:[],A=(0,u.useMemo)((function(){return T.sort((function(n,e){return new Date(e.updatedAt).getTime()-new Date(n.updatedAt).getTime()})).reduce((function(n,e){return n.find((function(n){return n.skillLevel["@id"]===e.skillLevel["@id"]&&(0,er.default)(new Date(n.updatedAt),new Date(e.updatedAt))}))?n:n.concat([e])}),[])}),[T]),N=f?T:A;return e||t.length>0&&!c?R=(0,a.jsx)(x.C,{col:12,children:(0,a.jsx)(ht.Z,{})}):(null===t||void 0===t?void 0:t.length)>0&&(R=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ei,{col:3,children:[(0,a.jsxs)(ri,{children:[(0,a.jsx)(rr.__,{children:o("component.SelfEvaluationTrainer.searchLabel")}),(0,a.jsx)(ii,{value:b,onChange:function(n){return Z(n.currentTarget.value)},placeholder:o("component.SelfEvaluationTrainer.searchPlaceholder")})]}),(0,a.jsx)(ar.Z,{users:v,selectedUserId:c&&(0,P.sR)(c),setSelectedUser:function(n){return n&&d(n)}})]}),c&&(0,a.jsx)(x.C,{col:9,role:"tabpanel",children:(0,a.jsx)(Yr,{lastLearnerClassroom:L,learner:c,validations:N,isLoading:I,focusRef:m})})]})),(0,a.jsx)(x.r,(0,j.Z)((0,C.Z)({},i),{children:R}))})).withConfig({componentId:"sc-8cacb735-4"})(ni(),(function(n){return n.theme.palette.grey.lightest}),(function(n){return n.theme.shape.borderRadius.medium}));function ai(){var n=(0,i.Z)(["\n    "," {\n        margin: 0;\n    }\n"]);return ai=function(){return n},n}var si=(0,m.ZP)((function(n){var e=n.isPending,t=n.learners,i=n.classroom,o=(0,y.Z)(n,["isPending","learners","classroom"]),s=(0,r.Z)((0,l.$)(),1)[0],c=i?(0,Jt.p)(i["@id"]):void 0,d=(0,qt.Z)(),f=(0,u.useState)(!1),m=f[0],p=f[1],h=(0,u.useState)(null),x=h[0],b=h[1],Z=function(){var n=(0,Dt.Z)(Et().mark((function n(){var e,t,r,o,a,s;return Et().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p(!0),n.prev=1,e=new Date,t="".concat(e.toLocaleDateString().split("/").join(""),"-").concat(null===i||void 0===i?void 0:i.title.toLowerCase().split(" ").join("-"),"-balance-sheet.csv"),n.next=6,d.get("/classrooms/".concat(c,"/balance-sheet.csv"));case 6:r=n.sent,o=r.data,a=URL.createObjectURL(new Blob([o])),(s=document.createElement("a")).href=a,s.download=t,s.click(),URL.revokeObjectURL(a),p(!1),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(1),b(n.t0),p(!1);case 21:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(){return n.apply(this,arguments)}}();return(0,a.jsxs)(R.Z,(0,j.Z)((0,C.Z)({},o),{title:e?(0,a.jsx)(A.Qr,{width:"40%"}):s("page.classrooms.home.learners.title"),helper:i&&!e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.od,{feature:g.L0.CLASSROOM_UPDATE_LEARNERS,children:(0,a.jsx)(st(),{href:v.AW.CLASSROOMS_LEARNERS,passHref:!0,children:(0,a.jsxs)(nr.ZP,{outlined:!0,variant:"primary",as:"a",title:s("component.classroomLearnersCard.editButton.title",{classroomTitle:i.title}),children:[s("component.classroomLearnersCard.editButton.text")," ",(0,a.jsx)(E.z,{})]})})}),(0,a.jsx)(g.od,{feature:g.L0.CLASSROOM_DOWNLOAD_BALANCE_SHEET,children:(0,a.jsxs)(nr.ZP,{outlined:!0,variant:"primary",onClick:Z,loading:m,children:[s("component.classroomLearnersCard.downloadButton.text"),m?(0,a.jsx)(E.gb,{}):(0,a.jsx)(E.UW,{})]})})]}),children:[(0,a.jsx)(oi,{isPending:e,learners:t}),(0,a.jsx)(Rt.Z,{error:x,dissmiss:function(){return b(null)}})]}))})).withConfig({componentId:"sc-cb25bc67-0"})(ai(),nr.ZP),ci=si,ui=t(64508),li=t(3676),di=t(94533),fi=t(19973),mi=t(99222),pi=t(20132);function hi(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: ",";\n"]);return hi=function(){return n},n}function gi(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ",";\n    border: 2px solid ",";\n    height: 450px;\n    border-radius: ",";\n"]);return gi=function(){return n},n}function vi(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n\n    "," {\n        flex: 1;\n        min-height: 0;\n        height: 448px;\n\n        border-radius: ",";\n        margin-right: ",";\n    }\n"]);return vi=function(){return n},n}function xi(){var n=(0,i.Z)([""]);return xi=function(){return n},n}var bi,Zi=m.ZP.div.withConfig({componentId:"sc-998487be-0"})(hi(),(function(n){return n.theme.spacing[7]})),Ci=m.ZP.div.withConfig({componentId:"sc-998487be-1"})(gi(),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.palette.grey.lightest}),(function(n){return n.theme.shape.borderRadius.large})),ji=(0,m.ZP)((function(n){var e=n.className;return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(A.OG,{}),(0,a.jsx)(A.OG,{}),(0,a.jsx)(A.OG,{})]})})).withConfig({componentId:"sc-998487be-2"})(vi(),A.OG,(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.spacing[5]})),yi=function(){var n=(0,r.Z)((0,l.$)(),1)[0];return(0,g.o_)()([g.L0.TOPICS_WORK_SUBMIT,g.L0.TOPICS_WORK_EVAL])?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.od,{feature:g.L0.BRIEFS_CREATE,children:(0,a.jsx)(st(),{href:v.AW.BRIEFS_CREATE,passHref:!0,children:(0,a.jsxs)(nr.ZP,{as:"a",filled:!0,variant:"primary",children:[n("page.briefs.create.title"),(0,a.jsx)(E.v3,{})]})})}),(0,a.jsx)(g.od,{feature:g.L0.TOPICS_WORK_SUBMIT,children:(0,a.jsx)(st(),{href:v.AW.TOPICS,passHref:!0,children:(0,a.jsx)(nr.ZP,{as:"a",filled:!0,variant:"primary",children:n("page.classrooms.home.briefs.goToAllMyTopics")})})})]}):(0,a.jsx)(st(),{href:v.AW.BRIEFS_EXPLORE,passHref:!0,children:(0,a.jsx)(nr.ZP,{as:"a",filled:!0,variant:"primary",children:n("page.classrooms.home.briefs.goToAllClassroomBriefsLabel")})})},Si=(0,m.ZP)((function(n){var e=(0,u.useState)(""),t=e[0],i=e[1],o=(0,u.useState)(""),s=o[0],c=o[1],d=(0,r.Z)((0,l.$)(),1)[0],f=(0,h.OT)().activeClassroom,m=(0,p.z)(),x=(0,g.o_)(),b=x(g.L0.BRIEFS_CREATE),Z=(0,ui.aM)(["/briefs",{method:"GET",url:"/briefs",params:{"classrooms.uuid":x(g.L0.CLASSROOM_CREATE)?f&&(0,Jt.p)(f["@id"]):void 0,"topics.learner.uuid":x(g.L0.TOPICS_WORK_SUBMIT)?(0,Jt.p)(m.user["@id"]):void 0,"topics.classroom.uuid":x(g.L0.TOPICS_WORK_SUBMIT)?f&&(0,Jt.p)(f["@id"]):void 0,"status[]":"validated","order[createdAt]":"desc",title:s,perPage:5}}]),y=Z.data,S=Z.isLoading,w=Z.error,D=Z.refetch;if(w)throw(null===w||void 0===w?void 0:w.response)?new fi.Z(null===w||void 0===w?void 0:w.response):new mi.Z(w);var I=y?y["hydra:member"]:[];return(0,a.jsxs)(R.Z,(0,j.Z)((0,C.Z)({},n),{title:d("page.classrooms.home.briefs.title"),helper:(0,a.jsx)(yi,{}),children:[(0,a.jsxs)(Zi,{children:[(0,a.jsx)(di.Z,{searchFieldId:"home-card-brief-filtering",onSubmit:function(){return c(t)},onReset:function(){i(""),c("")},label:d("component.home.MyBriefsCard.search.label"),value:t,onChange:i,srOnly:d("component.home.MyBriefsCard.search.sr-only")}),b&&(0,a.jsx)(st(),{href:v.AW.BRIEFS,passHref:!0,children:(0,a.jsx)(nr.ZP,{as:"a",variant:"primary",outlined:!0,children:d("page.classrooms.home.briefs.goToAllMyBriefsLabel")})})]}),S?(0,a.jsx)(ji,{}):I.length>0?(0,a.jsxs)(Ae,{children:[I.map((function(n){return(0,a.jsx)(pi.Z,{brief:n,onRefetchBriefs:D},n["@id"])})),(0,a.jsx)(Ci,{children:(0,a.jsx)(st(),{href:v.AW.BRIEFS,passHref:!0,children:(0,a.jsx)(nr.ZP,{outlined:!0,as:"a",variant:"primary",children:d("page.classrooms.home.briefs.goToAllMyBriefsLabel")})})})]}):(0,a.jsx)(li.Z,{children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.xv,{children:d("component.briefs.BriefListView.noBriefCallToActionAsTrainer")})," ",(0,a.jsx)("div",{children:(0,a.jsx)(st(),{href:v.AW.BRIEFS_CREATE,passHref:!0,children:(0,a.jsxs)(nr.ZP,{filled:!0,variant:"primary",as:"a",children:[d("component.briefs.BriefListView.createBrief"),(0,a.jsx)(E.NM,{})]})})})]}):(0,a.jsx)(O.xv,{children:d("component.briefs.BriefListView.noBriefCallToAction")})})]}))})).withConfig({componentId:"sc-998487be-3"})(xi()),wi=t(14924),Di=t(313),Ii=t(31387),Ei=t(84441),Pi=t(34765),ki=t(72785),Li=t(1463),Ri=function(n){var e=n.onCancel,t=n.onConfirm,r=n.isLoading,i=n.isOpen,o=n.text,s=n.confirmLabel,c=n.cancelLabel;return(0,a.jsx)(Li.ZP,{type:Li.kQ.CONFIRM,messageType:Li.wt.INFO,visible:!!i,text:o,onClickConfirm:t,onClickCancel:e,isConfirmLoading:r,confirmText:s,cancelText:c})},Ti=t(95592),Ai=t(24143),Oi=t(86349),Ni=t(82532),Mi=t(72190);!function(n){n.DISPLAY="displayed",n.HIDDEN="hidden"}(bi||(bi={}));var Bi=bi,_i=t(54523),zi=t(70750),Fi=t(56790),Ui=t(53381);function Gi(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    width: 100%;\n"]);return Gi=function(){return n},n}function Vi(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 28px 24px;\n    width: 100%;\n    border: 1px solid ",";\n    border-radius: ",";\n    background-color: ",";\n"]);return Vi=function(){return n},n}function Hi(){var n=(0,i.Z)(["\n    margin-right: ",";\n    color: ",";\n    text-decoration: ",";\n    &:hover {\n        text-decoration: underline;\n    }\n"]);return Hi=function(){return n},n}function Wi(){var n=(0,i.Z)(["\n    display: inline-flex;\n    gap: ",";\n    color: ",";\n    font-weight: 600;\n"]);return Wi=function(){return n},n}function $i(){var n=(0,i.Z)(['\n    &:not(:last-child)::after {\n        content: ",";\n    }\n']);return $i=function(){return n},n}function Ki(){var n=(0,i.Z)(["\n    display: flex;\n    justify-content: space-between;\n    gap: 4px;\n    max-height: 52px;\n    padding-left: 0;\n    margin: 0;\n"]);return Ki=function(){return n},n}function Yi(){var n=(0,i.Z)(["\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: 18px;\n    background: ",";\n    border: 1px solid ",";\n    border-radius: 56px;\n"]);return Yi=function(){return n},n}function Qi(){var n=(0,i.Z)(["\n    font-size: 12px;\n    font-weight: 600;\n"]);return Qi=function(){return n},n}function Xi(){var n=(0,i.Z)(["\n    display: flex;\n    gap: ",";\n"]);return Xi=function(){return n},n}function qi(){var n=(0,i.Z)(["\n    --icon-color: ",";\n    display: inline-flex;\n    align-items: center;\n    height: 32px;\n    width: 32px;\n    padding: 4px;\n    background: ",";\n    border-radius: 9999px;\n    border-color: transparent;\n    transition: all 200ms ease-in-out;\n    cursor: pointer;\n    &:hover,\n    &:focus {\n        background: ",";\n        --icon-color: ",";\n    }\n"]);return qi=function(){return n},n}function Ji(){var n=(0,i.Z)(["\n    --icon-color: ",";\n    height: 24px;\n    width: 24px;\n    &:hover {\n        --icon-color: ",";\n    }\n"]);return Ji=function(){return n},n}function no(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n"]);return no=function(){return n},n}var eo=m.ZP.div.withConfig({componentId:"sc-50a89c76-0"})(Gi()),to=m.ZP.div.withConfig({componentId:"sc-50a89c76-1"})(Vi(),(function(n){var e=n.theme,t=n.isDragging;return e.palette.purple[t?"light":"lighter"]}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){var e=n.theme;return n.isDragging?e.palette.purple.lighter:e.palette.white.base})),ro=(0,m.ZP)(O.xv).withConfig({componentId:"sc-50a89c76-2"})(Hi(),(function(n){return n.theme.spacing[7]}),(function(n){return n.theme.palette.purple.base}),(function(n){return n.isDragging?"underline":"none"})),io=(0,m.ZP)(O.xv).withConfig({componentId:"sc-50a89c76-3"})(Wi(),(function(n){return n.theme.spacing[2]}),(function(n){return n.theme.palette.grey.base})),oo=m.ZP.span.withConfig({componentId:"sc-50a89c76-4"})($i()),ao=m.ZP.ul.withConfig({componentId:"sc-50a89c76-5"})(Ki()),so=m.ZP.li.withConfig({componentId:"sc-50a89c76-6"})(Yi(),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.palette.yellow.base})),co=(0,m.ZP)(O.xv).withConfig({componentId:"sc-50a89c76-7"})(Qi()),uo=m.ZP.div.withConfig({componentId:"sc-50a89c76-8"})(Xi(),(function(n){return n.theme.spacing[6]})),lo=m.ZP.a.withConfig({componentId:"sc-50a89c76-9"})(qi(),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.palette.white.base})),fo=(0,m.ZP)(E.A6).withConfig({componentId:"sc-50a89c76-10"})(Ji(),(function(n){var e=n.theme;return n.isDragging?e.palette.purple.base:e.palette.grey.lighter}),(function(n){return n.theme.palette.purple.base})),mo=(0,m.ZP)((function(n){var e=n.educationalBrief,t=n.trainers,i=n.index,o=n.className,s=n.handleDelete,c=(0,r.Z)((0,l.$)(),1)[0],u=(0,p.z)().user,d=(0,g.o_)(),f=e.uuid,m=e.brief,h=m.title,x=m.computedSkills,b=m["@id"],Z=m.frameworks,y=m.createdBy,S=m.coeditors,w=y===u["@id"],D=S.findIndex((function(n){return n===u["@id"]}))>-1,I=!!t&&t.findIndex((function(n){return n===u["@id"]}))>-1,P={canEdit:(w||D)&&d(g.L0.BRIEFS_CREATE),canDelete:w&&d(g.L0.EDUCATIONAL_BRIEF_DELETE),canDrag:I},k=P.canEdit,L=P.canDelete,R=P.canDrag,T=(0,Jt.p)(b);return(0,a.jsx)(Ii.E.div,{exit:{opacity:0,transition:{ease:"easeOut",duration:.5,delay:.1}},id:f,children:(0,a.jsx)(At._l,{draggableId:f,index:i,isDragDisabled:!R,children:function(n,e){return(0,a.jsxs)(eo,(0,j.Z)((0,C.Z)({className:o,ref:n.innerRef},n.draggableProps),{children:[R&&(0,a.jsx)("div",(0,j.Z)((0,C.Z)({},n.dragHandleProps),{children:(0,a.jsx)(fo,{isDragging:e.isDragging})})),(0,a.jsxs)(to,{isDragging:e.isDragging,children:[(0,a.jsx)(st(),{href:(0,v.sX)(v.AW.BRIEFS_DETAILS,{id:T}),passHref:!0,children:(0,a.jsx)(ro,{as:"a",variant:"inline-link",lines:2,isDragging:e.isDragging,children:h})}),(0,a.jsxs)(io,{children:[x.map((function(n,e){var t=n.code,r=n["@id"];if(e<=3&&t)return(0,a.jsx)(oo,{children:t},r)})),x.length>4&&(0,a.jsx)(O.xv,{children:"+ ".concat(x.length-4," autres")})]}),(0,a.jsxs)(ao,{children:[Z.map((function(n,e){if(0===e)return(0,a.jsx)(so,{children:(0,a.jsx)(co,{variant:"p",children:n.title})},n["@id"])})),Z.length>1&&(0,a.jsx)(so,{children:(0,a.jsx)(co,{variant:"p",children:"+ ".concat(Z.length-1)})})]}),(k||L)&&(0,a.jsxs)(uo,{children:[k&&(0,a.jsx)(st(),{href:(0,v.sX)(v.AW.BRIEFS_EDIT,{id:T}),passHref:!0,children:(0,a.jsxs)(lo,{children:[(0,a.jsx)(E.z,{}),(0,a.jsx)(O.ys,{children:c("component.home.PedagogicalScenarioCard.editBrief",{briefTitle:h})})]})}),L&&(0,a.jsxs)(lo,{as:"button",type:"button",onClick:function(){return s(f)},children:[(0,a.jsx)(E.ZN,{}),(0,a.jsx)(O.ys,{children:c("component.home.PedagogicalScenarioCard.deleteBrief",{briefTitle:h})})]})]})]})]}))}},f)})})).withConfig({componentId:"sc-50a89c76-11"})(no());function po(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    max-width: 589px;\n    margin: 0 auto;\n    padding-bottom: 70px;\n    text-align: center;\n"]);return po=function(){return n},n}function ho(){var n=(0,i.Z)(["\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: 16px;\n    padding: 0;\n    margin: 0;\n"]);return ho=function(){return n},n}function go(){var n=(0,i.Z)(['\n    display: flex;\n    align-items: center;\n    position: relative;\n    &::before,\n    &::after {\n        content: "";\n        position: absolute;\n        display: none;\n        height: 4px;\n        width: 4px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: ',";\n        border-radius: 9999px;\n    }\n    &:not(:first-of-type)::before {\n        display: block;\n        bottom: calc(100% - 7px);\n    }\n    &:not(:last-of-type)::after {\n        display: block;\n        top: calc(100% - 7px);\n    }\n"]);return go=function(){return n},n}function vo(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 32px;\n    width: 32px;\n    color: ",";\n    background: ",";\n    border: 1px solid\n        ",";\n    border-radius: 9999px;\n"]);return vo=function(){return n},n}function xo(){var n=(0,i.Z)(["\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    gap: ",";\n"]);return xo=function(){return n},n}function bo(){var n=(0,i.Z)(["\n    display: flex;\n    gap: ",";\n    padding-left: 0;\n"]);return bo=function(){return n},n}function Zo(){var n=(0,i.Z)(["\n    margin-bottom: 55px;\n"]);return Zo=function(){return n},n}function Co(){var n=(0,i.Z)(["\n    align-items: flex-start;\n    padding-top: ",";\n    background-color: rgba(0, 0, 0, 0.2);\n    backdrop-filter: blur(22.5px);\n    text-align: center;\n    > div {\n        min-width: 768px;\n    }\n"]);return Co=function(){return n},n}function jo(){var n=(0,i.Z)(["\n    margin-top: ",";\n"]);return jo=function(){return n},n}function yo(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: ",";\n    margin-top: ",";\n"]);return yo=function(){return n},n}function So(){var n=(0,i.Z)(["\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    border: none;\n    background: none;\n    outline: none;\n    cursor: pointer;\n    &:hover {\n        --icon-color: ",";\n    }\n"]);return So=function(){return n},n}function wo(){var n=(0,i.Z)(["\n    padding-bottom: ",";\n"]);return wo=function(){return n},n}var Do=m.ZP.div.withConfig({componentId:"sc-2b7468d6-0"})(po()),Io=m.ZP.ul.withConfig({componentId:"sc-2b7468d6-1"})(ho()),Eo=(0,m.ZP)(Ii.E.li).withConfig({componentId:"sc-2b7468d6-2"})(go(),(function(n){return n.theme.palette.grey.lighter})),Po=(0,m.ZP)(zi.Z).withConfig({componentId:"sc-2b7468d6-3"})(vo(),(function(n){var e=n.theme;return n.isDragging?e.palette.purple.base:e.palette.grey.base}),(function(n){var e=n.theme;return n.isDragging?e.palette.white.base:e.palette.grey.lightest}),(function(n){var e=n.theme;return n.isDragging?e.palette.purple.base:e.palette.grey.lightest})),ko=m.ZP.div.withConfig({componentId:"sc-2b7468d6-4"})(xo(),(function(n){return n.theme.spacing[5]})),Lo=m.ZP.div.withConfig({componentId:"sc-2b7468d6-5"})(bo(),(function(n){return n.theme.spacing[5]})),Ro=(0,m.ZP)(zi.Z).withConfig({componentId:"sc-2b7468d6-6"})(Zo()),To=(0,m.ZP)(_i.Z).withConfig({componentId:"sc-2b7468d6-7"})(Co(),(function(n){return n.theme.spacing[5]})),Ao=(0,m.ZP)(zi.Z).withConfig({componentId:"sc-2b7468d6-8"})(jo(),(function(n){return n.theme.spacing[10]})),Oo=m.ZP.div.withConfig({componentId:"sc-2b7468d6-9"})(yo(),(function(n){return n.theme.spacing[7]}),(function(n){return n.theme.spacing[10]})),No=m.ZP.button.withConfig({componentId:"sc-2b7468d6-10"})(So(),(function(n){return n.theme.palette.purple.base})),Mo=(0,m.ZP)((function(n){var e=n.educationalBriefs,t=n.educationalScenarioItemId,i=n.className,s=n.handleBriefDelete,c=n.handleAddBrief,d=n.canCreateBrief,f=n.classroom,m=n.isClassroomTrainer,p=n.refetchPedagogicalScenarioItem,h=(0,r.Z)((0,l.$)(),1)[0],v=(0,g.o_)(),x=(null!==f&&void 0!==f?f:{}).trainers,b=m&&v(g.L0.BRIEFS_CREATE),Z=(0,u.useState)(e),y=Z[0],S=Z[1],w=(0,u.useState)(""),D=w[0],I=w[1],P=(0,u.useState)(!1),L=P[0],R=P[1],T=(0,u.useState)(void 0),A=T[0],O=T[1],N=(0,u.useState)(void 0),M=N[0],B=N[1];(0,u.useEffect)((function(){S(e)}),[e]);var _=function(n){var e=(0,Fi.h_)(),t=(0,u.useMemo)((function(){return function(n){return function(e){var t=e.payload,r=e.educationalBriefId;return n.put("educational_briefs/".concat(r),t)}}(e)}),[e]),i=(0,r.Z)((0,ui.Db)(t,n),2);return{updateEducationalBrief:i[0],isLoading:i[1].isLoading}}({onError:function(n){R(!1),B(n.response),S(e)}}).updateEducationalBrief,z=(0,Ui.V)({onSuccess:function(){return p()},onError:function(n){B(n.response),S(e)}}).updateEducationalScenarioItem,F=function(n){O(n),R(!0)},U=function(){return R(!1)};return(null===y||void 0===y?void 0:y.length)?(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)(At.Z5,{onDragEnd:function(n){if(I(""),n.destination&&n.destination.index!==n.source.index){var e=function(n,e,t){if(n){var i=(0,o.Z)(n),a=(0,r.Z)(i.splice(e,1),1)[0];return i.splice(t,0,a),i}return[]}(y,n.source.index,n.destination.index),i=e.map((function(n){return n["@id"]}));z({payload:{educationalBriefsToSort:i},educationalScenarioItemId:t}),S(e)}},onDragStart:function(n){return I(n.draggableId)},children:(0,a.jsx)(At.bK,{droppableId:"briefList",children:function(n){return(0,a.jsxs)(Lo,(0,j.Z)((0,C.Z)({ref:n.innerRef},n.droppableProps),{children:[(0,a.jsx)(Io,{children:(0,a.jsx)(Ei.M,{initial:!1,presenceAffectsLayout:!0,children:y.map((function(n,e){return(0,a.jsx)(Eo,{exit:{opacity:0,transition:{ease:"easeOut",duration:.5,delay:.1}},children:(0,a.jsx)(Po,{variant:"p",isDragging:D===n.uuid,children:e+1})},n.uuid)}))})}),(0,a.jsxs)(ko,{children:[(0,a.jsx)(Ei.M,{initial:!1,presenceAffectsLayout:!0,children:y.map((function(n,e){return(0,a.jsx)(mo,{educationalBrief:n,trainers:x,index:e,handleDelete:F},n.brief["@id"])}))}),n.placeholder]})]}))}})}),(0,a.jsxs)(To,{visible:L,children:[(0,a.jsx)(No,{type:"button",onClick:U,children:(0,a.jsx)(E.X1,{})}),(0,a.jsx)(Ao,{as:"h1",variant:"h4",children:h("component.home.PedagogicalScenarioCard.confirmDeleteBrief")}),(0,a.jsxs)(Oo,{children:[(0,a.jsx)(k.zx,{variant:"primary",onClick:U,children:h("component.home.PedagogicalScenarioCard.cancelDelete")}),(0,a.jsx)(k.zx,{variant:"primary",filled:!0,onClick:function(){if(A&&y){var n=y.find((function(n){return n.uuid===A}));if(n){var e=y.filter((function(n){return n.uuid!==A})),t=(0,j.Z)((0,C.Z)({},n),{status:Bi.HIDDEN});_({payload:t,educationalBriefId:A}),R(!1),S(e),s()}}},children:h("component.home.PedagogicalScenarioCard.acceptDelete")})]})]}),(0,a.jsx)(Rt.Z,{error:M,dissmiss:function(){return B(void 0)}})]}):(0,a.jsxs)(Do,{children:[(0,a.jsx)(Ro,{as:"h2",variant:"p",children:h("component.home.PedagogicalScenarioCard.".concat(b?"noBrief":"noBriefReadOnly"))}),d&&(0,a.jsx)(k.zx,{outlined:!0,variant:"primary",onClick:c,children:h("component.home.PedagogicalScenarioCard.createBrief")})]})})).withConfig({componentId:"sc-2b7468d6-11"})(wo(),(function(n){return n.theme.spacing[5]})),Bo=t(11699),_o=t(29497),zo=t(42034),Fo=t(85817),Uo=t(87536),Go=t(94150),Vo=t(61436),Ho=t(38431),Wo=t(24257),$o=t(69119),Ko=t(37042),Yo=t(92311),Qo=t(83894),Xo=t(83975),qo=t(30286),Jo=t(86927),na=t(64384),ea=t(85652);function ta(){var n=(0,i.Z)(["\n    width: 100%;\n\n    ","\n\n    .rdrMonth {\n        flex: 1;\n    }\n\n    .rdrMonthsHorizontal {\n        justify-content: space-around;\n    }\n\n    .rdrMonthName {\n        text-align: center;\n        ","\n        text-transform: lowercase;\n    }\n\n    .rdrWeekDays {\n        margin-bottom: ",";\n\n        .rdrWeekDay {\n            ","\n        }\n    }\n\n    .rdrDateDisplayWrapper {\n        background-color: ",";\n\n        .rdrDateDisplay {\n            margin: ",";\n        }\n    }\n\n    .rdrDateInput {\n        background-color: ",";\n        border: 1px solid ",";\n        border-radius: ",";\n        padding: ",";\n        text-align: left;\n\n        input {\n            height: auto;\n            ",'\n\n            &::before {\n                content: " ";\n                display: block;\n                background-image: url("/static/icons/calendar-icon.svg");\n                background-size: 24px 24px;\n                height: 24px;\n                width: 24px;\n            }\n        }\n    }\n\n    .rdrSelected,\n    .rdrInRange,\n    .rdrStartEdge,\n    .rdrEndEdge,\n    .rdrDayStartPreview,\n    .rdrDayInPreview,\n    .rdrDayEndPreview {\n        top: 2px;\n        bottom: 2px;\n    }\n\n    .rdrStartEdge {\n        border-top-left-radius: ',";\n        border-bottom-left-radius: ",";\n    }\n\n    .rdrEndEdge {\n        border-top-right-radius: ",";\n        border-bottom-right-radius: ",";\n    }\n\n    .rdrDayEndOfWeek,\n    .rdrDayEndOfMonth {\n        border-top-right-radius: ",";\n        border-bottom-right-radius: ",";\n\n        .rdrInRange,\n        .rdrDayInPreview {\n            border-top-right-radius: ",";\n            border-bottom-right-radius: ",";\n        }\n    }\n\n    .rdrDayStartOfWeek,\n    .rdrDayStartOfMonth {\n        border-top-left-radius: ",";\n        border-bottom-left-radius: ",";\n\n        .rdrInRange,\n        .rdrDayInPreview {\n            border-top-left-radius: ",";\n            border-bottom-left-radius: ",';\n        }\n    }\n\n    .rdrDayToday .rdrDayNumber span {\n        &:after {\n            content: "";\n            position: absolute;\n            bottom: 4px;\n            left: 50%;\n            transform: translate(-50%, 0);\n            width: 18px;\n            height: 2px;\n            border-radius: 2px;\n            background: ',";\n        }\n    }\n\n    .rdrDayHovered {\n        .rdrDayNumber {\n            background: ",";\n            border-radius: ",";\n            border: 0;\n            top: 0;\n            bottom: 0;\n            border-radius: ",";\n        }\n    }\n\n    .rdrDayInPreview {\n        background: ",";\n        border: 0;\n    }\n\n    .rdrDayStartPreview {\n        border-top-left-radius: ",";\n        border-bottom-left-radius: ",";\n        border: 0;\n    }\n\n    .rdrDayEndPreview {\n        border-top-right-radius: ",";\n        border-bottom-right-radius: ",";\n        border: 0;\n    }\n\n    .rdrDayEndOfWeek .rdrStartEdge {\n        border-top-right-radius: ",";\n        border-bottom-right-radius: ",";\n    }\n\n    .rdrNextPrevButton,\n    .rdrPprevButton {\n        border-radius: 50%;\n    }\n"]);return ta=function(){return n},n}function ra(){var n=(0,i.Z)(["\n    display: flex;\n    align-items: flex-start;\n    flex: 1;\n    gap: ",";\n    height: 96px;\n"]);return ra=function(){return n},n}function ia(){var n=(0,i.Z)(["\n    display: flex;\n    gap: ",";\n\n    "," {\n        flex: 1;\n\n        & + "," {\n            margin-left: ",';\n        }\n\n        input {\n            padding-left: 44px;\n            background: url("/static/icons/calendar-icon.svg") no-repeat scroll 24px 24px;\n            background-position: 12px 50%;\n        }\n    }\n']);return ia=function(){return n},n}function oa(){var n=(0,i.Z)(["\n    flex: 1;\n    box-shadow: inset 0px 0px 0px 2px ",";\n    border-radius: ",";\n    margin-bottom: 6px;\n    padding: ",";\n    margin-top: 30px;\n"]);return oa=function(){return n},n}function aa(){var n=(0,i.Z)(["\n    span {\n        color: ",";\n    }\n"]);return aa=function(){return n},n}function sa(){var n=(0,i.Z)(["\n    height: 475px;\n    width: 100%;\n"]);return sa=function(){return n},n}function ca(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n\n    "," {\n        margin-right: 0;\n        margin-left: auto;\n    }\n"]);return ca=function(){return n},n}var ua=(0,m.ZP)(qo.C0).withConfig({componentId:"sc-e24d8479-0"})(ta(),(function(n){return n.theme.typography.p}),(function(n){return n.theme.typography.h4}),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.typography.label}),(function(n){return n.theme.palette.white.base}),(function(n){var e=n.theme;return"".concat(e.spacing[4]," 0")}),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.typography.p}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.palette.purple.lighter}),(function(n){return n.theme.palette.purple.lighter}),(function(n){return n.theme.shape.borderRadius.large}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){var e=n.theme;return(0,De.DZ)(.7,e.palette.purple.base)}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.shape.borderRadius.medium})),la=m.ZP.div.withConfig({componentId:"sc-e24d8479-1"})(ra(),(function(n){return n.theme.spacing[3]})),da=m.ZP.div.withConfig({componentId:"sc-e24d8479-2"})(ia(),(function(n){return n.theme.spacing[4]}),Jo.Z,Jo.Z,(function(n){return n.theme.spacing[6]})),fa=m.ZP.div.withConfig({componentId:"sc-e24d8479-3"})(oa(),(function(n){return n.theme.palette.purple.lighter}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.spacing[1]})),ma=(0,m.ZP)((function(n){var e=n.title,t=n.subtitle,r=n.className;return(0,a.jsx)("div",{className:r,children:(0,a.jsxs)(O.xv,{variant:"subheading",children:[e,(0,a.jsxs)(O.xv,{as:"span",variant:"p",children:[" ","- ",t]})]})})})).withConfig({componentId:"sc-e24d8479-4"})(aa(),(function(n){return n.theme.palette.grey.base})),pa=(0,m.ZP)(A.OG).withConfig({componentId:"sc-e24d8479-5"})(sa()),ha={en:{locale:Xo.default,format:"yyyy-MM-dd"},fr:{locale:ur.Z,format:"dd-MM-yyyy"},es:{locale:lr.Z,format:"dd-MM-yyyy"}},ga=function(n){var e,t=n.date,i=n.onChange,o=n.classroomDateRange,a=(0,r.Z)((0,l.$)(),1)[0],s=o.classroomStartDate,c=o.classroomEndDate,d=null!==(e=ha[na.ZP.language])&&void 0!==e?e:ha.fr,f=t&&(0,Vo.default)(new Date(t))?(0,En.default)(t,d.format,{locale:d.locale}):"",m=(0,u.useMemo)((function(){return function(n){var e=function(n){var e=(0,zo.default)(n,"yyyy-MM-dd'T'HH:mm:ss",new Date);return(0,En.default)(new Date(e),d.format,{locale:d.locale})},t={localClassroomStartDate:e(s),localClassroomEndDate:e(c)},r=t.localClassroomStartDate,i=t.localClassroomEndDate;return(0,Ho.Z)(n,d.format,{locale:d.locale})?(0,Wo.default)((0,zo.default)(n,d.format,new Date,{locale:d.locale}),{start:(0,zo.default)(r,d.format,new Date,{locale:d.locale}),end:(0,zo.default)(i,d.format,new Date,{locale:d.locale})})?null:a("component.home.PedagogicalScenarioCard.outOfRange"):a("component.home.PedagogicalScenarioCard.invalidDateFormat")}}),[a,s,c,d]),p=(0,u.useState)(f),h=p[0],g=p[1],v=(0,u.useState)(m(f)),x=v[0],b=v[1];(0,u.useEffect)((function(){g(f),b(m(f))}),[f,m]);return{value:h,onChange:function(n){g(n);var e=m(n);b(e),e||i((0,zo.default)(n,d.format,new Date,{locale:d.locale}))},error:x}},va=(0,m.ZP)((function(n){var e,t=n.range,i=n.onChange,o=n.className,s=n.isLoading,c=void 0!==s&&s,d=n.classroomStartDate,f=n.classroomEndDate,m=n.getUserInputValidation,p=(0,y.Z)(n,["range","onChange","className","isLoading","classroomStartDate","classroomEndDate","getUserInputValidation"]),h=(0,r.Z)((0,l.$)(),1)[0],g=ga({date:null===t||void 0===t?void 0:t.startDate,onChange:function(n){i((0,j.Z)((0,C.Z)({},t),{startDate:n}))},classroomDateRange:{classroomStartDate:d,classroomEndDate:f}}),v=ga({date:null===t||void 0===t?void 0:t.endDate,onChange:function(n){i((0,j.Z)((0,C.Z)({},t),{endDate:n}))},classroomDateRange:{classroomStartDate:d,classroomEndDate:f}}),x=ha[null!==(e=na.ZP.language)&&void 0!==e?e:"fr"],b=[{id:Sa.MORNING,label:h("component.home.PedagogicalScenarioCard.dayPeriod.morning")},{id:Sa.MIDDAY,label:h("component.home.PedagogicalScenarioCard.dayPeriod.midday")}],Z=[{id:Sa.MIDDAY,label:h("component.home.PedagogicalScenarioCard.dayPeriod.midday")},{id:Sa.NIGHT,label:h("component.home.PedagogicalScenarioCard.dayPeriod.night")}];return(0,u.useEffect)((function(){g.error||v.error?m(!1):m(!0)}),[g,v]),(0,a.jsx)("div",{className:o,children:c?(0,a.jsx)(pa,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(da,{children:[(0,a.jsxs)(la,{children:[(0,a.jsx)(Jo.Z,{type:"text",label:(0,a.jsx)(ma,{title:h("component.shared.DatePicker.startDateLabel"),subtitle:h("component.home.PedagogicalScenarioCard.datePickerInputeDateFormat",{format:x.format})}),placeholder:h("component.shared.DatePicker.startPlaceholder"),value:g.value,onChange:function(n){var e=n.currentTarget;g.onChange(e.value)},feedback:g.error,status:g.error?ea.Xz.ERROR:ea.Xz.DEFAULT}),(0,a.jsx)(fa,{children:(0,a.jsx)(Ln.Z,{variant:"primary",orientation:"horizontal",onChange:function(n){(null===t||void 0===t?void 0:t.startDate)&&(n===Sa.MORNING?i((0,j.Z)((0,C.Z)({},t),{startDate:(0,$o.default)(t.startDate)})):i((0,j.Z)((0,C.Z)({},t),{startDate:(0,Ko.Z)(t.startDate,12)})))},value:(null===t||void 0===t?void 0:t.startDate)&&(12===(0,Fo.Z)(null===t||void 0===t?void 0:t.startDate)?Sa.MIDDAY:Sa.MORNING),title:h("component.home.PedagogicalScenarioCard.Timeline.Toolbar.scale.title"),options:b})})]}),(0,a.jsxs)(la,{children:[(0,a.jsx)(Jo.Z,{type:"text",label:(0,a.jsx)(ma,{title:h("component.shared.DatePicker.endDateLabel"),subtitle:h("component.home.PedagogicalScenarioCard.datePickerInputeDateFormat",{format:x.format})}),placeholder:h("component.shared.DatePicker.endPlaceholder"),value:v.value,onChange:function(n){var e=n.currentTarget;v.onChange(e.value)},feedback:v.error,status:v.error?ea.Xz.ERROR:ea.Xz.DEFAULT}),(0,a.jsx)(fa,{children:(0,a.jsx)(Ln.Z,{variant:"primary",orientation:"horizontal",onChange:function(n){(null===t||void 0===t?void 0:t.endDate)&&(n===Sa.MIDDAY?i((0,j.Z)((0,C.Z)({},t),{endDate:(0,Yo.Z)(t.endDate,{hours:11,minutes:59,seconds:59})})):i((0,j.Z)((0,C.Z)({},t),{endDate:(0,Qo.default)(t.endDate)})))},value:(null===t||void 0===t?void 0:t.endDate)&&((0,Fo.Z)(null===t||void 0===t?void 0:t.endDate)<=11?Sa.MIDDAY:Sa.NIGHT),title:h("component.home.PedagogicalScenarioCard.Timeline.Toolbar.scale.title"),options:Z})})]})]}),(0,a.jsx)(ua,(0,j.Z)((0,C.Z)({},p),{ranges:(null===t||void 0===t?void 0:t.startDate)||(null===t||void 0===t?void 0:t.endDate)?[(0,C.Z)({},t)]:[(0,j.Z)((0,C.Z)({},t),{startDate:new Date,endDate:new Date})],onChange:function(n){if(null===t||void 0===t?void 0:t.key){var e=n[t.key],r=(0,Fo.Z)((0,zo.default)(g.value,x.format,new Date)),o=(0,Fo.Z)((0,zo.default)(v.value,x.format,new Date));i((0,j.Z)((0,C.Z)({},e),{startDate:e.startDate?(0,Yo.Z)(e.startDate,{hours:r}):new Date,endDate:e.endDate?(0,Yo.Z)(null===e||void 0===e?void 0:e.endDate,{hours:o>0?o:23,minutes:o>0?o:59,seconds:o>0?o:59}):new Date}))}},months:2,direction:"horizontal",rangeColors:[Hn.Z.purple.base],monthDisplayFormat:"MMMM",weekdayDisplayFormat:"EEEEE",weekStartsOn:1,locale:x.locale,dateDisplayFormat:x.format,showDateDisplay:!1,endDatePlaceholder:h("component.shared.DatePicker.endPlaceholder"),minDate:new Date(d),maxDate:new Date(f)}))]})})})).withConfig({componentId:"sc-e24d8479-6"})(ca(),k.zx);function xa(){var n=(0,i.Z)(["\n    --icon-color: ",";\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    padding: 0;\n    gap: ",";\n    width: fit-content;\n    height: 18px;\n    background: none;\n    position: relative;\n    border: 0;\n    color: ",';\n\n    &:hover {\n        cursor: pointer;\n    }\n\n    &:after {\n        content: "";\n        height: 1px;\n        width: 100%;\n        position: absolute;\n        bottom: 0;\n        background: ',";\n    }\n"]);return xa=function(){return n},n}function ba(){var n=(0,i.Z)(["\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: ",";\n    padding: 0;\n    font-size: 12px;\n    line-height: 16px;\n"]);return ba=function(){return n},n}function Za(){var n=(0,i.Z)(["\n    position: absolute;\n    width: 100%;\n    max-width: 1058px;\n    top: ",";\n    left: ",";\n    padding: 1rem;\n    background: ",";\n    box-shadow: 0px 12px 36px rgba(0, 0, 0, 0.08);\n    border-radius: ",";\n    z-index: ",";\n    box-sizing: border-box;\n"]);return Za=function(){return n},n}function Ca(){var n=(0,i.Z)(['\n    &:after {\n        content: "";\n        position: absolute;\n        height: 385px;\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        background: rgba(255, 255, 255, 0.6);\n        z-index: ',";\n    }\n"]);return Ca=function(){return n},n}function ja(){var n=(0,i.Z)(["\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n"]);return ja=function(){return n},n}function ya(){var n=(0,i.Z)(["\n    color: ",";\n"]);return ya=function(){return n},n}var Sa,wa=m.ZP.button.withConfig({componentId:"sc-485c0a0b-0"})(xa(),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.spacing[6]}),(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.palette.grey.base})),Da=m.ZP.span.withConfig({componentId:"sc-485c0a0b-1"})(ba(),(function(n){return n.theme.spacing[3]})),Ia=(0,m.ZP)(Ii.E.div).withConfig({componentId:"sc-485c0a0b-2"})(Za(),(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.zIndex.overlay})),Ea=(0,m.ZP)(Ii.E.div).withConfig({componentId:"sc-485c0a0b-3"})(Ca(),(function(n){return n.theme.zIndex.overlay})),Pa=m.ZP.div.withConfig({componentId:"sc-485c0a0b-4"})(ja()),ka=(0,m.ZP)(O.xv).withConfig({componentId:"sc-485c0a0b-5"})(ya(),(function(n){return n.theme.palette.red.base}));!function(n){n.MORNING="morning",n.MIDDAY="midday",n.NIGHT="night"}(Sa||(Sa={}));var La=function(n){var e=n.currentTab,t=n.targetTab,i=n.isClassroomTrainer,o=n.startDate,s=n.endDate,c=n.educationalScenarioItemId,d=n.educationalScenarioItems,f=n.refreshTimeline,m=n.refetchPedagogicalScenarioItem,p=n.setTimelineStartDate,h=n.setTimelineScale,g=n.classroomStartDate,v=n.classroomEndDate,x=(0,r.Z)((0,l.$)(),1)[0],b=(0,u.useState)(!1),Z=b[0],C=b[1],j=(0,u.useState)(null),y=j[0],S=j[1],w=(0,u.useState)(!0),D=w[0],I=w[1],L=function(n){var e=(0,Fi.h_)(),t=(0,u.useMemo)((function(){return function(n){return function(e){var t=e.payload,r=e.educationalScenarioItemId;return n.put("/educational_scenario_items/".concat(r),t)}}(e)}),[e]),i=(0,r.Z)((0,ui.Db)(t,n),2);return{updatedEducationalScenarioItem:i[0],isLoading:i[1].isLoading}}({onSuccess:function(n){var e=n.data.startDate;f(),m(),h("day"),p(new Date(e)),C(!1)},onError:function(n){var e=n.response;return S(e)}}),R=L.updatedEducationalScenarioItem,T=L.isLoading,A=(0,u.useMemo)((function(){return{period:o&&s?{key:"professional-situation",startDate:(0,P.sG)(o),endDate:(0,P.sG)(s)}:void 0}}),[o,s]),O=(0,Uo.cI)({mode:"onChange"}),N=O.control,M=O.handleSubmit,B=O.clearErrors,_=O.reset,z=O.formState,F=z.isDirty,U=z.isSubmitting,G=z.errors,V=function(){C(!1),B()};(0,u.useEffect)((function(){V(),_(A)}),[c,d,A]);var H=function(n){return(0,Fo.Z)((0,zo.default)(n,"yyyy-MM-dd'T'HH:mm:ss",new Date))},W=function(n){I(n)};return(0,a.jsxs)(a.Fragment,{children:[i&&e===t&&o&&s&&(0,a.jsxs)(wa,{type:"button",onClick:function(){C(!0)},children:[(0,a.jsxs)(Da,{children:[(0,a.jsx)(E.f,{size:16}),x("component.home.PedagogicalScenarioCard.professionalSituationStartDate",{date:(0,P.sG)(o)}),(0,a.jsx)("span",{children:H(o)<12?x("component.home.PedagogicalScenarioCard.dayPeriod.".concat(Sa.MORNING)):x("component.home.PedagogicalScenarioCard.dayPeriod.".concat(Sa.MIDDAY))})]}),(0,a.jsx)(E.Eh,{direction:"right",size:16}),(0,a.jsxs)(Da,{children:[(0,a.jsx)(E.f,{size:16}),x("component.home.PedagogicalScenarioCard.professionalSituationEndDate",{date:(0,P.sG)(s)}),(0,a.jsx)("span",{children:H(s)<12?x("component.home.PedagogicalScenarioCard.dayPeriod.".concat(Sa.MIDDAY)):x("component.home.PedagogicalScenarioCard.dayPeriod.".concat(Sa.NIGHT))})]})]}),(0,a.jsx)(Ei.M,{children:Z&&o&&s&&(0,a.jsxs)("form",{onSubmit:M((function(n){var e=n.period,t=e.startDate,r=e.endDate,i={startDate:(0,Go.p)(t),endDate:(0,Go.p)(r)};R({payload:i,educationalScenarioItemId:c})})),children:[(0,a.jsx)(Ea,{initial:{visibility:"hidden"},animate:{visibility:"visible"},exit:{visibility:"hidden"}}),(0,a.jsxs)(Ia,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,a.jsx)(Uo.Qr,{name:"period",control:N,defaultValue:A.period,render:function(n){var e=n.field,t=e.onChange,r=e.value;return(0,a.jsx)(va,{onChange:t,range:r,getUserInputValidation:W,classroomStartDate:g,classroomEndDate:v})},rules:{validate:{isOverlapping:function(n){return function(n,e){var t=n.start,r=n.end;if((0,Bo.Z)(r,t)>1){var i=null===d||void 0===d?void 0:d.findIndex((function(n){var i=n.startDate,o=n.endDate,a=n.uuid;return(0,_o.Z)({start:t,end:r},{start:(0,zo.default)(i,"yyyy-MM-dd'T'HH:mm:ss",new Date),end:(0,zo.default)(o,"yyyy-MM-dd'T'HH:mm:ss",new Date)})&&a!==e}));return!i||-1===i}return!0}({start:n.startDate,end:n.endDate},c)},isValidInterval:function(n){return function(n){var e=n.start,t=n.end;return(0,Bo.Z)(t,e)>0&&(0,Di.default)(e,t)&&(0,er.default)(t,e)}({start:n.startDate,end:n.endDate})}}}}),(0,a.jsxs)(Pa,{children:[(0,a.jsxs)(k.zx,{type:"reset",variant:"primary",outlined:!1,onClick:V,disabled:T,children:[x("component.home.PedagogicalScenarioCard.closeDateModal"),(0,a.jsx)(E.X1,{})]}),(0,a.jsxs)(k.zx,{type:"submit",variant:"primary",filled:!0,disabled:!F||U||!!G.period||!D,children:[x("component.home.PedagogicalScenarioCard.confirmDateChange"),T?(0,a.jsx)(E.gb,{}):(0,a.jsx)(E.Jr,{})]})]}),G.period&&"isOverlapping"===G.period.type&&(0,a.jsx)(ka,{textAlign:"right",children:x("component.home.PedagogicalScenarioCard.overlapping")}),G.period&&"isValidInterval"===G.period.type&&(0,a.jsx)(ka,{textAlign:"right",children:x("component.home.PedagogicalScenarioCard.invalidInterval")})]})]})}),(0,a.jsx)(Rt.Z,{error:y,dissmiss:function(){return S(null)}})]})};function Ra(){var n=(0,i.Z)(["\n    margin-bottom: 18px;\n"]);return Ra=function(){return n},n}function Ta(){var n=(0,i.Z)(["\n    flex: 1;\n    overflow: auto;\n    padding: ",";\n    background: ",";\n    border-radius: ",";\n    h3 {\n        --text-color: ",";\n        margin-bottom: ",";\n    }\n"]);return Ta=function(){return n},n}function Aa(){var n=(0,i.Z)(["\n    display: flex;\n    height: 100%;\n    gap: 29px;\n    padding-bottom: ",";\n\n    "," {\n        overflow-wrap: break-word;\n    }\n"]);return Aa=function(){return n},n}var Oa=m.ZP.div.withConfig({componentId:"sc-9526dde6-0"})(Ra()),Na=m.ZP.div.withConfig({componentId:"sc-9526dde6-1"})(Ta(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.palette.purple.lightest}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.spacing[5]})),Ma=(0,m.ZP)((function(n){var e=n.problematic,t=n.targetedDomain,i=n.description,o=n.className,s=(0,r.Z)((0,l.$)(),1)[0];return(0,a.jsxs)("div",{className:o,children:[(0,a.jsxs)(Na,{children:[(0,a.jsxs)(Oa,{children:[(0,a.jsx)(O.xv,{as:"h3",variant:"h4",lines:1,children:s("component.home.PedagogicalScenarioCard.professionalSituationTargetedDomain")}),(0,a.jsx)(O.xv,{children:t})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(O.xv,{as:"h3",variant:"h4",lines:1,children:s("component.home.PedagogicalScenarioCard.professionalSituationProblematic")}),(0,a.jsx)(O.xv,{preserve:!0,children:e})]})]}),(0,a.jsxs)(Na,{children:[(0,a.jsx)(O.xv,{as:"h3",variant:"h4",lines:1,children:s("component.home.PedagogicalScenarioCard.professionalSituationDescription")}),(0,a.jsx)(O.xv,{preserve:!0,children:i})]})]})})).withConfig({componentId:"sc-9526dde6-2"})(Aa(),(function(n){return n.theme.spacing[5]}),O.xv),Ba=t(15394);function _a(){var n=(0,i.Z)(["\n    --text-color: ",";\n"]);return _a=function(){return n},n}function za(){var n=(0,i.Z)(["\n    margin-left: ",";\n"]);return za=function(){return n},n}function Fa(){var n=(0,i.Z)(["\n    display: flex;\n    gap: ",";\n    margin-right: ",";\n"]);return Fa=function(){return n},n}function Ua(){var n=(0,i.Z)(["\n    display: inline-flex;\n    justify-content: flex-end;\n    align-items: center;\n    width: 109px;\n    background: ",";\n    border-radius: ",";\n    padding-right: ",";\n"]);return Ua=function(){return n},n}function Ga(){var n=(0,i.Z)(["\n    display: inline-flex;\n    align-items: center;\n    font-size: 1.2rem;\n    color: ",";\n"]);return Ga=function(){return n},n}function Va(){var n=(0,i.Z)(["\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1rem;\n    aspect-ratio: 1/1;\n    min-height: 18px;\n    padding: 2px;\n    margin-left: ",";\n    background: ",";\n    --text-color: ",";\n    border-radius: 9999px;\n"]);return Va=function(){return n},n}function Ha(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    padding: ",";\n    background: ",";\n    border-top: 1px solid ",";\n"]);return Ha=function(){return n},n}function Wa(){var n=(0,i.Z)(["\n    display: flex;\n    justify-content: space-between;\n    background: ",";\n    border-radius: ",";\n    padding: 28px 26px;\n    h3 {\n        --text-color: ",";\n    }\n"]);return Wa=function(){return n},n}function $a(){var n=(0,i.Z)(["\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: 144px;\n    font-size: 1.2rem;\n    color: ",";\n    background: ",";\n    border-radius: ",";\n"]);return $a=function(){return n},n}function Ka(){var n=(0,i.Z)(["\n    border: 1px solid ",";\n    border-radius: ",";\n\n    "," div:first-child {\n        flex-wrap: nowrap;\n    }\n"]);return Ka=function(){return n},n}var Ya=(0,m.ZP)(O.xv).withConfig({componentId:"sc-2bf3916d-0"})(_a(),(function(n){return n.theme.palette.purple.base})),Qa=m.ZP.span.withConfig({componentId:"sc-2bf3916d-1"})(za(),(function(n){return n.theme.spacing[6]})),Xa=m.ZP.ul.withConfig({componentId:"sc-2bf3916d-2"})(Fa(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[4]})),qa=m.ZP.li.withConfig({componentId:"sc-2bf3916d-3"})(Ua(),(function(n){return n.theme.palette.purple.lighter2}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.spacing[3]})),Ja=(0,m.ZP)(O.xv).withConfig({componentId:"sc-2bf3916d-4"})(Ga(),(function(n){return n.theme.palette.purple.base})),ns=(0,m.ZP)(O.xv).withConfig({componentId:"sc-2bf3916d-5"})(Va(),(function(n){return n.theme.spacing[3]}),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.palette.white.base})),es=m.ZP.ul.withConfig({componentId:"sc-2bf3916d-6"})(Ha(),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.palette.purple.lightest}),(function(n){return n.theme.palette.purple.lighter})),ts=m.ZP.li.withConfig({componentId:"sc-2bf3916d-7"})(Wa(),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.palette.purple.base})),rs=(0,m.ZP)(O.xv).withConfig({componentId:"sc-2bf3916d-8"})($a(),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.palette.purple.lighter2}),(function(n){return n.theme.shape.borderRadius.medium})),is=(0,m.ZP)((function(n){var e=n.skill,t=(0,y.Z)(n,["skill"]),i=e.code,o=e.officialTitle,s=e.skillLevel1,c=e.skillLevel2,d=e.skillLevel3,f=(0,r.Z)((0,l.$)(),1)[0],m=(0,u.useMemo)((function(){var n=[s,c,d];return{skillLevels:n,briefsLevelSkill:n.flatMap((function(n){var e=n.briefs,t=n.level;return e?Object.values(e).sort((function(n,e){return Date.parse(n.createdAt)-Date.parse(e.createdAt)})).map((function(n){return(0,j.Z)((0,C.Z)({},n),{level:t})})):[]}))}}),[e]),p=m.skillLevels,h=m.briefsLevelSkill,g=function(n){return n?Object.values(n).length:0},v=h.length;return(0,a.jsx)("li",(0,j.Z)((0,C.Z)({},t),{children:(0,a.jsxs)(Ba.ZP,{htmlTag:"div",expanded:v>0&&void 0,children:[(0,a.jsxs)(Ba.ef,{isDisabled:v<1,children:[(0,a.jsxs)(Ya,{as:"h2",variant:"h4",lines:1,children:[(0,a.jsx)("span",{children:i}),(0,a.jsx)(Qa,{children:o})]}),(0,a.jsx)(Xa,{children:p.map((function(n){var e=n.level,t=n.briefs,r=n["@id"];return(0,a.jsxs)(qa,{children:[(0,a.jsx)(Ja,{children:f("component.home.PedagogicalScenarioCard.ProfessionalSituation.ProfessionalSituationSkillListItem.level",{level:e})}),(0,a.jsx)(ns,{children:g(t)})]},r)}))})]}),(0,a.jsx)(Ba.DK,{children:(0,a.jsx)(es,{children:h.map((function(n){var e=n.title,t=n.level,r=n["@id"];return(0,a.jsxs)(ts,{children:[(0,a.jsx)(O.xv,{as:"h3",variant:"h4",children:e}),(0,a.jsx)(rs,{children:f("component.home.PedagogicalScenarioCard.ProfessionalSituation.ProfessionalSituationSkillListItem.level",{level:t})})]},r)}))})})]})}))})).withConfig({componentId:"sc-2bf3916d-9"})(Ka(),(function(n){return n.theme.palette.purple.lighter}),(function(n){return n.theme.shape.borderRadius.medium}),Ba.ef);function os(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    list-style: none;\n    padding: 0;\n"]);return os=function(){return n},n}function as(){var n=(0,i.Z)(["\n    padding-bottom: ",";\n"]);return as=function(){return n},n}var ss=m.ZP.ul.withConfig({componentId:"sc-54553526-0"})(os(),(function(n){return n.theme.spacing[5]})),cs=(0,m.ZP)((function(n){var e=n.skills,t=n.className;return(0,a.jsx)("div",{className:t,children:(0,a.jsx)(ss,{children:null===e||void 0===e?void 0:e.map((function(n){var e=n.skillLevel1.skill;return(0,a.jsx)(is,{skill:n},e)}))})})})).withConfig({componentId:"sc-54553526-1"})(as(),(function(n){return n.theme.spacing[5]}));function us(){var n=(0,i.Z)(["\n    display: flex;\n    justify-content: ",";\n    gap: ",";\n    align-items: center;\n    height: 56px;\n    margin-bottom: ",";\n"]);return us=function(){return n},n}function ls(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    height: 358px;\n    overflow-y: scroll;\n    padding: 0 ",";\n"]);return ls=function(){return n},n}function ds(){var n=(0,i.Z)(["\n    flex: 1;\n    min-height: 0;\n"]);return ds=function(){return n},n}function fs(){var n=(0,i.Z)(["\n    height: 358px;\n    border-radius: ",";\n"]);return fs=function(){return n},n}function ms(){var n=(0,i.Z)(["\n    min-width: 120px;\n"]);return ms=function(){return n},n}function ps(){var n=(0,i.Z)(["\n    min-height: 451px;\n    position: relative;\n\n    "," {\n        width: 100vw;\n    }\n\n    "," {\n        flex: 1;\n        min-height: 0;\n    }\n"]);return ps=function(){return n},n}var hs,gs=m.ZP.div.withConfig({componentId:"sc-b9f01cd4-0"})(us(),(function(n){return n.currentTab===hs.DESCRIPTION?"space-between":"start"}),(function(n){var e=n.currentTab,t=n.theme;return e===hs.DESCRIPTION?0:t.spacing[6]}),(function(n){return n.theme.spacing[5]})),vs=(0,m.ZP)(Oi.x4).withConfig({componentId:"sc-b9f01cd4-1"})(ls(),(function(n){return n.theme.spacing[6]})),xs=m.ZP.div.withConfig({componentId:"sc-b9f01cd4-2"})(ds()),bs=(0,m.ZP)(A.OG).withConfig({componentId:"sc-b9f01cd4-3"})(fs(),(function(n){return n.theme.shape.borderRadius.medium})),Zs=(0,m.ZP)(k.zx).withConfig({componentId:"sc-b9f01cd4-4"})(ms());!function(n){n.DESCRIPTION="description",n.SKILLS="skills",n.BRIEFS="briefs"}(hs||(hs={}));var Cs=(0,m.ZP)((function(n){var e=n.educationalScenarioItemId,t=n.educationalScenarioItems,i=n.setTimelineStartDate,o=n.setTimelineScale,s=n.refreshTimeline,c=n.classroomStartDate,d=n.classroomEndDate,f=(0,y.Z)(n,["educationalScenarioItemId","educationalScenarioItems","setTimelineStartDate","setTimelineScale","refreshTimeline","classroomStartDate","classroomEndDate"]),m=(0,r.Z)((0,l.$)(),1)[0],h=(0,Ni.Jx)(),x=(0,g.o_)(),b=(0,v.tv)(),Z=Pi.yB.PEDAGOGICAL_SCENARIO,S=(0,p.z)().user,w=(0,u.useState)(hs.DESCRIPTION),D=w[0],I=w[1],L=(0,Mi.H)({educationalScenarioItemId:e}),R=L.data,T=L.isLoading,A=L.refetch,N=null!==R&&void 0!==R?R:{},M=N.professionalSituation,B=N.educationalBriefs,_=N.classroom,z=N.startDate,F=N.endDate,U=null!==M&&void 0!==M?M:{},G=U.title,V=U.description,H=U.targetedDomain,W=U.problematic,$=U.skills,K=(_||{}).trainers,Y=!!K&&K.findIndex((function(n){return n===S["@id"]}))>-1,Q=Y&&x(g.L0.BRIEFS_CREATE),X=[{title:m("component.home.PedagogicalScenarioCard.tabs.description"),key:hs.DESCRIPTION},{title:m("component.home.PedagogicalScenarioCard.tabs.skills",{count:$?$.length:0}),key:hs.SKILLS},{title:m("component.home.PedagogicalScenarioCard.tabs.briefs",{count:B?B.length:0}),key:hs.BRIEFS}],q=X.findIndex((function(n){return n.key===D}));if(T)return(0,a.jsx)("div",(0,j.Z)((0,C.Z)({},f),{children:(0,a.jsx)(bs,{})}));var J=!!M&&x([g.L0.PROFESSIONAL_SITUATION_UPDATE],{scope:h(M)}),nn=function(){b.push({route:v.AW.BRIEFS_CREATE,state:(0,wi.Z)({},Ti.F,{professionalSituationId:null===M||void 0===M?void 0:M["@id"],step:Ai.Qb.SKILLS})})};return(0,a.jsxs)("div",(0,j.Z)((0,C.Z)({},f),{children:[(0,a.jsx)(Oi.mQ,{children:X.map((function(n,e){var t=n.title,r=n.key;return(0,a.jsx)(Oi.OK,{tabId:e,isSelected:D===r,onClick:function(){I(r)},children:(0,a.jsx)(O.xv,{children:t})},r)}))}),(0,a.jsxs)(vs,{tabId:q,currentTab:D,children:[(0,a.jsx)(La,{currentTab:D,targetTab:hs.DESCRIPTION,isClassroomTrainer:Y,startDate:z,endDate:F,educationalScenarioItemId:e,educationalScenarioItems:t,refreshTimeline:s,refetchPedagogicalScenarioItem:A,setTimelineStartDate:i,setTimelineScale:o,classroomStartDate:c,classroomEndDate:d}),(0,a.jsxs)(gs,{currentTab:D,children:[(0,a.jsx)(O.xv,{as:"h2",variant:"h3",lines:1,children:G}),J&&D===hs.DESCRIPTION&&M&&(0,a.jsxs)(k.zx,{as:"a",outlined:!0,variant:"primary",onClick:function(){return b.push({route:v.AW.PROFESSIONAL_SITUATION_EDIT,query:{id:(0,P.sR)(M)},state:(0,wi.Z)({},Pi.R$,{context:Z,educationalScenarioItemId:e,start:z})})},children:[m("component.home.PedagogicalScenarioCard.editProfessionalSituation"),(0,a.jsx)(E.z,{})]}),Q&&B&&B.length>0&&D===hs.BRIEFS&&(0,a.jsxs)(Zs,{small:!0,flat:!0,type:"button",onClick:nn,children:[m("component.home.PedagogicalScenarioCard.createBrief"),(0,a.jsx)(E.v3,{})]})]}),(0,a.jsxs)(xs,{children:[D===hs.DESCRIPTION&&(0,a.jsx)(Ma,{description:V,targetedDomain:H,problematic:W}),D===hs.SKILLS&&(0,a.jsx)(cs,{skills:$}),D===hs.BRIEFS&&(0,a.jsx)(Mo,{educationalBriefs:B,educationalScenarioItemId:e,classroom:_,isClassroomTrainer:Y,handleBriefDelete:function(){return A()},handleAddBrief:nn,canCreateBrief:Q,refetchPedagogicalScenarioItem:A})]})]})]}))})).withConfig({componentId:"sc-b9f01cd4-5"})(ps(),Oi.OK,vs);function js(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: start;\n"]);return js=function(){return n},n}function ys(){var n=(0,i.Z)(["\n    --text-color: ",";\n"]);return ys=function(){return n},n}function Ss(){var n=(0,i.Z)([""]);return Ss=function(){return n},n}function ws(){var n=(0,i.Z)(["\n    --icon-color: ",";\n    --icon-bg-color: ",";\n"]);return ws=function(){return n},n}function Ds(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    gap: ",";\n"]);return Ds=function(){return n},n}function Is(){var n=(0,i.Z)(["\n    --border-size: ",";\n    --hover-shadow: 0px 0px 0px 0px transparent;\n    --padding: calc("," - var(--border-size));\n    --vertical-margin: ",";\n\n    min-width: calc(141px - var(--border-size) * 2);\n\n    width: 100%;\n    height: 58px;\n    margin: 0;\n    padding: var(--padding);\n    background-color: ",";\n    border-radius: ",";\n\n    box-shadow: none;\n    justify-content: start;\n\n    &:hover {\n        transform: none;\n    }\n\n    &:active {\n        --border-size: ",";\n    }\n\n    "," {\n        position: sticky;\n        left: var(--padding);\n    }\n\n    "," {\n        --text-color: ",";\n    }\n\n    &:hover,\n    &:active {\n        background-color: ",";\n\n        "," {\n            --text-color: ",";\n        }\n    }\n\n    &:focus {\n        position: relative;\n        z-index: ",";\n    }\n\n    cursor: ",";\n"]);return Is=function(){return n},n}var Es=m.ZP.span.withConfig({componentId:"sc-6d2af4e5-0"})(js()),Ps=(0,m.ZP)(O.xv).withConfig({componentId:"sc-6d2af4e5-1"})(ys(),(function(n){return n.theme.palette.grey.light})),ks=(0,m.ZP)(O.xv).withConfig({componentId:"sc-6d2af4e5-2"})(Ss()),Ls=(0,m.ZP)(E.nL).withConfig({componentId:"sc-6d2af4e5-3"})(ws(),(function(n){return n.theme.palette.black.base}),(function(n){return n.theme.palette.yellow.base})),Rs=m.ZP.span.withConfig({componentId:"sc-6d2af4e5-4"})(Ds(),(function(n){return n.theme.spacing[3]})),Ts=(0,m.ZP)((function(n){var e=n.start,t=n.end,i=n.aggregated,o=void 0!==i&&i,s=n.zoomNeeded,c=void 0!==s&&s,u=n.children,d=(0,y.Z)(n,["start","end","aggregated","zoomNeeded","children"]),f=(0,r.Z)((0,l.$)(),1)[0];return(0,a.jsx)(k.zx,(0,j.Z)((0,C.Z)({},d),{outlined:!0,variant:"primary",children:(0,a.jsxs)(Es,{children:[!o&&(0,a.jsxs)(Rs,{children:[(0,a.jsx)(Ps,{as:"span",variant:"label-small",lines:1,textAlign:"left",children:f("component.home.PedagogicalScenarioCard.PedagogicalScenarioTimelineItem.dates",{from:e,to:t})}),c&&(0,a.jsx)(Ls,{circle:!0,size:12})]}),(0,a.jsx)(ks,{as:"span",variant:"subheading",lines:1,textAlign:"left",children:u})]})}))})).withConfig({componentId:"sc-6d2af4e5-5"})(Is(),(function(n){var e=n.selected,t=n.theme;return e?t.border.large:t.border.small}),(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.spacing[2]}),(function(n){var e=n.selected,t=n.theme;return e?t.palette.purple.lightest:t.palette.white.base}),(function(n){return n.theme.shape.borderRadius.large}),(function(n){return n.theme.border.large}),Es,ks,(function(n){var e=n.selected,t=n.theme;return e?t.palette.black.base:t.palette.grey.base}),(function(n){return n.theme.palette.purple.lightest}),ks,(function(n){return n.theme.palette.black.base}),(function(n){return n.theme.zIndex.element+2}),(function(n){return n.aggregated?"zoom-in":"pointer"})),As=t(49048),Os=t(37950),Ns=t(99890),Ms=t(96843),Bs=t(70572),_s=t(3888),zs=t(45220),Fs=t.n(zs);function Us(){var n=(0,i.Z)(["\n    border-left: 2px solid ",";\n\n    > "," {\n        color: ",";\n        text-transform: capitalize;\n        white-space: nowrap;\n\n        border-bottom: 1px dashed ",";\n        padding: 0 "," ",";\n    }\n"]);return Us=function(){return n},n}var Gs=function(n,e){var t=n.label,r=(0,y.Z)(n,["label"]);return(0,a.jsx)("div",(0,j.Z)((0,C.Z)({ref:e},r),{children:(0,a.jsx)(zi.Z,{variant:"subheading",children:t})}))},Vs=(0,m.ZP)((0,u.memo)((0,u.forwardRef)(Gs))).withConfig({componentId:"sc-f2c86caf-0"})(Us(),(function(n){return n.theme.palette.grey.lightest}),zi.Z,(function(n){return n.theme.palette.grey.light}),(function(n){return n.theme.palette.grey.lighter}),(function(n){return n.theme.spacing[3]}),(function(n){return n.theme.spacing[2]}));function Hs(){var n=(0,i.Z)([""]);return Hs=function(){return n},n}var Ws=(0,m.ZP)((function(n){var e=n.start,t=n.end,r=n.unit,i=n.render,o=(0,y.Z)(n,["start","end","unit","render"]),s=(0,u.useMemo)((function(){for(var n=[],i={start:e,end:t},o=r.floor(i.start),a=(0,dr.memoize)((function(n){var e=r.add(o,n);return{start:e,end:r.ceil(e)}})),s=0;(0,_o.Z)(a(s),i);s++)n.push(a(s));return n}),[e,t,r]);return(0,a.jsx)("div",(0,j.Z)((0,C.Z)({},o),{children:s.map(i)}))})).withConfig({componentId:"sc-c5d9d2ba-0"})(Hs());function $s(){var n=(0,i.Z)(["\n            border-right: 2px dashed ",";\n        "]);return $s=function(){return n},n}function Ks(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-items: start;\n\n    > "," {\n        // FIXME: this typography variant does not exists\n        font-size: 1rem;\n        line-height: 1.2rem;\n        font-weight: 600;\n\n        white-space: nowrap;\n\n        color: ",";\n\n        text-align: center;\n        transform: translateX(-50%);\n\n        background-color: ",";\n        border: "," solid ",";\n\n        box-sizing: content-box;\n        border-radius: ",";\n    }\n\n    border-left: 2px dashed ",";\n    ","\n"]);return Ks=function(){return n},n}var Ys=function(n,e){var t=n.label,r=(0,y.Z)(n,["label"]);return(0,a.jsx)("div",(0,j.Z)((0,C.Z)({ref:e},r),{children:(0,a.jsx)(zi.Z,{children:t})}))},Qs=(0,m.ZP)((0,u.memo)((0,u.forwardRef)(Ys))).withConfig({componentId:"sc-7eab7a1e-0"})(Ks(),zi.Z,(function(n){return n.theme.palette.grey.base}),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.spacing[3]}),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.palette.grey.lightest}),(function(n){return n.last&&(0,m.iv)($s(),(function(n){return n.theme.palette.grey.lightest}))}));function Xs(){var n=(0,i.Z)(["\n    display: flex;\n    gap: ",";\n\n    "," {\n        box-shadow: inset 0px 0px 0px 2px ",";\n    }\n\n    > "," {\n        margin: 0;\n        padding-left: ",";\n        padding-right: ",";\n\n        &:not(:hover) {\n            border-color: ",";\n            color: ",";\n        }\n    }\n"]);return Xs=function(){return n},n}var qs=(0,m.ZP)((function(n){var e=n.scale,t=n.onScaleChange,i=n.onTodayClick,o=(0,y.Z)(n,["scale","onScaleChange","onTodayClick"]),s=(0,r.Z)((0,l.$)(),1)[0],c=(0,u.useMemo)((function(){return[{id:"month",label:s("component.home.PedagogicalScenarioCard.Timeline.Toolbar.scale.month")},{id:"week",label:s("component.home.PedagogicalScenarioCard.Timeline.Toolbar.scale.week")},{id:"day",label:s("component.home.PedagogicalScenarioCard.Timeline.Toolbar.scale.day")}]}),[s]),d=(0,u.useCallback)((function(n){return t(n)}),[t]),f=(0,u.useCallback)((function(){return null===i||void 0===i?void 0:i()}),[i]);return(0,a.jsxs)("div",(0,j.Z)((0,C.Z)({},o),{children:[(0,a.jsx)(Ln.Z,{variant:"primary",orientation:"horizontal",onChange:d,value:e,title:s("component.home.PedagogicalScenarioCard.Timeline.Toolbar.scale.title"),options:c}),(0,a.jsx)(k.zx,{variant:"primary",outlined:!0,small:!0,onClick:f,disabled:!i,children:s("component.home.PedagogicalScenarioCard.Timeline.Toolbar.today")})]}))})).withConfig({componentId:"sc-ce6afaf9-0"})(Xs(),(function(n){return n.theme.spacing[3]}),Ln.Z,(function(n){return n.theme.palette.purple.lighter}),k.zx,(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.spacing[4]}),(function(n){return n.theme.palette.purple.lighter}),(function(n){return n.theme.palette.grey.base})),Js=t(63334),nc=t(27135);function ec(){var n=(0,i.Z)(["\n    height: 100%;\n    background: ",";\n"]);return ec=function(){return n},n}function tc(){var n=(0,i.Z)(["\n    width: 100%;\n    position: relative;\n\n    overflow: auto;\n\n    /* Hide scrollbar for Chrome, Safari and Opera */\n    &::-webkit-scrollbar {\n        display: none;\n    }\n\n    /* Hide scrollbar for IE, Edge and Firefox */\n    -ms-overflow-style: none; /* IE and Edge */\n    scrollbar-width: none; /* Firefox */\n\n    cursor: ",";\n    user-select: none;\n"]);return tc=function(){return n},n}function rc(){var n=(0,i.Z)(["\n    position: absolute;\n"]);return rc=function(){return n},n}function ic(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: ",";\n\n    position: relative;\n"]);return ic=function(){return n},n}function oc(){var n=(0,i.Z)([""]);return oc=function(){return n},n}function ac(){var n=(0,i.Z)([""]);return ac=function(){return n},n}function sc(){var n=(0,i.Z)([""]);return sc=function(){return n},n}function cc(){var n=(0,i.Z)(["\n    > div {\n        position: absolute;\n        height: 100%;\n        background: ",";\n    }\n"]);return cc=function(){return n},n}function uc(){var n=(0,i.Z)(["\n    position: absolute;\n    bottom: 0;\n    left: 50%;\n\n    background: ",";\n    border-radius: ",";\n\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n\n    --text-color: ",";\n    --icon-color: ",";\n\n    padding: ",";\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: ",";\n"]);return uc=function(){return n},n}function lc(){var n=(0,i.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n\n    --scale-height: 25px;\n    --subscale-height: 28px;\n    --viewport-height: 58px;\n    --gap: ",";\n\n    --subscale-top: calc(var(--scale-height) + var(--gap));\n    --unit-top: calc(var(--scale-height) + 2 * var(--gap) + var(--subscale-height));\n\n    "," {\n        border-radius: ",";\n        height: calc(var(--scale-height) + var(--subscale-height) + var(--viewport-height) + 2 * var(--gap));\n    }\n\n    ",", ",", ",", "," {\n        position: absolute;\n        left: 0;\n    }\n\n    ",", "," {\n        height: 100%;\n        top: 0;\n    }\n\n    "," {\n        top: var(--subscale-top);\n        height: calc(100% - var(--subscale-top));\n    }\n\n    "," {\n        bottom: 0;\n        height: var(--viewport-height);\n    }\n\n    ",", ",", "," {\n        position: absolute;\n        height: 100%;\n    }\n\n    "," {\n        display: flex;\n        align-items: center;\n    }\n"]);return lc=function(){return n},n}var dc=(0,m.ZP)(Ii.E.div).withConfig({componentId:"sc-5db927ba-0"})(ec(),(function(n){return n.theme.palette.purple.lighter2})),fc=m.ZP.div.withConfig({componentId:"sc-5db927ba-1"})(tc(),(function(n){return n.grabbing?"grabbing":"grab"})),mc=m.ZP.div.withConfig({componentId:"sc-5db927ba-2"})(rc()),pc=m.ZP.div.withConfig({componentId:"sc-5db927ba-3"})(ic(),(function(n){return n.theme.spacing[5]})),hc=(0,m.ZP)(Ws).withConfig({componentId:"sc-5db927ba-4"})(oc()),gc=(0,m.ZP)(Ws).withConfig({componentId:"sc-5db927ba-5"})(ac()),vc=m.ZP.div.withConfig({componentId:"sc-5db927ba-6"})(sc()),xc=m.ZP.div.withConfig({componentId:"sc-5db927ba-7"})(cc(),(function(n){return n.theme.palette.purple.lightest})),bc=(0,m.ZP)(Ii.E.div).withConfig({componentId:"sc-5db927ba-8"})(uc(),(function(n){return n.theme.palette.white.base}),(function(n){return n.theme.shape.borderRadius.medium}),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.palette.purple.base}),(function(n){return n.theme.spacing[2]}),(function(n){return n.theme.spacing[2]})),Zc=function(n,e){return{start:(0,As.Z)(n.start,e),end:(0,As.Z)(n.end,e)}},Cc={visible:{scale:1,opacity:1},hidden:{scale:.5,opacity:0}},jc=(0,m.ZP)((function(n){var e=n.date,t=n.start,i=n.end,s=n.items,c=void 0===s?[]:s,d=n.scale,f=n.onScaleChange,m=n.loading,p=(0,y.Z)(n,["date","start","end","items","scale","onScaleChange","loading"]),h=(0,u.useRef)(null),g=(0,r.Z)((0,l.$)(),1)[0],v=(0,u.useState)(!1),x=v[0],Z=v[1],S=(0,u.useState)(!1),w=S[0],D=S[1],I=(0,Bs.c)(null),P=(0,u.useMemo)((function(){var n=function(n){switch(n){case"day":return{scale:Js.x4,subscale:Js.Zg,unit:Js.Zg,unitLength:176};case"week":return{scale:Js.ps,subscale:Js.x4,unit:Js.Zg,unitLength:24};default:return{scale:Js.vc,subscale:Js.ps,unit:Js.x4,unitLength:12}}}(d),e=n.scale,r=n.subscale,o=n.unit,a=n.unitLength,s=(0,nc.j)({start:t,end:i},o),c=s.start,u=s.end,l=r.floor(c),f=e.floor(l),m=r.ceil(u),p=e.ceil(m),h={start:o.floor((0,Os.default)([c,l,f])),end:o.ceil((0,Ns.default)([u,m,p]))},g=[];return(0,Di.default)(h.start,t)&&g.push((0,nc.j)({start:h.start,end:o.ceil(o.add(t,-1))},o)),(0,er.default)(h.end,i)&&g.push((0,nc.j)({start:o.floor(o.add(i,1)),end:h.end},o)),{scale:{unit:e,interval:{start:f,end:p}},subscale:{unit:r,interval:{start:l,end:m}},options:{min:h.start,max:h.end,unitLength:a,unit:o},disabledIntervals:g.filter((function(n){return!(0,Ms.default)(n.start,n.end)&&!(0,er.default)(n.start,n.end)}))}}),[t,i,d]),L=P.options,R=P.disabledIntervals,T=P.scale,A=P.subscale,N=(0,nc.m)((0,C.Z)({viewportRef:h},L)),M=(0,u.useMemo)((function(){var n=T.unit,e=T.interval;return{handleTodayClick:function(){h.current&&h.current.scroll({left:N.getDistance(new Date),behavior:"smooth"})},handleNextClick:function(){if(h.current){var t=N.getDate(h.current.scrollLeft);h.current.scroll({left:N.getDistance((0,As.Z)(n.add(n.floor(t),1),e)),behavior:"smooth"})}},handlePrevClick:function(){if(h.current){var t=N.getDate(h.current.scrollLeft);h.current.scroll({left:N.getDistance((0,As.Z)(n.add(n.floor(t),-1),e)),behavior:"smooth"})}}}}),[h,N]),B=M.handleTodayClick,_=M.handleNextClick,z=M.handlePrevClick,F=(0,u.useMemo)((function(){var n=x;return{onMouseDown:function(){n=!0,Z(!0)},onMouseUp:function(){n=!1,Z(!1)},onMouseMove:function(e){n&&h.current&&(h.current.scrollLeft=h.current.scrollLeft-e.movementX);var t,r,i=h.current,o=null===i||void 0===i?void 0:i.getBoundingClientRect(),a=e.clientX-(null!==(t=null===o||void 0===o?void 0:o.x)&&void 0!==t?t:0)+(null!==(r=null===i||void 0===i?void 0:i.scrollLeft)&&void 0!==r?r:0);I.set(a),D(!0)},onMouseLeave:function(){I.set(null),Z(!1),n=!1,D(!1)}}}),[N,h]),U=N.getInterval(!0),G=N.getInterval(),V=(0,b.D9)(null===G||void 0===G?void 0:G.start.toString()),H=(0,_s.H)(I,(function(n){return Fs()(n)?N.unitLength:N.getDistance(L.unit.floor(N.getDate(n)))})),W=G&&((0,Di.default)(G.start,N.bounds.start)||(0,Ms.default)(G.start,N.bounds.start)),$=G&&((0,er.default)(G.end,N.bounds.end)||(0,Ms.default)(G.end,N.bounds.end));return(0,u.useEffect)((function(){V&&h.current&&h.current.scroll({left:N.getDistance(new Date(V))})}),[d]),(0,u.useEffect)((function(){h.current&&h.current.scroll({left:N.getDistance(null!==e&&void 0!==e?e:new Date)})}),[e]),(0,a.jsxs)("div",(0,j.Z)((0,C.Z)({},p),{children:[(0,a.jsx)(qs,{scale:d,onScaleChange:f,onTodayClick:(0,Di.default)(Date.now(),N.bounds.end)&&(0,er.default)(Date.now(),N.bounds.start)?B:void 0}),(0,a.jsxs)(pc,{children:[(0,a.jsx)(k.hU,{as:Ii.E.button,variants:Cc,animate:W?"hidden":"visible",onClick:z,disabled:W,children:(0,a.jsx)(E.Tt,{direction:"left"})}),(0,a.jsxs)(fc,(0,j.Z)((0,C.Z)({ref:h},F),{unit:N.unitLength,grabbing:x,children:[(0,a.jsx)(xc,{style:{width:N.getTotalSize()},children:R.reduce((function(n,e,t){var r=N.round(e);return N.isVisible(r)?(0,o.Z)(n).concat([(0,a.jsx)("div",{style:{left:N.getDistance(r.start),width:N.getDistance(r)}},t)]):n}),[])}),w&&(0,a.jsx)(dc,{style:{position:"absolute",left:H,width:N.unitLength}}),U&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(hc,(0,j.Z)((0,C.Z)({style:{width:N.getTotalSize()}},Zc(U,T.interval)),{unit:T.unit,render:function(n,e){var t=n;return(0,a.jsx)(Vs,{label:g("component.home.PedagogicalScenarioCard.Timeline.".concat(d,".scale"),{date:t.start}),style:{left:N.getDistance(t.start),width:N.getDistance(t)}},e)}})),(0,a.jsx)(gc,(0,j.Z)((0,C.Z)({style:{width:N.getTotalSize()}},Zc(U,A.interval)),{unit:A.unit,render:function(n,e){var t=N.round(n);return"day"===d&&12!==new Date(t.start).getHours()?null:(0,a.jsx)(Qs,{label:g("component.home.PedagogicalScenarioCard.Timeline.".concat(d,".subscale"),{date:t.start}),style:{left:N.getDistance(t.start),width:N.getDistance(t)}},e)}}))]}),(0,a.jsx)(vc,{style:{width:N.getTotalSize()},children:c.reduce((function(n,e,t){var r=e.render,i=(0,y.Z)(e,["render"]);return N.isVisible(i,!0)?(0,o.Z)(n).concat([(0,a.jsx)(mc,{style:{left:N.getDistance(i.start),width:N.getDistance(i)},children:r()},t)]):n}),[])})]})),(0,a.jsx)(k.hU,{as:Ii.E.button,variants:Cc,animate:$?"hidden":"visible",onClick:_,disabled:$,children:(0,a.jsx)(E.Tt,{direction:"right"})}),(0,a.jsx)(Ei.M,{children:m?(0,a.jsxs)(bc,{transition:{type:"spring"},transformTemplate:function(n){var e=n.y;return"translateX(-50%) translateY(".concat(e,")")},variants:{visible:{opacity:1,y:0},hidden:{opacity:0,y:12}},initial:"hidden",animate:"visible",exit:"hidden",children:[(0,a.jsx)(E.gb,{}),(0,a.jsx)(O.xv,{variant:"label-xs",children:g("component.home.PedagogicalScenarioCard.Timeline.loading")})]}):null})]})]}))})).withConfig({componentId:"sc-5db927ba-9"})(lc(),(function(n){return n.theme.spacing[6]}),(function(n){return n.theme.spacing[2]}),fc,(function(n){return n.theme.shape.borderRadius.medium}),xc,hc,gc,vc,xc,hc,gc,vc,Vs,Qs,mc,mc);function yc(){var n=(0,i.Z)(["\n    display: flex;\n    justify-content: end;\n    flex-direction: row;\n\n    transform: translateY(calc(-200% * var(--timeline-item-toobar-visible) + var(--timeline-item-toobar-tab)));\n\n    "," {\n        position: sticky;\n        right: 0px;\n    }\n"]);return yc=function(){return n},n}function Sc(){var n=(0,i.Z)(["\n    display: flex;\n    gap: ",";\n\n    padding: var(--timeline-item-toobar-padding) var(--timeline-item-toobar-padding)\n        calc(\n            var(--timeline-item-toobar-padding) + var(--timeline-item-toobar-visible) * var(--timeline-item-toobar-tab)\n        );\n\n    background: transparent;\n    border-radius: var(--timeline-item-toobar-radius) var(--timeline-item-toobar-radius) 0 0;\n"]);return Sc=function(){return n},n}function wc(){var n=(0,i.Z)(["\n    position: relative;\n    width: 100%;\n\n    --timeline-item-toobar-visible: 1;\n    --timeline-item-toobar-padding: 0px; // ",";\n    --timeline-item-toobar-tab: 15px;\n    --timeline-item-toobar-radius: ",";\n\n    "," {\n        position: absolute;\n        top: 0;\n        width: 100%;\n    }\n\n    "," {\n        position: sticky;\n        right: 0;\n        margin-left: auto;\n    }\n"]);return wc=function(){return n},n}function Dc(){var n=(0,i.Z)(["\n    "," {\n        --viewport-height: 98px;\n        margin-bottom: ",";\n    }\n"]);return Dc=function(){return n},n}var Ic=(0,m.ZP)(Ii.E.div).withConfig({componentId:"sc-4711aa33-0"})(yc(),k.hU),Ec=m.ZP.div.withConfig({componentId:"sc-4711aa33-1"})(Sc(),(function(n){return n.theme.spacing[2]})),Pc=m.ZP.div.withConfig({componentId:"sc-4711aa33-2"})(wc(),(function(n){return n.theme.spacing[2]}),(function(n){return n.theme.shape.borderRadius.medium}),Ic,Ec),kc=(0,m.ZP)((function(n){n.loading;var e,t,i,o,s,c=n.classroom,d=(0,y.Z)(n,["loading","classroom"]),f=(0,r.Z)((0,l.$)(),1)[0],m=(0,g.o_)(),p=(0,v.tv)(),h=Pi.yB.PEDAGOGICAL_SCENARIO,x=(null!==(t=(0,v.tv)().state)&&void 0!==t?t:{})[g.L0.HOMEPAGE_SCENARIO_CARD],b=(0,u.useState)(null!==(i=null===x||void 0===x?void 0:x.educationalScenarioItemId)&&void 0!==i?i:null),Z=b[0],S=b[1],w=(0,u.useState)(null),D=w[0],I=w[1],L=(0,u.useState)(null!==(o=null===x||void 0===x?void 0:x.timestamp)&&void 0!==o?o:new Date),T=L[0],A=L[1],O=(0,u.useState)(null!==(s=null===x||void 0===x?void 0:x.scale)&&void 0!==s?s:"month"),N=O[0],M=O[1],B=null!==c&&void 0!==c?c:{},_=B.startDate,z=B.endDate,F=(0,u.useMemo)((function(){return _&&z?{start:(0,P.sG)(_),end:(0,P.sG)(z)}:void 0}),[_,z]),U=(0,ki.d)({classroom:c,filters:{scale:N}}),G=(0,r.Z)((0,P.n0)({onSuccess:function(){U.refetch(),I(null),S(null)}}),2),V=G[0],H=G[1],W=null===(e=U.data)||void 0===e?void 0:e["hydra:member"],$=(0,u.useMemo)((function(){return(null!==W&&void 0!==W?W:[]).map((function(n){var e=n.startDate,t=n.endDate,r=n.title,i=n.uuid,o=n.type,s=n.numberOfItems,c=n.zoomNeeded,u="aggregated"===o,l=c||u,d=(0,P.sG)(e),p=(0,P.sG)(t),h=Z===i&&!u;return{id:i,start:d,end:p,render:function(){return(0,a.jsxs)(Pc,{children:[(0,a.jsx)(Ei.M,{children:h&&m(g.L0.PEDAGOGICAL_SCENARIO_MANAGE)&&(0,a.jsx)(Ic,{initial:{"--timeline-item-toobar-visible":0},animate:{"--timeline-item-toobar-visible":1},exit:{"--timeline-item-toobar-visible":0},children:(0,a.jsx)(k.hU,{size:"tiny",onClick:function(){return I(i)},title:f("component.home.PedagogicalScenarioCard.deleteEducationalScenarioItem"),children:(0,a.jsx)(E.X1,{})})})}),(0,a.jsx)(Ts,{start:d,end:p,selected:h,aggregated:u,zoomNeeded:l,onMouseDown:function(n){n.stopPropagation()},onMouseUp:function(n){n.stopPropagation()},onClick:function(n){n.stopPropagation(),u?(M((function(n){return"month"===n?"week":"day"})),A(d)):S(i)},children:u?f("component.home.PedagogicalScenarioCard.Timeline.aggregatedLabel",{count:s}):r})]})}}}))}),[W,Z,f]);return(0,a.jsxs)(R.Z,(0,j.Z)((0,C.Z)({title:f("component.home.PedagogicalScenarioCard.title"),helper:m(g.L0.PROFESSIONAL_SITUATION_CREATE)&&(0,a.jsxs)(k.zx,{onClick:function(){return p.push({route:v.AW.PROFESSIONAL_SITUATION,state:(0,wi.Z)({},Pi.eD,{context:h})})},as:"a",filled:!0,variant:"primary",tabIndex:0,children:[f("component.home.PedagogicalScenarioCard.addProfessionalSituation"),(0,a.jsx)(E.v3,{})]})},d),{children:[F?(0,a.jsx)(jc,(0,j.Z)((0,C.Z)({loading:U.isFetching,date:(0,Di.default)(T,F.start)||(0,er.default)(T,F.end)?F.start:T},F),{scale:N,onScaleChange:M,items:$})):null,Z?(0,a.jsx)(Cs,{educationalScenarioItemId:Z,educationalScenarioItems:W,setTimelineStartDate:A,setTimelineScale:M,refreshTimeline:function(){return U.refetch()},classroomStartDate:_,classroomEndDate:z},Z):null,(0,a.jsx)(Ri,{isLoading:H.isLoading,onCancel:function(){return I(null)},onConfirm:function(){return D&&V(D)},isOpen:!!D,text:f("component.home.PedagogicalScenarioCard.confirmEducationalScenarioItemDeletion"),confirmLabel:f("component.home.PedagogicalScenarioCard.acceptDelete"),cancelLabel:f("component.home.PedagogicalScenarioCard.cancelDelete")}),(0,a.jsx)(Rt.Z,{error:H.error,dissmiss:H.reset})]}))})).withConfig({componentId:"sc-4711aa33-3"})(Dc(),jc,(function(n){return n.theme.spacing[6]})),Lc=t(35688),Rc=t(11163),Tc=function(n){var e=n.children,t=(0,Rc.useRouter)(),r=(0,h.cD)().classrooms;return r&&0===r.length?(t.push(v.AW.PROFILE),null):(0,a.jsx)(a.Fragment,{children:e})},Ac=t(20094);function Oc(){var n=(0,i.Z)(["\n    padding: 0 ",";\n\n    "," {\n        margin-bottom: ",";\n    }\n\n    > :last-child > section + section {\n        margin-top: ",";\n    }\n"]);return Oc=function(){return n},n}var Nc=(0,m.ZP)(x.r).withConfig({componentId:"sc-a6876c8c-0"})(Oc(),(function(n){return n.theme.spacing[4]}),f.Z,(function(n){return n.theme.spacing[5]}),(function(n){return n.theme.spacing[5]})),Mc={classroom:g.L0.HOMEPAGE_CLASSROOM_CARD,brief:g.L0.HOMEPAGE_BRIEFS_CARD,statistic:g.L0.HOMEPAGE_METRICS_CARD,learner:g.L0.HOMEPAGE_LEARNERS_CARD,framework:g.L0.HOMEPAGE_FRAMEWORKS_CARD,resource:g.L0.HOMEPAGE_RESOURCES_CARD,scenario:g.L0.HOMEPAGE_SCENARIO_CARD},Bc=function(){var n,e,t,i=(0,r.Z)((0,l.$)(),1)[0],s=(0,h.OT)(),m=s.activeClassroom,C=s.isLoading,j=(0,g.o_)(),y=(0,p.z)(),S=y.user,w=y.refetchSettings,D=y.settings,I=(0,Q.Z)(),E=m?null!==(n=m.learners)&&void 0!==n?n:[]:S.learnersAsTutor,P=Rn.C.navbarHeight,k=(0,u.useMemo)((function(){var n,e=null!==(n=null===D||void 0===D?void 0:D.homecards)&&void 0!==n?n:[];return(0,o.Z)(null===e||void 0===e?void 0:e.filter((function(n){return j(Mc[n])})))}),[j,D]),L=(0,b.HF)(I,null!==(e=null===k||void 0===k?void 0:k.map((function(n){return Mc[n]})))&&void 0!==e?e:[],{offset:32-P,initialState:0}),R=(null!==(t=(0,v.tv)().state)&&void 0!==t?t:{}).anchor;return(0,b.Wb)(R),(0,a.jsxs)(Nc,{children:[(0,a.jsx)(x.C,{col:1,children:(0,a.jsx)(Xt,{user:S,cards:null!==k&&void 0!==k?k:[],value:c()(L)||null===k||void 0===k?void 0:k[L],onChange:function(n){if(k){var e=document.getElementById(Mc[n]);if(e){var t=e.offsetTop-window.scrollY-P;null===I||void 0===I||I.scrollTo({top:t,behavior:"smooth"})}}},onSave:w})}),(0,a.jsxs)(x.C,{col:11,children:[(0,a.jsx)(f.Z,{user:S,message:i("page.home.welcome.welcome")}),null===k||void 0===k?void 0:k.map((function(n){var e=Mc[n];switch(n){case"classroom":return(0,a.jsx)(dt,{id:e,classroom:m,showVisio:!0},e);case"brief":return(0,a.jsx)(Si,{id:e},e);case"statistic":return(0,a.jsx)(ot,{id:e,classroom:m,isTrainer:j(g.L0.CLASSROOM_METRICS_TRAINER),isLearner:!j(g.L0.CLASSROOM_METRICS_TRAINER)},e);case"learner":return(0,a.jsx)(ci,{id:e,isPending:C,learners:E,classroom:m},e);case"framework":return(0,a.jsx)(wt,{id:e,variant:j(g.L0.HOMEPAGE_CLASSROOM_SCOPED_FRAMEWORKS)?"classroom-scoped":"default"},e);case"resource":return(0,a.jsx)(d.Z,{id:e,loading:C,classroom:m},e);case"scenario":return(0,a.jsx)(kc,{id:e,loading:C,classroom:m},e);default:throw new Error("Homepage card not supported")}})),(0,a.jsx)(Z.Z,{})]})]})},_c=function(){var n=(0,r.Z)((0,l.$)(),1)[0];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ac.Z,{title:n("page.home.meta.title")}),(0,a.jsx)(Lc.Z,{children:(0,a.jsx)(Tc,{children:(0,a.jsx)(Bc,{})})})]})}}},function(n){n.O(0,[630,7246,9833,263,7557,2077,8116,773,5162,7863,3,4724,9578,5518,4221,1598,286,3709,5403,2787,2665,5688,6233,6516,93,8590,1489,4406,9774,2888,179],(function(){return e=48312,n(n.s=e);var e}));var e=n.O();_N_E=e}]);
//# sourceMappingURL=index-bbd305b9167184b6.js.map