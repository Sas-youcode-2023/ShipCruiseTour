(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8727],{69027:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workspaces/individual",function(){return r(82882)}])},66128:function(e,t,r){"use strict";var n=r(11163),i=r(67294),s=r(79450);t.Z=function(){var e=(0,n.useRouter)(),t=(0,s.Z)();return(0,i.useEffect)((function(){null===t||void 0===t||t.page()}),[e.asPath]),null}},79450:function(e,t,r){"use strict";var n=r(67294),i=r(99833);t.Z=function(){return(0,n.useContext)(i.Z)}},32669:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(47568),i=r(29815),s=r(34051),o=r.n(s),a=r(67294),c=r(16517),u=r(8773),l=r(19973),d=r(99222),f=function(e){return e.request.id},p=r(602),v=function(e,t){var r=t||{},s=r.manual,v=void 0!==s&&s,m=r.throwOnError,h=void 0===m||m,S=(0,a.useState)(!(null===t||void 0===t?void 0:t.manual)),b=S[0],T=S[1],Z=(0,a.useState)(),g=Z[0],C=Z[1],_=(0,a.useState)(),E=_[0],k=_[1],x=(0,a.useState)(),w=x[0],D=x[1],P=(0,a.useState)(),W=P[0],A=P[1],y=(0,a.useMemo)((function(){return new Map}),[]),L=(0,p.Z)(),O=(0,c.useSelector)(f),j=(0,a.useCallback)((0,n.Z)(o().mark((function t(){var r,n,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=(0,u.Z)(),y.clear(),y.set(r,!0),T(!0),k(r),n=function(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];y.has(r)&&(e.apply(void 0,(0,i.Z)(n)),T(!1))}},s=L.request(e),C(s),s.then(n(D)),s.catch(n(A));case 10:case"end":return t.stop()}}),t)}))),[L,e]);if((0,a.useEffect)((function(){v||j()}),[j,O]),h&&W)throw y.clear(),(null===W||void 0===W?void 0:W.response)?new l.Z(null===W||void 0===W?void 0:W.response):new d.Z(W);return{isPending:b,response:w,error:W,request:g,id:E,fetch:j}}},82882:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(10253),i=r(85893),s=r(67294),o=r(26793),a=r(66128),c=r(35688),u=r(20094),l=r(26042),d=r(69396),f=r(7297),p=r(11163),v=r(80129),m=r(73324),h=r(98583),S=r(47316),b=r(82383),T=r(59689),Z=r(24143),g=r(32669),C=r(1426),_=r(95176),E=r(29251),k=r(36201),x=r(30164),w=r(31948),D=r(2894);function P(){var e=(0,f.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 18px 12px 0 12px;\n    background-color: ",";\n\n    "," {\n        margin: 0 auto;\n    }\n"]);return P=function(){return e},e}var W=(0,m.ZP)((function(e){var t=e.className,r=e.isPending,a=e.topics,c=e.selectedTopic,u=e.onSelectTopic,l=e.onUpdateSortParam,d=e.isFiltered,f=e.setIsFiltered,p=e.isTrainer,v=e.onChangeSelectedBrief,m=e.selectedBrief,h=e.onChangeSelectedLearner,b=e.selectedLearner,Z=(0,n.Z)((0,o.$)(),1)[0],g=(0,S.o_)()(S.L0.TOPICS_WORK_SUBMIT),C=(0,s.useMemo)((function(){return[{id:1,propertyName:"brief.title",label:Z("page.corrections.briefs"),sortAscTitle:Z("accessibility.buttons.sortBriefAsc"),sortDescTitle:Z("accessibility.buttons.sortBriefDesc")},{id:2,propertyName:"lastRenderedWork.learnerDatetime",label:Z("page.corrections.lastWork"),sortAscTitle:Z("accessibility.buttons.sortLastRenderedWorkDatetimeAsc"),sortDescTitle:Z("accessibility.buttons.sortLastRenderedWorkDatetimeDesc")}]}),[]),_=(0,s.useMemo)((function(){return[{id:1,propertyName:"brief.title",label:Z("page.corrections.briefs"),sortAscTitle:Z("accessibility.buttons.sortBriefAsc"),sortDescTitle:Z("accessibility.buttons.sortBriefDesc")},{id:2,propertyName:"date",label:Z("page.corrections.lastWork"),sortAscTitle:Z("accessibility.buttons.sortLastWorkAsc"),sortDescTitle:Z("accessibility.buttons.sortLastWorkDesc")}]}),[]);return(0,i.jsxs)("div",{className:t,children:[(0,i.jsx)(w.Z,{onUpdateFiltered:f,isFiltered:d,isTrainer:p,onChangeSelectedBrief:v,selectedBrief:m,onChangeSelectedLearner:h,selectedLearner:b}),(0,i.jsx)(x.Z,{headerOptions:p?C:_,onUpdateSortParam:l,isPending:r,children:null===a||void 0===a?void 0:a.map((function(e){var t,r=D.u.BLANK;e.lastRenderedWork&&(r=e.lastRenderedWork.status===T.Wv.CORRECTED?D.u.ASSESSED:D.u.TO_BE_ASSESSED);var n=void 0;if(!g){var s=e.learner,o=s.name,a=s.surname,l=s.email;n=o&&a&&"".concat(o.toUpperCase(),", ").concat(a)||l}return(0,i.jsx)(D.Z,{title:e.brief.title,subtitle:n,date:null===(t=e.lastRenderedWork)||void 0===t?void 0:t.learnerDatetime,status:r,selected:(null===c||void 0===c?void 0:c["@id"])===e["@id"],onClick:function(){return u(e)},disabled:!e.learnerInClassroom},e["@id"])}))})]})})).withConfig({componentId:"sc-e4616258-0"})(P(),(function(e){return e.theme.palette.white.base}),k.Z);function A(){var e=(0,f.Z)(["\n    width: 100%;\n    height: 100%;\n"]);return A=function(){return e},e}var y=(0,m.ZP)(W).withConfig({componentId:"sc-c10df6cb-0"})(A()),L=function(){var e=(0,h.OT)().activeClassroom,t=(0,s.useState)(),r=t[0],a=t[1],c=(0,s.useState)(),f=c[0],m=c[1],k=(0,s.useState)(!1),x=k[0],w=k[1],D=(0,p.useRouter)(),P=D.query,W=D.push,A=(0,n.Z)((0,o.$)(),1)[0],L=(0,s.useState)(),O=L[0],j=L[1],I=(0,s.useState)(),N=I[0],R=I[1],B=(0,S.o_)(),F=B(S.L0.TOPICS_WORK_SUBMIT),M=B(S.L0.TOPICS_WORK_EVAL),U=function(e){return W(b.AW.TOPICS_DETAILS,b.AW.TOPICS_DETAILS.replace("[id]",(0,_.p)(e)||""),{shallow:!0})},q=(0,s.useMemo)((function(){var t=e&&(0,_.p)(e["@id"]),r=O?(0,_.p)(O["@id"]):void 0,n=N?(0,_.p)(N["@id"]):void 0,i={};return x&&(F?i.status=T.v_.UNVALIDATED:i["lastRenderedWork.status[]"]=Z.Wv.NONCORRECTED),(0,v.stringify)((0,l.Z)((0,d.Z)((0,l.Z)({},i),{"classroom.uuid":t||void 0,"brief.uuid":r||void 0,"learner.uuid":n||void 0,pagination:"false"}),f))}),[f,e,x,O,N]),K=(0,s.useMemo)((function(){return{url:"/topics?".concat(q)}}),[q]),$=(0,g.Z)(K,{manual:!0}),V=$.response,X=$.isPending,H=$.fetch;(0,s.useEffect)((function(){q&&H()}),[q,x]);var z=(null===V||void 0===V?void 0:V.data["hydra:member"])||[];(0,s.useEffect)((function(){z&&z.length>0&&!P.id&&U(z[0]["@id"])}),[z]),(0,s.useEffect)((function(){if(P&&z){var e=z.find((function(e){return(0,_.p)(e["@id"])===P.id}));e&&a(e)}}),[P,z]);var G=(0,s.useCallback)((function(e){a(e),U(e["@id"])}),[a]);return(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(u.Z,{title:A("page.corrections.meta.titleWithSelectedTitle",{briefTitle:r.brief.title,learnerName:r.learner.name,learnerSurname:r.learner.surname})}),(0,i.jsx)(C.Z,{menu:(0,i.jsx)(y,{isTrainer:M,topics:z,selectedTopic:r,onSelectTopic:G,isPending:X,onUpdateSortParam:m,setIsFiltered:w,isFiltered:x,onChangeSelectedBrief:j,selectedBrief:O,onChangeSelectedLearner:R,selectedLearner:N}),children:r&&(0,i.jsx)(E.ZP,{isTrainer:M,selectedTopic:r,onSubmitSuccess:H})})]})},O=r(89513),j=function(){var e=(0,n.Z)((0,o.$)(),1)[0];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{title:e("page.corrections.meta.title")}),(0,i.jsxs)(c.Z,{isFullWidth:!0,isFullHeight:!0,hideFooter:!0,children:[(0,i.jsx)(O.ZP,{workspace:O.j$.Individual,children:(0,i.jsx)(L,{})}),(0,i.jsx)(a.Z,{})]})]})}}},function(e){e.O(0,[7246,9833,263,7557,2077,8116,773,5162,5403,2787,2665,5688,6233,9035,9251,9774,2888,179],(function(){return t=69027,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=individual-99483795265d0f4f.js.map